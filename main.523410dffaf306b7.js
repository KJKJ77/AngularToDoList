"use strict";(self.webpackChunktodoapp=self.webpackChunktodoapp||[]).push([[179],{58:(Ei,mn,xe)=>{xe.d(mn,{BH:()=>yt,G6:()=>ei,L:()=>$e,LL:()=>U,Pz:()=>ot,Sg:()=>Qn,UG:()=>G,ZB:()=>ge,ZR:()=>K,aH:()=>At,b$:()=>Dn,eu:()=>F,hl:()=>M,jU:()=>Ot,m9:()=>so,ne:()=>Di,pd:()=>ha,r3:()=>kn,ru:()=>Ct,tV:()=>W,uI:()=>ln,vZ:()=>Ti,w1:()=>Xr,xO:()=>da,xb:()=>pr,z$:()=>Le,zd:()=>Br});const Ae=function(D){const w=[];let C=0;for(let $=0;$<D.length;$++){let x=D.charCodeAt($);x<128?w[C++]=x:x<2048?(w[C++]=x>>6|192,w[C++]=63&x|128):55296==(64512&x)&&$+1<D.length&&56320==(64512&D.charCodeAt($+1))?(x=65536+((1023&x)<<10)+(1023&D.charCodeAt(++$)),w[C++]=x>>18|240,w[C++]=x>>12&63|128,w[C++]=x>>6&63|128,w[C++]=63&x|128):(w[C++]=x>>12|224,w[C++]=x>>6&63|128,w[C++]=63&x|128)}return w},Mt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,w){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const C=w?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let x=0;x<D.length;x+=3){const ne=D[x],be=x+1<D.length,et=be?D[x+1]:0,ut=x+2<D.length,Ft=ut?D[x+2]:0;let hn=(15&et)<<2|Ft>>6,pt=63&Ft;ut||(pt=64,be||(hn=64)),$.push(C[ne>>2],C[(3&ne)<<4|et>>4],C[hn],C[pt])}return $.join("")},encodeString(D,w){return this.HAS_NATIVE_SUPPORT&&!w?btoa(D):this.encodeByteArray(Ae(D),w)},decodeString(D,w){return this.HAS_NATIVE_SUPPORT&&!w?atob(D):function(D){const w=[];let C=0,$=0;for(;C<D.length;){const x=D[C++];if(x<128)w[$++]=String.fromCharCode(x);else if(x>191&&x<224){const ne=D[C++];w[$++]=String.fromCharCode((31&x)<<6|63&ne)}else if(x>239&&x<365){const ut=((7&x)<<18|(63&D[C++])<<12|(63&D[C++])<<6|63&D[C++])-65536;w[$++]=String.fromCharCode(55296+(ut>>10)),w[$++]=String.fromCharCode(56320+(1023&ut))}else{const ne=D[C++],be=D[C++];w[$++]=String.fromCharCode((15&x)<<12|(63&ne)<<6|63&be)}}return w.join("")}(this.decodeStringToByteArray(D,w))},decodeStringToByteArray(D,w){this.init_();const C=w?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let x=0;x<D.length;){const ne=C[D.charAt(x++)],et=x<D.length?C[D.charAt(x)]:0;++x;const Ft=x<D.length?C[D.charAt(x)]:64;++x;const me=x<D.length?C[D.charAt(x)]:64;if(++x,null==ne||null==et||null==Ft||null==me)throw new qt;$.push(ne<<2|et>>4),64!==Ft&&($.push(et<<4&240|Ft>>2),64!==me&&$.push(Ft<<6&192|me))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class qt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $e=function(D){return function(D){const w=Ae(D);return Mt.encodeByteArray(w,!0)}(D).replace(/\./g,"")},W=function(D){try{return Mt.decodeString(D,!0)}catch(w){console.error("base64Decode failed: ",w)}return null};function ge(D,w){if(!(w instanceof Object))return w;switch(w.constructor){case Date:return new Date(w.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return w}for(const C in w)!w.hasOwnProperty(C)||!Be(C)||(D[C]=ge(D[C],w[C]));return D}function Be(D){return"__proto__"!==D}const Fe=()=>{try{return function tt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const w=D&&W(D[1]);return w&&JSON.parse(w)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},At=()=>{var D;return null===(D=Fe())||void 0===D?void 0:D.config},ot=D=>{var w;return null===(w=Fe())||void 0===w?void 0:w[`_${D}`]};class yt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((w,C)=>{this.resolve=w,this.reject=C})}wrapCallback(w){return(C,$)=>{C?this.reject(C):this.resolve($),"function"==typeof w&&(this.promise.catch(()=>{}),1===w.length?w(C):w(C,$))}}}function Qn(D,w){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=w||"demo-project",x=D.iat||0,ne=D.sub||D.user_id;if(!ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:x,exp:x+3600,auth_time:x,sub:ne,user_id:ne,firebase:{sign_in_provider:"custom",identities:{}}},D);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(be)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ln(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function G(){var D;const w=null===(D=Fe())||void 0===D?void 0:D.forceEnvironment;if("node"===w)return!0;if("browser"===w)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ot(){return"object"==typeof self&&self.self===self}function Ct(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function Dn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xr(){const D=Le();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function ei(){return!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((D,w)=>{try{let C=!0;const $="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open($);x.onsuccess=()=>{x.result.close(),C||self.indexedDB.deleteDatabase($),D(!0)},x.onupgradeneeded=()=>{C=!1},x.onerror=()=>{var ne;w((null===(ne=x.error)||void 0===ne?void 0:ne.message)||"")}}catch(C){w(C)}})}class K extends Error{constructor(w,C,$){super(C),this.code=w,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,K.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U.prototype.create)}}class U{constructor(w,C,$){this.service=w,this.serviceName=C,this.errors=$}create(w,...C){const $=C[0]||{},x=`${this.service}/${w}`,ne=this.errors[w],be=ne?function fe(D,w){return D.replace(ze,(C,$)=>{const x=w[$];return null!=x?String(x):`<${$}?>`})}(ne,$):"Error";return new K(x,`${this.serviceName}: ${be} (${x}).`,$)}}const ze=/\{\$([^}]+)}/g;function kn(D,w){return Object.prototype.hasOwnProperty.call(D,w)}function pr(D){for(const w in D)if(Object.prototype.hasOwnProperty.call(D,w))return!1;return!0}function Ti(D,w){if(D===w)return!0;const C=Object.keys(D),$=Object.keys(w);for(const x of C){if(!$.includes(x))return!1;const ne=D[x],be=w[x];if(Fn(ne)&&Fn(be)){if(!Ti(ne,be))return!1}else if(ne!==be)return!1}for(const x of $)if(!C.includes(x))return!1;return!0}function Fn(D){return null!==D&&"object"==typeof D}function da(D){const w=[];for(const[C,$]of Object.entries(D))Array.isArray($)?$.forEach(x=>{w.push(encodeURIComponent(C)+"="+encodeURIComponent(x))}):w.push(encodeURIComponent(C)+"="+encodeURIComponent($));return w.length?"&"+w.join("&"):""}function Br(D){const w={};return D.replace(/^\?/,"").split("&").forEach($=>{if($){const[x,ne]=$.split("=");w[decodeURIComponent(x)]=decodeURIComponent(ne)}}),w}function ha(D){const w=D.indexOf("?");if(!w)return"";const C=D.indexOf("#",w);return D.substring(w,C>0?C:void 0)}function Di(D,w){const C=new Ui(D,w);return C.subscribe.bind(C)}class Ui{constructor(w,C){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=C,this.task.then(()=>{w(this)}).catch($=>{this.error($)})}next(w){this.forEachObserver(C=>{C.next(w)})}error(w){this.forEachObserver(C=>{C.error(w)}),this.close(w)}complete(){this.forEachObserver(w=>{w.complete()}),this.close()}subscribe(w,C,$){let x;if(void 0===w&&void 0===C&&void 0===$)throw new Error("Missing Observer.");x=function _s(D,w){if("object"!=typeof D||null===D)return!1;for(const C of w)if(C in D&&"function"==typeof D[C])return!0;return!1}(w,["next","error","complete"])?w:{next:w,error:C,complete:$},void 0===x.next&&(x.next=Ai),void 0===x.error&&(x.error=Ai),void 0===x.complete&&(x.complete=Ai);const ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),ne}unsubscribeOne(w){void 0===this.observers||void 0===this.observers[w]||(delete this.observers[w],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(w){if(!this.finalized)for(let C=0;C<this.observers.length;C++)this.sendOne(C,w)}sendOne(w,C){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[w])try{C(this.observers[w])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(w){this.finalized||(this.finalized=!0,void 0!==w&&(this.finalError=w),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ai(){}function so(D){return D&&D._delegate?D._delegate:D}},303:(Ei,mn,xe)=>{function I(t){return"function"==typeof t}function Te(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const V=Te(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ae(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class at{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof V?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{_n(s)}catch(o){e=e??[],o instanceof V?e=[...e,...o.errors]:e.push(o)}}if(e)throw new V(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_n(e);else{if(e instanceof at){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ae(n,e)}remove(e){const{_finalizers:n}=this;n&&Ae(n,e),e instanceof at&&e._removeParent(this)}}at.EMPTY=(()=>{const t=new at;return t.closed=!0,t})();const Mt=at.EMPTY;function qt(t){return t instanceof at||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function _n(t){I(t)?t():t.unsubscribe()}const $e={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},W={setTimeout(t,e,...n){const{delegate:r}=W;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=W;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function te(t){W.setTimeout(()=>{const{onUnhandledError:e}=$e;if(!e)throw t;e(t)})}function ge(){}const Be=st("C",void 0,void 0);function st(t,e,n){return{kind:t,value:e,error:n}}let Se=null;function Fe(t){if($e.useDeprecatedSynchronousErrorHandling){const e=!Se;if(e&&(Se={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Se;if(Se=null,n)throw r}}else t()}class In extends at{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qt(e)&&e.add(this)):this.destination=Ot}static create(e,n,r){return new Qn(e,n,r)}next(e){this.isStopped?G(function yn(t){return st("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?G(function tt(t){return st("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?G(Be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const At=Function.prototype.bind;function ot(t,e){return At.call(t,e)}class yt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Le(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Le(r)}else Le(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Le(n)}}}class Qn extends In{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&$e.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ot(e.next,s),error:e.error&&ot(e.error,s),complete:e.complete&&ot(e.complete,s)}):i=e}this.destination=new yt(i)}}function Le(t){$e.useDeprecatedSynchronousErrorHandling?function vn(t){$e.useDeprecatedSynchronousErrorHandling&&Se&&(Se.errorThrown=!0,Se.error=t)}(t):te(t)}function G(t,e){const{onStoppedNotification:n}=$e;n&&W.setTimeout(()=>n(t,e))}const Ot={closed:!0,next:ge,error:function ln(t){throw t},complete:ge},Ct="function"==typeof Symbol&&Symbol.observable||"@@observable";function Dn(t){return t}let dt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function M(t){return t&&t instanceof In||function ei(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&qt(t)}(n)?n:new Qn(n,r,i);return Fe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=ms(r))((i,s)=>{const o=new Qn({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ct](){return this}pipe(...n){return function Xr(t){return 0===t.length?Dn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=ms(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function ms(t){var e;return null!==(e=t??$e.Promise)&&void 0!==e?e:Promise}const F=Te(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class t extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new q(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Mt:(this.currentObservers=null,s.push(n),new at(()=>{this.currentObservers=null,Ae(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new dt;return n.source=this,n}}return t.create=(e,n)=>new q(e,n),t})();class q extends j{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Mt}}function U(t){return e=>{if(function K(t){return I(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new ze(t,e,n,r,i)}class ze extends In{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ke(t,e){return U((n,r)=>{let i=0;n.subscribe(fe(r,s=>{r.next(t.call(e,s,i++))}))})}var _e=xe(582);const Xe=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function kt(t){return I(t?.then)}function Et(t){return I(t[Ct])}function An(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function dn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yn=function kn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pr(t){return I(t?.[Yn])}function la(t){return(0,_e.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,_e.qq)(n.read());if(i)return yield(0,_e.qq)(void 0);yield yield(0,_e.qq)(r)}}finally{n.releaseLock()}})}function Ti(t){return I(t?.getReader)}function Fn(t){if(t instanceof dt)return t;if(null!=t){if(Et(t))return function to(t){return new dt(e=>{const n=t[Ct]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Xe(t))return function da(t){return new dt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(kt(t))return function Br(t){return new dt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,te)})}(t);if(An(t))return Jn(t);if(pr(t))return function ha(t){return new dt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ti(t))return function Di(t){return Jn(la(t))}(t)}throw dn(t)}function Jn(t){return new dt(e=>{(function Ui(t,e){var n,r,i,s;return(0,_e.mG)(this,void 0,void 0,function*(){try{for(n=(0,_e.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ln(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ai(t,e,n=1/0){return I(e)?Ai((r,i)=>Ke((s,o)=>e(r,s,i,o))(Fn(t(r,i))),n):("number"==typeof e&&(n=e),U((r,i)=>function _s(t,e,n,r,i,s,o,a){const c=[];let d=0,p=0,g=!1;const _=()=>{g&&!c.length&&!d&&e.complete()},v=A=>d<r?E(A):c.push(A),E=A=>{s&&e.next(A),d++;let b=!1;Fn(n(A,p++)).subscribe(fe(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{b=!0},void 0,()=>{if(b)try{for(d--;c.length&&d<r;){const k=c.shift();o?Ln(e,o,()=>E(k)):E(k)}_()}catch(k){e.error(k)}}))};return t.subscribe(fe(e,v,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function ys(t=1/0){return Ai(Dn,t)}const Ur=new dt(t=>t.complete());function ji(t){return t[t.length-1]}function vs(t){return function Rr(t){return t&&I(t.schedule)}(ji(t))?t.pop():void 0}function Vn(t,e=0){return U((n,r)=>{n.subscribe(fe(r,i=>Ln(r,t,()=>r.next(i),e),()=>Ln(r,t,()=>r.complete(),e),i=>Ln(r,t,()=>r.error(i),e)))})}function Xn(t,e=0){return U((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function so(t,e){if(!t)throw new Error("Iterable cannot be null");return new dt(n=>{Ln(n,e,()=>{const r=t[Symbol.asyncIterator]();Ln(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function C(t,e){return e?function w(t,e){if(null!=t){if(Et(t))return function $i(t,e){return Fn(t).pipe(Xn(e),Vn(e))}(t,e);if(Xe(t))return function xu(t,e){return new dt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(kt(t))return function io(t,e){return Fn(t).pipe(Xn(e),Vn(e))}(t,e);if(An(t))return so(t,e);if(pr(t))return function fa(t,e){return new dt(n=>{let r;return Ln(n,e,()=>{r=t[Yn](),Ln(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(Ti(t))return function D(t,e){return so(la(t),e)}(t,e)}throw dn(t)}(t,e):Fn(t)}function $(...t){const e=vs(t),n=function ro(t,e){return"number"==typeof ji(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Fn(r[0]):ys(n)(C(r,e)):Ur}class x extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ne(...t){return C(t,vs(t))}function be(t={}){const{connector:e=(()=>new j),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,d=0,p=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),o=c=void 0,p=g=!1},E=()=>{const A=o;v(),A?.unsubscribe()};return U((A,b)=>{d++,!g&&!p&&_();const k=c=c??e();b.add(()=>{d--,0===d&&!g&&!p&&(a=et(E,i))}),k.subscribe(b),!o&&d>0&&(o=new Qn({next:R=>k.next(R),error:R=>{g=!0,_(),a=et(v,n,R),k.error(R)},complete:()=>{p=!0,_(),a=et(v,r),k.complete()}}),Fn(A).subscribe(o))})(s)}}function et(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Qn({next:()=>{r.unsubscribe(),t()}});return Fn(e(...n)).subscribe(r)}function ut(t,e){return U((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(fe(r,c=>{i?.unsubscribe();let d=0;const p=s++;Fn(t(c,p)).subscribe(i=fe(r,g=>r.next(e?e(c,g,p,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ft(t,e=Dn){return t=t??gr,U((n,r)=>{let i,s=!0;n.subscribe(fe(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function gr(t,e){return t===e}function me(t){for(let e in t)if(t[e]===me)return e;throw Error("Could not find renamed property on target object.")}function pt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(pt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ci(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Is=me({__forward_ref__:me});function L(t){return t.__forward_ref__=L,t.toString=function(){return pt(this())},t}function S(t){return function Y(t){return"function"==typeof t&&t.hasOwnProperty(Is)&&t.__forward_ref__===L}(t)?t():t}function ve(t){return t&&!!t.\u0275providers}class ee extends Error{constructor(e,n){super(function Xt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function pe(t){return"string"==typeof t?t:null==t?"":String(t)}function Hl(t,e){throw new ee(-201,!1)}function er(t,e){null==t&&function De(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function nt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Hi(t){return{providers:t.providers||[],imports:t.imports||[]}}function ga(t){return Es(t,ma)||Es(t,ep)}function Es(t,e){return t.hasOwnProperty(e)?t[e]:null}function oo(t){return t&&(t.hasOwnProperty(_a)||t.hasOwnProperty(Gl))?t[_a]:null}const ma=me({\u0275prov:me}),_a=me({\u0275inj:me}),ep=me({ngInjectableDef:me}),Gl=me({ngInjectorDef:me});var Ge=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ge||{});let ya;function Cn(t){const e=ya;return ya=t,e}function tp(t,e,n){const r=ga(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ge.Optional?null:void 0!==e?e:void Hl(pt(t))}const vt=globalThis;class ye{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=nt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ta={},Da="__NG_DI_FLAG__",Ou="ngTempTokenPath",ay=/\n/gm,op="__source";let ao;function tr(t){const e=ao;return ao=t,e}function uy(t,e=Ge.Default){if(void 0===ao)throw new ee(-203,!1);return null===ao?tp(t,void 0,e):ao.get(t,e&Ge.Optional?null:void 0,e)}function de(t,e=Ge.Default){return(function va(){return ya}()||uy)(S(t),e)}function wt(t,e=Ge.Default){return de(t,co(e))}function co(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function jr(t){const e=[];for(let n=0;n<t.length;n++){const r=S(t[n]);if(Array.isArray(r)){if(0===r.length)throw new ee(900,!1);let i,s=Ge.Default;for(let o=0;o<r.length;o++){const a=r[o],c=lo(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(de(i,s))}else e.push(de(r))}return e}function ti(t,e){return t[Da]=e,t.prototype[Da]=e,t}function lo(t){return t[Da]}function ni(t){return{toString:t}.toString()}var ku=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ku||{}),Sn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Sn||{});const ri={},We=[],Aa=me({\u0275cmp:me}),Fu=me({\u0275dir:me}),Ca=me({\u0275pipe:me}),_r=me({\u0275mod:me}),ii=me({\u0275fac:me}),Sa=me({__NG_ELEMENT_ID__:me}),Lu=me({__NG_ENV_ID__:me});function ba(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Vu(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];cp(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Yl(t){return 3===t||4===t||6===t}function cp(t){return 64===t.charCodeAt(0)}function ws(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Bu(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Bu(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Uu="ng-template";function ju(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==ba(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function $u(t){return 4===t.type&&t.value!==Uu}function lp(t,e,n){return e===(4!==t.type||n?t.value:Uu)}function Jl(t,e,n){let r=4;const i=t.attrs||[],s=function dp(t){for(let e=0;e<t.length;e++)if(Yl(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!lp(t,c,n)||""===c&&1===e.length){if(Pr(r))return!1;o=!0}}else{const d=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!ju(t.attrs,d,n)){if(Pr(r))return!1;o=!0}continue}const g=Xl(8&r?"class":c,i,$u(t),n);if(-1===g){if(Pr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const v=8&r?_:null;if(v&&-1!==ba(v,d,0)||2&r&&d!==_){if(Pr(r))return!1;o=!0}}}}else{if(!o&&!Pr(r)&&!Pr(c))return!1;if(o&&Pr(c))continue;o=!1,r=c|1&r}}return Pr(r)||o}function Pr(t){return 0==(1&t)}function Xl(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function td(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ra(t,e,n=!1){for(let r=0;r<e.length;r++)if(Jl(t,e[r],n))return!0;return!1}function Hu(t,e){return t?":not("+e.trim()+")":e}function cy(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Pr(o)&&(e+=Hu(s,i),i=""),r=o,s=s||!Pr(r);n++}return""!==i&&(e+=Hu(s,i)),e}function Pa(t){return ni(()=>{const e=zu(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ku.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Sn.Emulated,styles:t.styles||We,_:null,schemas:t.schemas||null,tView:null,id:""};fp(n);const r=t.dependencies;return n.directiveDefs=ho(r,!1),n.pipeDefs=ho(r,!0),n.id=function od(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function rd(t){return Qe(t)||en(t)}function id(t){return null!==t}function si(t){return ni(()=>({type:t.type,bootstrap:t.bootstrap||We,declarations:t.declarations||We,imports:t.imports||We,exports:t.exports||We,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qu(t,e){if(null==t)return ri;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Nr(t){return ni(()=>{const e=zu(t);return fp(e),e})}function Qe(t){return t[Aa]||null}function en(t){return t[Fu]||null}function Bn(t){return t[Ca]||null}function zu(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ri,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||We,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qu(t.inputs,e),outputs:qu(t.outputs)}}function fp(t){t.features?.forEach(e=>e(t))}function ho(t,e){if(!t)return null;const n=e?Bn:rd;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(id)}const zt=0,ae=1,Re=2,St=3,$r=4,Ds=5,Rn=6,zi=7,Zt=8,oi=9,fo=10,Ce=11,xa=12,Gu=13,po=14,Vt=15,Ma=16,Gi=17,ai=18,Oa=19,ad=20,ui=21,Ri=22,ci=23,go=24,qe=25,ud=1,pp=2,li=7,ka=9,tn=11;function rr(t){return Array.isArray(t)&&"object"==typeof t[ud]}function ir(t){return Array.isArray(t)&&!0===t[ud]}function gp(t){return 0!=(4&t.flags)}function mo(t){return t.componentOffset>-1}function ld(t){return 1==(1&t.flags)}function di(t){return!!t.template}function Fa(t){return 0!=(512&t[Re])}function Hr(t,e){return t.hasOwnProperty(ii)?t[ii]:null}let rn=null,Zu=!1;function sr(t){const e=rn;return rn=t,e}const yp={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function fd(t){if(!Va(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ep(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function pd(t){t.dirty=!0,function Ip(t){if(void 0===t.liveConsumerNode)return;const e=Zu;Zu=!0;try{for(const n of t.liveConsumerNode)n.dirty||pd(n)}finally{Zu=e}}(t),t.consumerMarkedDirty?.(t)}function Ss(t){return t&&(t.nextProducerIndex=0),sr(t)}function yo(t,e){if(sr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Va(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)vo(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ep(t){Zi(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fd(n),r!==n.version))return!0}return!1}function Ku(t){if(Zi(t),Va(t))for(let e=0;e<t.producerNode.length;e++)vo(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function vo(t,e){if(function md(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Zi(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)vo(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Zi(i),i.producerIndexOfThis[r]=e}}function Va(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Zi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let wp=null;const Cp=()=>{},wy=(()=>({...yp,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Cp}))();class yd{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ju(t){return t.type.prototype.ngOnChanges&&(t.setInput=vd),Ty}function Ty(){const t=Xu(this),e=t?.current;if(e){const n=t.previous;if(n===ri)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function vd(t,e,n,r){const i=this.declaredInputs[n],s=Xu(t)||function ec(t,e){return t[Sp]=e}(t,{previous:ri,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new yd(c&&c.currentValue,e,a===ri),t[r]=e}const Sp="__ngSimpleChanges__";function Xu(t){return t[Sp]||null}const xr=function(t,e,n){};function ht(t){for(;Array.isArray(t);)t=t[zt];return t}function or(t,e){return ht(e[t.index])}function wd(t,e){return t.data[e]}function yr(t,e){const n=e[t];return rr(n)?n:n[zt]}function Qi(t,e){return null==e?null:t[e]}function nc(t){t[Gi]=0}function Ad(t){1024&t[Re]||(t[Re]|=1024,Do(t,1))}function bp(t){1024&t[Re]&&(t[Re]&=-1025,Do(t,-1))}function Do(t,e){let n=t[St];if(null===n)return;n[Ds]+=e;let r=n;for(n=n[St];null!==n&&(1===e&&1===r[Ds]||-1===e&&0===r[Ds]);)n[Ds]+=e,r=n,n=n[St]}const we={lFrame:kp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Sd(){return we.bindingsEnabled}function Z(){return we.lFrame.lView}function Ye(){return we.lFrame.tView}function Co(t){return we.lFrame.contextLView=t,t[Zt]}function ic(t){return we.lFrame.contextLView=null,t}function sn(){let t=Ua();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ua(){return we.lFrame.currentTNode}function qr(t,e){const n=we.lFrame;n.currentTNode=t,n.isParent=e}function ja(){return we.lFrame.isParent}function So(){return we.lFrame.bindingIndex++}function My(t,e){const n=we.lFrame;n.bindingIndex=n.bindingRootIndex=t,ac(e)}function ac(t){we.lFrame.currentDirectiveIndex=t}function Md(t){we.lFrame.currentQueryIndex=t}function ky(t){const e=t[ae];return 2===e.type?e.declTNode:1===e.type?t[Rn]:null}function Mp(t,e,n){if(n&Ge.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Ge.Host||(i=ky(s),null===i||(s=s[po],10&i.type))););if(null===i)return!1;e=i,t=s}const r=we.lFrame=Op();return r.currentTNode=e,r.lView=t,!0}function Od(t){const e=Op(),n=t[ae];we.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Op(){const t=we.lFrame,e=null===t?null:t.child;return null===e?kp(t):e}function kp(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Fp(){const t=we.lFrame;return we.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Lp=Fp;function Ha(){const t=Fp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function jn(){return we.lFrame.selectedIndex}function Rs(t){we.lFrame.selectedIndex=t}let Up=!0;function bo(){return Up}function fi(t){Up=t}function Ro(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=p&&(t.destroyHooks??=[]).push(n,p)}}function uc(t,e,n){cc(t,e,3,n)}function qa(t,e,n,r){(3&t[Re])===n&&cc(t,e,n,r)}function kd(t,e){let n=t[Re];(3&n)===e&&(n&=8191,n+=1,t[Re]=n)}function cc(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&t[Gi]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[Gi]+=65536),(a<s||-1==s)&&(g0(t,n,e,c),t[Gi]=(4294901760&t[Gi])+c+2),c++}function jp(t,e){xr(4,t,e);const n=sr(null);try{e.call(t)}finally{sr(n),xr(5,t,e)}}function g0(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Re]>>13<t[Gi]>>16&&(3&t[Re])===e&&(t[Re]+=8192,jp(a,s)):jp(a,s)}const Yi=-1;class Po{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function hc(t){return t!==Yi}function za(t){return 32767&t}function zr(t,e){let n=function v0(t){return t>>16}(t),r=e;for(;n>0;)r=r[po],n--;return r}let Fd=!0;function fc(t){const e=Fd;return Fd=t,e}const Hp=255,pc=5;let zy=0;const pi={};function gc(t,e){const n=mc(t,e);if(-1!==n)return n;const r=e[ae];r.firstCreatePass&&(t.injectorIndex=e.length,Vd(r.data,t),Vd(e,null),Vd(r.blueprint,null));const i=_c(t,e),s=t.injectorIndex;if(hc(i)){const o=za(i),a=zr(i,e),c=a[ae].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function Vd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function mc(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function _c(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=Kp(i),null===r)return Yi;if(n++,i=i[po],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Yi}function Bd(t,e,n){!function Ld(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Sa)&&(r=n[Sa]),null==r&&(r=n[Sa]=zy++);const i=r&Hp;e.data[t+(i>>pc)]|=1<<i}(t,e,n)}function qp(t,e,n){if(n&Ge.Optional||void 0!==t)return t;Hl()}function zp(t,e,n,r){if(n&Ge.Optional&&void 0===r&&(r=null),!(n&(Ge.Self|Ge.Host))){const i=t[oi],s=Cn(void 0);try{return i?i.get(e,r,n&Ge.Optional):tp(e,r,n&Ge.Optional)}finally{Cn(s)}}return qp(r,0,n)}function Ud(t,e,n,r=Ge.Default,i){if(null!==t){if(2048&e[Re]&&!(r&Ge.Self)){const o=function Qy(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Re]&&!(512&o[Re]);){const a=yc(s,o,n,r|Ge.Self,pi);if(a!==pi)return a;let c=s.parent;if(!c){const d=o[ad];if(d){const p=d.get(n,pi,r);if(p!==pi)return p}c=Kp(o),o=o[po]}s=c}return i}(t,e,n,r,pi);if(o!==pi)return o}const s=yc(t,e,n,r,pi);if(s!==pi)return s}return zp(e,n,r,i)}function yc(t,e,n,r,i){const s=function jd(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Sa)?t[Sa]:void 0;return"number"==typeof e?e>=0?e&Hp:Ky:e}(n);if("function"==typeof s){if(!Mp(e,t,r))return r&Ge.Host?qp(i,0,r):zp(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Ge.Optional)return o;Hl()}finally{Lp()}}else if("number"==typeof s){let o=null,a=mc(t,e),c=Yi,d=r&Ge.Host?e[Vt][Rn]:null;for((-1===a||r&Ge.SkipSelf)&&(c=-1===a?_c(t,e):e[a+8],c!==Yi&&Wp(r,!1)?(o=e[ae],a=za(c),e=zr(c,e)):a=-1);-1!==a;){const p=e[ae];if(Gp(s,a,p.data)){const g=Wy(a,e,n,o,r,d);if(g!==pi)return g}c=e[a+8],c!==Yi&&Wp(r,e[ae].data[a+8]===d)&&Gp(s,a,e)?(o=p,a=za(c),e=zr(c,e)):a=-1}}return i}function Wy(t,e,n,r,i,s){const o=e[ae],a=o.data[t+8],p=function vc(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,p=s>>20,_=i?a+p:t.directiveEnd;for(let v=r?a:a+p;v<_;v++){const E=o[v];if(v<c&&n===E||v>=c&&E.type===n)return v}if(i){const v=o[c];if(v&&di(v)&&v.type===n)return c}return null}(a,o,n,null==r?mo(a)&&Fd:r!=o&&0!=(3&a.type),i&Ge.Host&&s===a);return null!==p?Ni(e,o,p,a):pi}function Ni(t,e,n,r){let i=t[n];const s=e.data;if(function lc(t){return t instanceof Po}(i)){const o=i;o.resolving&&function pa(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ee(-200,`Circular dependency in DI detected for ${t}${n}`)}(function He(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pe(t)}(s[n]));const a=fc(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Cn(o.injectImpl):null;Mp(t,r,Ge.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function jy(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Ju(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&Cn(d),fc(a),o.resolving=!1,Lp()}}return i}function Gp(t,e,n){return!!(n[e+(t>>pc)]&1<<t)}function Wp(t,e){return!(t&Ge.Self||t&Ge.Host&&e)}class $n{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Ud(this._tNode,this._lView,e,co(r),n)}}function Ky(){return new $n(sn(),Z())}function Kp(t){const e=t[ae],n=e.type;return 2===n?e.declTNode:1===n?t[Rn]:null}const No="__parameters__";function xo(t,e,n){return ni(()=>{const r=function qd(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,d,p){const g=c.hasOwnProperty(No)?c[No]:Object.defineProperty(c,No,{value:[]})[No];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Mo(t,e){t.forEach(n=>Array.isArray(n)?Mo(n,e):e(n))}function xi(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const u=ti(xo("Optional"),8),f=ti(xo("SkipSelf"),4);function fg(t){return 128==(128&t.flags)}var Fo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Fo||{});const ov=new Map;let nk=0;const uv="__ngContext__";function ar(t,e){rr(e)?(t[uv]=e[Oa],function ik(t){ov.set(t[Oa],t)}(e)):t[uv]=e}let cv;function lv(t,e){return cv(t,e)}function Xd(t){const e=t[St];return ir(e)?e[St]:e}function L0(t){return B0(t[xa])}function V0(t){return B0(t[$r])}function B0(t){for(;null!==t&&!ir(t);)t=t[$r];return t}function Tc(t,e,n,r,i){if(null!=r){let s,o=!1;ir(r)?s=r:rr(r)&&(o=!0,r=r[zt]);const a=ht(r);0===t&&null!==n?null==i?H0(e,n,a):Ya(e,n,a,i||null,!0):1===t&&null!==n?Ya(e,n,a,i||null,!0):2===t?function Ig(t,e,n){const r=yg(t,e);r&&function Tk(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function Ck(t,e,n,r,i){const s=n[li];s!==ht(n)&&Tc(e,t,r,s,i);for(let a=tn;a<n.length;a++){const c=n[a];th(c[ae],c,t,e,r,s)}}(e,t,s,n,i)}}function mg(t,e,n){return t.createElement(e,n)}function j0(t,e){const n=t[ka],r=n.indexOf(e);bp(e),n.splice(r,1)}function _g(t,e){if(t.length<=tn)return;const n=tn+e,r=t[n];if(r){const i=r[Ma];null!==i&&i!==t&&j0(i,r),e>0&&(t[n-1][$r]=r[$r]);const s=Wa(t,tn+e);!function gk(t,e){th(t,e,e[Ce],2,null,null),e[zt]=null,e[Rn]=null}(r[ae],r);const o=s[ai];null!==o&&o.detachView(s[ae]),r[St]=null,r[$r]=null,r[Re]&=-129}return r}function hv(t,e){if(!(256&e[Re])){const n=e[Ce];e[ci]&&Ku(e[ci]),e[go]&&Ku(e[go]),n.destroyNode&&th(t,e,n,3,null,null),function yk(t){let e=t[xa];if(!e)return fv(t[ae],t);for(;e;){let n=null;if(rr(e))n=e[xa];else{const r=e[tn];r&&(n=r)}if(!n){for(;e&&!e[$r]&&e!==t;)rr(e)&&fv(e[ae],e),e=e[St];null===e&&(e=t),rr(e)&&fv(e[ae],e),n=e&&e[$r]}e=n}}(e)}}function fv(t,e){if(!(256&e[Re])){e[Re]&=-129,e[Re]|=256,function wk(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Po)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];xr(4,a,c);try{c.call(a)}finally{xr(5,a,c)}}else{xr(4,i,s);try{s.call(i)}finally{xr(5,i,s)}}}}}(t,e),function Ek(t,e){const n=t.cleanup,r=e[zi];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[zi]=null);const i=e[ui];if(null!==i){e[ui]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[ae].type&&e[Ce].destroy();const n=e[Ma];if(null!==n&&ir(e[St])){n!==e[St]&&j0(n,e);const r=e[ai];null!==r&&r.detachView(t)}!function sk(t){ov.delete(t[Oa])}(e)}}function pv(t,e,n){return function $0(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[zt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Sn.None||s===Sn.Emulated)return null}return or(r,n)}}(t,e.parent,n)}function Ya(t,e,n,r,i){t.insertBefore(e,n,r,i)}function H0(t,e,n){t.appendChild(e,n)}function q0(t,e,n,r,i){null!==r?Ya(t,e,n,r,i):H0(t,e,n)}function yg(t,e){return t.parentNode(e)}let gv,vv,W0=function G0(t,e,n){return 40&t.type?or(t,n):null};function vg(t,e,n,r){const i=pv(t,r,e),s=e[Ce],a=function z0(t,e,n){return W0(t,e,n)}(r.parent||e[Rn],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)q0(s,i,n[c],a,!1);else q0(s,i,n,a,!1);void 0!==gv&&gv(s,r,e,n,i)}function eh(t,e){if(null!==e){const n=e.type;if(3&n)return or(e,t);if(4&n)return mv(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return eh(t,r);{const i=t[e.index];return ir(i)?mv(-1,i):ht(i)}}if(32&n)return lv(e,t)()||ht(t[e.index]);{const r=K0(t,e);return null!==r?Array.isArray(r)?r[0]:eh(Xd(t[Vt]),r):eh(t,e.next)}}return null}function K0(t,e){return null!==e?t[Vt][Rn].projection[e.projection]:null}function mv(t,e){const n=tn+t+1;if(n<e.length){const r=e[n],i=r[ae].firstChild;if(null!==i)return eh(r,i)}return e[li]}function _v(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===e&&(a&&ar(ht(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)_v(t,e,n.child,r,i,s,!1),Tc(e,t,i,a,s);else if(32&c){const d=lv(n,r);let p;for(;p=d();)Tc(e,t,i,p,s);Tc(e,t,i,a,s)}else 16&c?Y0(t,e,r,n,i,s):Tc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function th(t,e,n,r,i,s){_v(n,r,t.firstChild,e,i,s,!1)}function Y0(t,e,n,r,i,s){const o=n[Vt],c=o[Rn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)Tc(e,t,i,c[d],s);else{let d=c;const p=o[St];fg(r)&&(d.flags|=128),_v(t,e,d,p,i,s,!0)}}function J0(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function X0(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Vu(t,e,r),null!==i&&J0(t,e,i),null!==s&&function bk(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const Dg=new ye("ENVIRONMENT_INITIALIZER"),hA=new ye("INJECTOR",-1),fA=new ye("INJECTOR_DEF_TYPES");class Av{get(e,n=Ta){if(n===Ta){const r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return n}}function nF(...t){return{\u0275providers:gA(0,t),\u0275fromNgModule:!0}}function gA(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Mo(e,o=>{const a=o;Ag(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&mA(i,s),n}function mA(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Cv(i,s=>{e(s,r)})}}function Ag(t,e,n,r){if(!(t=S(t)))return!1;let i=null,s=oo(t);const o=!s&&Qe(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const c=t.ngModule;if(s=oo(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of c)Ag(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Mo(s.imports,p=>{Ag(p,e,n,r)&&(d||=[],d.push(p))})}finally{}void 0!==d&&mA(d,e)}if(!a){const d=Hr(i)||(()=>new i);e({provide:i,useFactory:d,deps:We},i),e({provide:fA,useValue:i,multi:!0},i),e({provide:Dg,useValue:()=>de(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const d=t;Cv(c,p=>{e(p,d)})}}}return i!==t&&void 0!==t.providers}function Cv(t,e){for(let n of t)ve(n)&&(n=n.\u0275providers),Array.isArray(n)?Cv(n,e):e(n)}const rF=me({provide:String,useValue:me});function Sv(t){return null!==t&&"object"==typeof t&&rF in t}function Ja(t){return"function"==typeof t}const bv=new ye("Set Injector scope."),Cg={},sF={};let Rv;function Sg(){return void 0===Rv&&(Rv=new Av),Rv}class Ms{}class Sc extends Ms{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Nv(e,o=>this.processProvider(o)),this.records.set(hA,bc(void 0,this)),i.has("environment")&&this.records.set(Ms,bc(void 0,this));const s=this.records.get(bv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fA.multi,We,Ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=tr(this),r=Cn(void 0);try{return e()}finally{tr(n),Cn(r)}}get(e,n=Ta,r=Ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Lu))return e[Lu](this);r=co(r);const s=tr(this),o=Cn(void 0);try{if(!(r&Ge.SkipSelf)){let c=this.records.get(e);if(void 0===c){const d=function lF(t){return"function"==typeof t||"object"==typeof t&&t instanceof ye}(e)&&ga(e);c=d&&this.injectableDefInScope(d)?bc(Pv(e),Cg):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ge.Self?Sg():this.parent).get(e,n=r&Ge.Optional&&n===Ta?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Ou]=a[Ou]||[]).unshift(pt(e)),s)throw a;return function ap(t,e,n,r){const i=t[Ou];throw e[op]&&i.unshift(e[op]),t.message=function up(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):pt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ay,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Ou]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Cn(o),tr(s)}}resolveInjectorInitializers(){const e=tr(this),n=Cn(void 0);try{const i=this.get(Dg.multi,We,Ge.Self);for(const s of i)s()}finally{tr(e),Cn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){let n=Ja(e=S(e))?e:S(e&&e.provide);const r=function aF(t){return Sv(t)?bc(void 0,t.useValue):bc(function vA(t,e,n){let r;if(Ja(t)){const i=S(t);return Hr(i)||Pv(i)}if(Sv(t))r=()=>S(t.useValue);else if(function yA(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...jr(t.deps||[]));else if(function _A(t){return!(!t||!t.useExisting)}(t))r=()=>de(S(t.useExisting));else{const i=S(t&&(t.useClass||t.provide));if(!function uF(t){return!!t.deps}(t))return Hr(i)||Pv(i);r=()=>new i(...jr(t.deps))}return r}(t),Cg)}(e);if(Ja(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=bc(void 0,Cg,!0),i.factory=()=>jr(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Cg&&(n.value=sF,n.value=n.factory()),"object"==typeof n.value&&n.value&&function cF(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=S(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Pv(t){const e=ga(t),n=null!==e?e.factory:Hr(t);if(null!==n)return n;if(t instanceof ye)throw new ee(204,!1);if(t instanceof Function)return function oF(t){const e=t.length;if(e>0)throw function Za(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new ee(204,!1);const n=function Xf(t){return t&&(t[ma]||t[ep])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new ee(204,!1)}function bc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Nv(t,e){for(const n of t)Array.isArray(n)?Nv(n,e):n&&ve(n)?Nv(n.\u0275providers,e):e(n)}const bg=new ye("AppId",{providedIn:"root",factory:()=>dF}),dF="ng",IA=new ye("Platform Initializer"),Os=new ye("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),EA=new ye("CSP nonce",{providedIn:"root",factory:()=>function Ac(){if(void 0!==vv)return vv;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let wA=(t,e,n)=>null;function Bv(t,e,n=!1){return wA(t,e,n)}class EF{}class AA{}class TF{resolveComponentFactory(e){throw function wF(t){const e=Error(`No component factory found for ${pt(t)}.`);return e.ngComponent=t,e}(e)}}let Og=(()=>{class t{static#e=this.NULL=new TF}return t})();function DF(){return Nc(sn(),Z())}function Nc(t,e){return new xc(or(t,e))}let xc=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=DF}return t})();class SA{}let bA=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function CF(){const t=Z(),n=yr(sn().index,t);return(rr(n)?n:t)[Ce]}()}return t})(),SF=(()=>{class t{static#e=this.\u0275prov=nt({token:t,providedIn:"root",factory:()=>null})}return t})();class kg{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const RA=new kg("16.2.11"),$v={};function MA(t,e=null,n=null,r){const i=OA(t,e,n,r);return i.resolveInjectorInitializers(),i}function OA(t,e=null,n=null,r,i=new Set){const s=[n||We,nF(t)];return r=r||("object"==typeof t?void 0:pt(t)),new Sc(s,e||Sg(),r||null,i)}let es=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Ta;static#t=this.NULL=new Av;static create(n,r){if(Array.isArray(n))return MA({name:""},r,n,"");{const i=n.name??"";return MA({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=nt({token:t,providedIn:"any",factory:()=>de(hA)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function qv(t){return t.ngOriginalError}class ks{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&qv(e);for(;n&&qv(n);)n=qv(n);return n||null}}function Gv(t){return e=>{setTimeout(t,void 0,e)}}const Fs=class OF extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Gv(s),i&&(i=Gv(i)),o&&(o=Gv(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof at&&e.add(a),a}};function FA(...t){}class bt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fs(!1),this.onMicrotaskEmpty=new Fs(!1),this.onStable=new Fs(!1),this.onError=new Fs(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function kF(){const t="function"==typeof vt.requestAnimationFrame;let e=vt[t?"requestAnimationFrame":"setTimeout"],n=vt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function VF(t){const e=()=>{!function LF(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(vt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Zv(t),t.isCheckStableRunning=!0,Wv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Zv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function UF(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return LA(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),VA(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return LA(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),VA(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Zv(t),Wv(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bt.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(bt.isInAngularZone())throw new ee(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,FF,FA,FA);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const FF={};function Wv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Zv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function LA(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function VA(t){t._nesting--,Wv(t)}class BF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fs,this.onMicrotaskEmpty=new Fs,this.onStable=new Fs,this.onError=new Fs}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const BA=new ye("",{providedIn:"root",factory:UA});function UA(){const t=wt(bt);let e=!0;return $(new dt(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{bt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{bt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(be()))}let Kv=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=nt({token:t,providedIn:"root",factory:()=>new t})}return t})();function ah(t){for(;t;){t[Re]|=64;const e=Xd(t);if(Fa(t)&&!e)return t;t=e}return null}const zA=new ye("",{providedIn:"root",factory:()=>!1});let Lg=null;function KA(t,e){return t[e]??JA()}function QA(t,e){const n=JA();n.producerNode?.length&&(t[e]=Lg,n.lView=t,Lg=YA())}const QF={...yp,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ah(t.lView)},lView:null};function YA(){return Object.create(QF)}function JA(){return Lg??=YA(),Lg}const ke={};function Vg(t){XA(Ye(),Z(),jn()+t,!1)}function XA(t,e,n,r){if(!r)if(3==(3&e[Re])){const s=t.preOrderCheckHooks;null!==s&&uc(e,s,n)}else{const s=t.preOrderHooks;null!==s&&qa(e,s,0,n)}Rs(n)}function je(t,e=Ge.Default){const n=Z();return null===n?de(t,e):Ud(sn(),n,S(t),e)}function Bg(t,e,n,r,i,s,o,a,c,d,p){const g=e.blueprint.slice();return g[zt]=i,g[Re]=140|r,(null!==d||t&&2048&t[Re])&&(g[Re]|=2048),nc(g),g[St]=g[po]=t,g[Zt]=n,g[fo]=o||t&&t[fo],g[Ce]=a||t&&t[Ce],g[oi]=c||t&&t[oi]||null,g[Rn]=s,g[Oa]=function rk(){return nk++}(),g[Ri]=p,g[ad]=d,g[Vt]=2==e.type?t[Vt]:g,g}function kc(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Qv(t,e,n,r,i){const s=Ua(),o=ja(),c=t.data[e]=function sL(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Ao(){return null!==we.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(t,e,n,r,i),function xy(){return we.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function bs(){const t=we.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return qr(s,!0),s}function uh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function eC(t,e,n,r,i){const s=KA(e,ci),o=jn(),a=2&r;try{Rs(-1),a&&e.length>qe&&XA(t,e,qe,!1),xr(a?2:0,i);const d=a?s:null,p=Ss(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{yo(d,p)}}finally{a&&null===e[ci]&&QA(e,ci),Rs(o),xr(a?3:1,i)}}function Yv(t,e,n){if(gp(e)){const r=sr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{sr(r)}}}function Jv(t,e,n){Sd()&&(function hL(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;mo(n)&&function vL(t,e,n){const r=or(e,t),i=tC(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Ug(t,Bg(t,i,null,o,r,e,null,t[fo].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||gc(n,e),ar(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const c=t.data[a],d=Ni(e,t,a,n);ar(d,e),null!==o&&IL(0,a-i,d,c,0,o),di(c)&&(yr(n.index,e)[Zt]=Ni(e,t,a,n))}}(t,e,n,or(n,e)),64==(64&n.flags)&&oC(t,e,n))}function Xv(t,e,n=or){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function tC(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=eI(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function eI(t,e,n,r,i,s,o,a,c,d,p){const g=qe+r,_=g+i,v=function XF(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ke);return n}(g,_),E="function"==typeof d?d():d;return v[ae]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:p}}let nC=t=>null;function rC(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?iC(n,e,i,s):r.hasOwnProperty(i)&&iC(n,e,r[i],s)}return n}function iC(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function tI(t,e,n,r){if(Sd()){const i=null===r?null:{"":-1},s=function pL(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Ra(e,o.selectors,!1))if(r||(r=[]),di(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),nI(t,e,a.length)}else r.unshift(o),nI(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&sC(t,e,n,o,i,a),i&&function gL(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new ee(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=ws(n.mergedAttrs,n.attrs)}function sC(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Bd(gc(n,e),t,r[d].type);!function _L(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,c=uh(t,e,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];n.mergedAttrs=ws(n.mergedAttrs,p.hostAttrs),yL(t,n,e,c,p),mL(c,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const g=p.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function oL(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,d=null;for(let p=e.directiveStart;p<i;p++){const g=s[p],_=n?n.get(g):null,E=_?_.outputs:null;c=rC(g.inputs,p,c,_?_.inputs:null),d=rC(g.outputs,p,d,E);const A=null===c||null===o||$u(e)?null:EL(c,p,o);a.push(A)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=d}(t,n,s)}function oC(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Oy(){return we.lFrame.currentDirectiveIndex}();try{Rs(s);for(let a=r;a<i;a++){const c=t.data[a],d=e[a];ac(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&fL(c,d)}}finally{Rs(-1),ac(o)}}function fL(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function nI(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;di(e)&&(n[""]=t)}}function yL(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Hr(i.type)),o=new Po(s,di(i),je);t.blueprint[r]=o,n[r]=o,function lL(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function dL(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,uh(t,n,i.hostVars,ke),i)}function IL(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)aC(r,n,o[a++],o[a++],o[a++])}function aC(t,e,n,r,i){const s=sr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{sr(s)}}function EL(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function uC(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function cC(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Md(n[r]),o.contentQueries(2,e[s],s)}}}function Ug(t,e){return t[xa]?t[Gu][$r]=e:t[xa]=e,t[Gu]=e,e}function iI(t,e,n){Md(0);const r=sr(null);try{e(t,n)}finally{sr(r)}}function fC(t,e){const n=t[oi],r=n?n.get(ks,null):null;r&&r.handleError(e)}function sI(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];aC(t.data[o],e[o],r,a,i)}}function Vs(t,e,n){const r=function tc(t,e){return ht(e[t])}(e,t);!function U0(t,e,n){t.setValue(e,n)}(t[Ce],r,n)}function wL(t,e){const n=yr(e,t),r=n[ae];!function TL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[zt];null!==i&&null===n[Ri]&&(n[Ri]=Bv(i,n[oi])),oI(r,n,n[Zt])}function oI(t,e,n){Od(e);try{const r=t.viewQuery;null!==r&&iI(1,r,n);const i=t.template;null!==i&&eC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&cC(t,e),t.staticViewQueries&&iI(2,t.viewQuery,n);const s=t.components;null!==s&&function DL(t,e){for(let n=0;n<e.length;n++)wL(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Re]&=-5,Ha()}}let pC=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Ap(t,e,n){const r=Object.create(wy);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>pd(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Ep(r))return;r.hasRun=!0;const o=Ss(r);try{r.cleanupFn(),r.cleanupFn=Cp,r.fn(i)}finally{yo(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=nt({token:t,providedIn:"root",factory:()=>new t})}return t})();function jg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Ci(i,a):2==s&&(r=Ci(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ch(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(ht(s)),ir(s)&&gC(s,r);const o=n.type;if(8&o)ch(t,e,n.child,r);else if(32&o){const a=lv(n,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=K0(e,n);if(Array.isArray(a))r.push(...a);else{const c=Xd(e[Vt]);ch(c[ae],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function gC(t,e){for(let n=tn;n<t.length;n++){const r=t[n],i=r[ae].firstChild;null!==i&&ch(r[ae],r,i,e)}t[li]!==t[zt]&&e.push(t[li])}function $g(t,e,n,r=!0){const i=e[fo],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{mC(t,e,t.template,n)}catch(c){throw r&&fC(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function mC(t,e,n,r){const i=e[Re];if(256!=(256&i)){e[fo].effectManager?.flush(),Od(e);try{nc(e),function sc(t){return we.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&eC(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&uc(e,d,null)}else{const d=t.preOrderHooks;null!==d&&qa(e,d,0,null),kd(e,0)}if(function SL(t){for(let e=L0(t);null!==e;e=V0(e)){if(!e[pp])continue;const n=e[ka];for(let r=0;r<n.length;r++){Ad(n[r])}}}(e),_C(e,2),null!==t.contentQueries&&cC(t,e),o){const d=t.contentCheckHooks;null!==d&&uc(e,d)}else{const d=t.contentHooks;null!==d&&qa(e,d,1),kd(e,1)}!function JF(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=KA(e,go);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)Rs(~s);else{const o=s,a=n[++i],c=n[++i];My(a,o),r.dirty=!1;const d=Ss(r);try{c(2,e[o])}finally{yo(r,d)}}}}finally{null===e[go]&&QA(e,go),Rs(-1)}}(t,e);const a=t.components;null!==a&&vC(e,a,0);const c=t.viewQuery;if(null!==c&&iI(2,c,r),o){const d=t.viewCheckHooks;null!==d&&uc(e,d)}else{const d=t.viewHooks;null!==d&&qa(e,d,2),kd(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Re]&=-73,bp(e)}finally{Ha()}}}function _C(t,e){for(let n=L0(t);null!==n;n=V0(n))for(let r=tn;r<n.length;r++)yC(n[r],e)}function bL(t,e,n){yC(yr(e,t),n)}function yC(t,e){if(!function Ay(t){return 128==(128&t[Re])}(t))return;const n=t[ae],r=t[Re];if(80&r&&0===e||1024&r||2===e)mC(n,t,n.template,t[Zt]);else if(t[Ds]>0){_C(t,1);const i=n.components;null!==i&&vC(t,i,1)}}function vC(t,e,n){for(let r=0;r<e.length;r++)bL(t,e[r],n)}class lh{get rootNodes(){const e=this._lView,n=e[ae];return ch(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zt]}set context(e){this._lView[Zt]=e}get destroyed(){return 256==(256&this._lView[Re])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[St];if(ir(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(_g(e,r),Wa(n,r))}this._attachedToViewContainer=!1}hv(this._lView[ae],this._lView)}onDestroy(e){!function Rp(t,e){if(256==(256&t[Re]))throw new ee(911,!1);null===t[ui]&&(t[ui]=[]),t[ui].push(e)}(this._lView,e)}markForCheck(){ah(this._cdRefInjectingView||this._lView)}detach(){this._lView[Re]&=-129}reattach(){this._lView[Re]|=128}detectChanges(){$g(this._lView[ae],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _k(t,e){th(t,e,e[Ce],2,null,null)}(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e}}class RL extends lh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;$g(e[ae],e,e[Zt],!1)}checkNoChanges(){}get context(){return null}}class IC extends Og{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Qe(e);return new dh(n,this.ngModule)}}function EC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class NL{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=co(r);const i=this.injector.get(e,$v,r);return i!==$v||n===$v?i:this.parentInjector.get(e,n,r)}}class dh extends AA{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=EC(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return EC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function nd(t){return t.map(cy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Ms?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new NL(e,s):e,a=o.get(SA,null);if(null===a)throw new ee(407,!1);const g={rendererFactory:a,sanitizer:o.get(SF,null),effectManager:o.get(pC,null),afterRenderEventManager:o.get(Kv,null)},_=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",E=r?function eL(t,e,n,r){const s=r.get(zA,!1)||n===Sn.ShadowDom,o=t.selectRootElement(e,s);return function tL(t){nC(t)}(o),o}(_,r,this.componentDef.encapsulation,o):mg(_,v,function PL(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),k=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=Bv(E,o,!0));const B=eI(0,null,null,1,0,null,null,null,null,null,null),X=Bg(null,B,null,k,null,null,g,_,o,null,R);let oe,Pe;Od(X);try{const ft=this.componentDef;let Kn,Zf=null;ft.findHostDirectiveDefs?(Kn=[],Zf=new Map,ft.findHostDirectiveDefs(ft,Kn,Zf),Kn.push(ft)):Kn=[ft];const ty=function ML(t,e){const n=t[ae],r=qe;return t[r]=e,kc(n,r,2,"#host",null)}(X,E),L6=function OL(t,e,n,r,i,s,o){const a=i[ae];!function kL(t,e,n,r){for(const i of t)e.mergedAttrs=ws(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(jg(e,e.mergedAttrs,!0),null!==n&&X0(r,n,e))}(r,t,e,o);let c=null;null!==e&&(c=Bv(e,i[oi]));const d=s.rendererFactory.createRenderer(e,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const g=Bg(i,tC(n),null,p,i[t.index],t,s,d,null,null,c);return a.firstCreatePass&&nI(a,t,r.length-1),Ug(i,g),i[t.index]=g}(ty,E,ft,Kn,X,g,_);Pe=wd(B,qe),E&&function LL(t,e,n,r){if(r)Vu(t,n,["ng-version",RA.full]);else{const{attrs:i,classes:s}=function ly(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Pr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Vu(t,n,i),s&&s.length>0&&J0(t,n,s.join(" "))}}(_,ft,E,r),void 0!==n&&function VL(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Pe,this.ngContentSelectors,n),oe=function FL(t,e,n,r,i,s){const o=sn(),a=i[ae],c=or(o,i);sC(a,i,o,n,null,r);for(let p=0;p<n.length;p++)ar(Ni(i,a,o.directiveStart+p,o),i);oC(a,i,o),c&&ar(c,i);const d=Ni(i,a,o.directiveStart+o.componentOffset,o);if(t[Zt]=i[Zt]=d,null!==s)for(const p of s)p(d,e);return Yv(a,o,t),d}(L6,ft,Kn,Zf,X,[BL]),oI(B,X,null)}finally{Ha()}return new xL(this.componentType,oe,Nc(Pe,X),X,Pe)}}class xL extends EF{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new RL(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;sI(s[ae],s,i,e,n),this.previousInputValues.set(e,n),ah(yr(this._tNode.index,s))}}get injector(){return new $n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function BL(){const t=sn();Ro(Z()[ae],t)}function qg(t){return!!aI(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function aI(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ur(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}let jC=function $C(t,e,n,r){return fi(!0),e[Ce].createComment("")};function Kg(t,e,n){const r=Z();return ur(r,So(),e)&&function Wr(t,e,n,r,i,s,o,a){const c=or(e,n);let p,d=e.inputs;!a&&null!=d&&(p=d[r])?(sI(t,n,p,r,i),mo(e)&&function uL(t,e){const n=yr(e,t);16&n[Re]||(n[Re]|=64)}(n,e.index)):3&e.type&&(r=function aL(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}(Ye(),function Bt(){const t=we.lFrame;return wd(t.tView,t.selectedIndex)}(),r,t,e,r[Ce],n,!1),Kg}function fI(t,e,n,r,i){const o=i?"class":"style";sI(t,n,e.inputs[o],o,r)}function Bs(t,e,n,r){const i=Z(),s=Ye(),o=qe+t,a=i[Ce],c=s.firstCreatePass?function vV(t,e,n,r,i,s){const o=e.consts,c=kc(e,t,2,r,Qi(o,i));return tI(e,n,c,Qi(o,s)),null!==c.attrs&&jg(c,c.attrs,!1),null!==c.mergedAttrs&&jg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,n,r):s.data[o],d=qC(s,i,c,a,e,t);i[o]=d;const p=ld(c);return qr(c,!0),X0(a,d,c),32!=(32&c.flags)&&bo()&&vg(s,i,d,c),0===function Sy(){return we.lFrame.elementDepthCount}()&&ar(d,i),function Cd(){we.lFrame.elementDepthCount++}(),p&&(Jv(s,i,c),Yv(s,c,i)),null!==r&&Xv(i,c),Bs}function Us(){let t=sn();ja()?function Pd(){we.lFrame.isParent=!1}():(t=t.parent,qr(t,!1));const e=t;(function by(t){return we.skipHydrationRootTNode===t})(e)&&function Rd(){we.skipHydrationRootTNode=null}(),function Np(){we.lFrame.elementDepthCount--}();const n=Ye();return n.firstCreatePass&&(Ro(n,t),gp(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Hy(t){return 0!=(8&t.flags)}(e)&&fI(n,e,Z(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function qy(t){return 0!=(16&t.flags)}(e)&&fI(n,e,Z(),e.stylesWithoutHost,!1),Us}function mh(t,e,n,r){return Bs(t,e,n,r),Us(),mh}let qC=(t,e,n,r,i,s)=>(fi(!0),mg(r,i,function Bp(){return we.lFrame.currentNamespace}()));function mI(){return Z()}function _I(t){return!!t&&"function"==typeof t.then}function WC(t){return!!t&&"function"==typeof t.subscribe}function _h(t,e,n,r){const i=Z(),s=Ye(),o=sn();return function KC(t,e,n,r,i,s,o){const a=ld(r),d=t.firstCreatePass&&function dC(t){return t.cleanup||(t.cleanup=[])}(t),p=e[Zt],g=function lC(t){return t[zi]||(t[zi]=[])}(e);let _=!0;if(3&r.type||o){const A=or(r,e),b=o?o(A):A,k=g.length,R=o?X=>o(ht(X[r.index])):r.index;let B=null;if(!o&&a&&(B=function AV(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[zi],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==B)(B.__ngLastListenerFn__||B).__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,_=!1;else{s=YC(r,e,p,s,!1);const X=n.listen(b,i,s);g.push(s,X),d&&d.push(i,R,k,k+1)}}else s=YC(r,e,p,s,!1);const v=r.outputs;let E;if(_&&null!==v&&(E=v[i])){const A=E.length;if(A)for(let b=0;b<A;b+=2){const oe=e[E[b]][E[b+1]].subscribe(s),Pe=g.length;g.push(s,oe),d&&d.push(i,r.index,Pe,-(Pe+1))}}}(s,i,i[Ce],o,t,e,r),_h}function QC(t,e,n,r){try{return xr(6,e,n),!1!==n(r)}catch(i){return fC(t,i),!1}finally{xr(7,e,n)}}function YC(t,e,n,r,i){return function s(o){if(o===Function)return r;ah(t.componentOffset>-1?yr(t.index,e):e);let c=QC(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)c=QC(e,n,d,o)&&c,d=d.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function yI(t=1){return function Fy(t){return(we.lFrame.contextLView=function Ly(t,e){for(;t>0;)e=e[po],t--;return e}(t,we.lFrame.contextLView))[Zt]}(t)}function DI(t,e=""){const n=Z(),r=Ye(),i=t+qe,s=r.firstCreatePass?kc(r,i,1,e,null):r.data[i],o=wS(r,n,s,e,t);n[i]=o,bo()&&vg(r,n,o,s),qr(s,!1)}let wS=(t,e,n,r,i)=>(fi(!0),function gg(t,e){return t.createText(e)}(e[Ce],r));function Jg(t,e,n){const r=Z(),i=function Lc(t,e,n,r){return ur(t,So(),n)?e+pe(n)+r:ke}(r,t,e,n);return i!==ke&&Vs(r,jn(),i),Jg}const Wc="en-US";let zS=Wc;class nu{}class vB{}class NI extends nu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new IC(this);const i=function nr(t,e){const n=t[_r]||null;if(!n&&!0===e)throw new Error(`Type ${pt(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Ls(t){return t instanceof Function?t():t}(i.bootstrap),this._r3Injector=OA(e,n,[{provide:nu,useValue:this},{provide:Og,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class xI extends vB{constructor(e){super(),this.moduleType=e}create(e){return new NI(this.moduleType,e,[])}}function JB(t,e,n,r=!0){const i=e[ae];if(function vk(t,e,n,r){const i=tn+r,s=n.length;r>0&&(n[i-1][$r]=e),r<s-tn?(e[$r]=n[i],xi(n,tn+r,e)):(n.push(e),e[$r]=null),e[St]=n;const o=e[Ma];null!==o&&n!==o&&function Ik(t,e){const n=t[ka];e[Vt]!==e[St][St][Vt]&&(t[pp]=!0),null===n?t[ka]=[e]:n.push(e)}(o,e);const a=e[ai];null!==a&&a.insertView(t),e[Re]|=128}(i,e,t,n),r){const s=mv(n,t),o=e[Ce],a=yg(o,t[li]);null!==a&&function mk(t,e,n,r,i,s){r[zt]=i,r[Rn]=e,th(t,r,n,1,i,s)}(i,t[Rn],o,e,a,s)}}Symbol;let js=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tU}return t})();const XB=js,eU=class extends XB{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function YB(t,e,n,r){const i=e.tView,a=Bg(t,i,n,4096&t[Re]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ma]=t[e.index];const d=t[ai];return null!==d&&(a[ai]=d.createEmbeddedView(i)),oI(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new lh(i)}};function tU(){return function rm(t,e){return 4&t.type?new eU(e,t,Nc(t,e)):null}(sn(),Z())}let ss=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=aU}return t})();function aU(){return function kb(t,e){let n;const r=e[t.index];return ir(r)?n=r:(n=uC(r,e,null,t),e[t.index]=n,Ug(e,n)),Fb(n,e,t,r),new Mb(n,t,e)}(sn(),Z())}const uU=ss,Mb=class extends uU{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Nc(this._hostTNode,this._hostLView)}get injector(){return new $n(this._hostTNode,this._hostLView)}get parentInjector(){const e=_c(this._hostTNode,this._hostLView);if(hc(e)){const n=zr(e,this._hostLView),r=za(e);return new $n(n[ae].data[r+8],n)}return new $n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Ob(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-tn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Ns(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}const c=o?e:new dh(Qe(e)),d=r||this.parentInjector;if(!s&&null==c.ngModule){const b=(o?d:this.parentInjector).get(Ms,null);b&&(s=b)}Qe(c.componentType??{});const v=c.create(d,i,null,s);return this.insertImpl(v.hostView,a,false),v}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Dd(t){return ir(t[St])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=i[St],p=new Mb(d,d[Rn],d[St]);p.detach(p.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return JB(a,i,o,!r),e.attachToViewContainerRef(),xi(kI(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Ob(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=_g(this._lContainer,n);r&&(Wa(kI(this._lContainer),n),hv(r[ae],r))}detach(e){const n=this._adjustIndex(e,-1),r=_g(this._lContainer,n);return r&&null!=Wa(kI(this._lContainer),n)?new lh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Ob(t){return t[8]}function kI(t){return t[8]||(t[8]=[])}let Fb=function Lb(t,e,n,r){if(t[li])return;let i;i=8&n.type?ht(r):function cU(t,e){const n=t[Ce],r=n.createComment(""),i=or(e,t);return Ya(n,yg(n,i),r,function Dk(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[li]=i};const HU=new ye("Application Initializer");let zI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=wt(HU,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(_I(s))n.push(s);else if(WC(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $s=new ye("LocaleId",{providedIn:"root",factory:()=>wt($s,Ge.Optional|Ge.SkipSelf)||function zU(){return typeof $localize<"u"&&$localize.locale||Wc}()});let ZU=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new x(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const cR=new ye(""),am=new ye("");let QI,ZI=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,QI||(function _j(t){QI=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(de(bt),de(KI),de(am))};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac})}return t})(),KI=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return QI?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Bo=null;const lR=new ye("AllowMultipleToken"),YI=new ye("PlatformDestroyListeners"),dR=new ye("appBootstrapListener");function pR(t,e,n=[]){const r=`Platform: ${e}`,i=new ye(r);return(s=[])=>{let o=JI();if(!o||o.injector.get(lR,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Ij(t){if(Bo&&!Bo.get(lR,!1))throw new ee(400,!1);(function hR(){!function _y(t){wp=t}(()=>{throw new ee(600,!1)})})(),Bo=t;const e=t.get(mR);(function fR(t){t.get(IA,null)?.forEach(n=>n())})(t)}(function gR(t=[],e){return es.create({name:e,providers:[{provide:bv,useValue:"platform"},{provide:YI,useValue:new Set([()=>Bo=null])},...t]})}(a,r))}return function wj(t){const e=JI();if(!e)throw new ee(401,!1);return e}()}}function JI(){return Bo?.get(mR)??null}let mR=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function Tj(t="zone.js",e){return"noop"===t?new BF:"zone.js"===t?new bt(e):t}(r?.ngZone,function _R(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function EB(t,e,n){return new NI(t,e,n)}(n.moduleType,this.injector,function wR(t){return[{provide:bt,useFactory:t},{provide:Dg,multi:!0,useFactory:()=>{const e=wt(Aj,{optional:!0});return()=>e.initialize()}},{provide:ER,useFactory:Dj},{provide:BA,useFactory:UA}]}(()=>i)),o=s.injector.get(ks,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{um(this._modules,s),a.unsubscribe()})}),function yR(t,e,n){try{const r=n();return _I(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(zI);return a.runInitializers(),a.donePromise.then(()=>(function GS(t){er(t,"Expected localeId to be defined"),"string"==typeof t&&(zS=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get($s,Wc)||Wc),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=vR({},r);return function yj(t,e,n){const r=new xI(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(bh);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new ee(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(YI,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(de(es))};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function vR(t,e){return Array.isArray(e)?e.reduce(vR,t):{...t,...e}}let bh=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=wt(ER),this.zoneIsStable=wt(BA),this.componentTypes=[],this.components=[],this.isStable=wt(ZU).hasPendingTasks.pipe(ut(n=>n?ne(!1):this.zoneIsStable),Ft(),be()),this._injector=wt(Ms)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof AA;if(!this._injector.get(zI).done)throw!i&&function Ts(t){const e=Qe(t)||en(t)||Bn(t);return null!==e&&e.standalone}(n),new ee(405,!1);let o;o=i?n:this._injector.get(Og).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function vj(t){return t.isBoundToModule}(o)?void 0:this._injector.get(nu),d=o.create(es.NULL,[],r||o.selector,a),p=d.location.nativeElement,g=d.injector.get(cR,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),um(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;um(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(dR,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>um(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ee(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function um(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ER=new ye("",{providedIn:"root",factory:()=>wt(ks).handleError.bind(void 0)});function Dj(){const t=wt(bt),e=wt(ks);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Aj=(()=>{class t{constructor(){this.zone=wt(bt),this.applicationRef=wt(bh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class SR{constructor(){}supports(e){return qg(e)}create(e){return new kj(e)}}const Oj=(t,e)=>e;class kj{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Oj}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<RR(r,i,s)?n:r,a=RR(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,p=c-i;if(d!=p){for(let _=0;_<d;_++){const v=_<s.length?s[_]:s[_]=0,E=v+_;p<=E&&E<d&&(s[_]=v+1)}s[o.previousIndex]=p-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!qg(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function YL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Fj(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new bR),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bR),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Fj{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Lj{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class bR{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new Lj,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RR(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class PR{constructor(){}supports(e){return e instanceof Map||aI(e)}create(){return new Vj}}class Vj{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||aI(e)))throw new ee(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new Bj(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class Bj{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NR(){return new dm([new SR])}let dm=(()=>{class t{static#e=this.\u0275prov=nt({token:t,providedIn:"root",factory:NR});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||NR()),deps:[[t,new f,new u]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new ee(901,!1)}}return t})();function xR(){return new Rh([new PR])}let Rh=(()=>{class t{static#e=this.\u0275prov=nt({token:t,providedIn:"root",factory:xR});constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||xR()),deps:[[t,new f,new u]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new ee(901,!1)}}return t})();const $j=pR(null,"core",[]);let Hj=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(de(bh))};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Hi({})}return t})(),iE=null;function sE(){return iE}class n${}const iu=new ye("DocumentToken"),gE=/\s+/,KR=[];let QR=(()=>{class t{constructor(n,r,i,s){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=KR,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(gE):KR}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(gE):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(gE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||t)(je(dm),je(Rh),je(xc),je(bA))};static#t=this.\u0275dir=Nr({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class q${constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let JR=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new q$(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),XR(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{XR(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(je(ss),je(js),je(dm))};static#t=this.\u0275dir=Nr({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function XR(t,e){t.context.$implicit=e.item}let _H=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Hi({})}return t})();function Tm(t){return"server"===t}class zH extends n${constructor(){super(...arguments),this.supportsDOMEvents=!0}}class wE extends zH{static makeCurrent(){!function t$(t){iE||(iE=t)}(new wE)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function GH(){return Mh=Mh||document.querySelector("base"),Mh?Mh.getAttribute("href"):null}();return null==n?null:function WH(t){Cm=Cm||document.createElement("a"),Cm.setAttribute("href",t);const e=Cm.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Mh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function $$(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Cm,Mh=null,KH=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac})}return t})();const TE=new ye("EventManagerPlugins");let uP=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(de(TE),de(bt))};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac})}return t})();class cP{constructor(e){this._doc=e}}const DE="ng-app-id";let lP=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Tm(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${DE}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(DE),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(DE,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(de(iu),de(bg),de(EA,8),de(Os))};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac})}return t})();const AE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},CE=/%COMP%/g,XH=new ye("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function hP(t,e){return e.map(n=>n.replace(CE,t))}let fP=(()=>{class t{constructor(n,r,i,s,o,a,c,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Tm(a),this.defaultRenderer=new SE(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Sn.ShadowDom&&(r={...r,encapsulation:Sn.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof gP?i.applyToHost(n):i instanceof bE&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Sn.Emulated:s=new gP(c,d,r,this.appId,p,o,a,g);break;case Sn.ShadowDom:return new r4(c,d,n,r,o,a,this.nonce,g);default:s=new bE(c,d,r,p,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(de(uP),de(lP),de(bg),de(XH),de(iu),de(Os),de(bt),de(EA))};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac})}return t})();class SE{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(AE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(pP(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(pP(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=AE[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=AE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Fo.DashCase|Fo.Important)?e.style.setProperty(n,r,i&Fo.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Fo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=sE().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function pP(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class r4 extends SE{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=hP(i.id,i.styles);for(const p of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class bE extends SE{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?hP(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class gP extends bE{constructor(e,n,r,i,s,o,a,c){const d=i+"-"+r.id;super(e,n,r,s,o,a,c,d),this.contentAttr=function e4(t){return"_ngcontent-%COMP%".replace(CE,t)}(d),this.hostAttr=function t4(t){return"_nghost-%COMP%".replace(CE,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let i4=(()=>{class t extends cP{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(de(iu))};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac})}return t})();const mP=["alt","control","meta","shift"],s4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},o4={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let a4=(()=>{class t extends cP{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sE().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),mP.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=s4[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),mP.forEach(o=>{o!==i&&(0,o4[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(de(iu))};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac})}return t})();const yP=[{provide:Os,useValue:"browser"},{provide:IA,useValue:function u4(){wE.makeCurrent()},multi:!0},{provide:iu,useFactory:function l4(){return function xk(t){vv=t}(document),document},deps:[]}],d4=pR($j,"browser",yP),h4=new ye(""),vP=[{provide:am,useClass:class ZH{addToWindow(e){vt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new ee(5103,!1);return s},vt.getAllAngularTestabilities=()=>e.getAllTestabilities(),vt.getAllAngularRootElements=()=>e.getAllRootElements(),vt.frameworkStabilizers||(vt.frameworkStabilizers=[]),vt.frameworkStabilizers.push(r=>{const i=vt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?sE().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:cR,useClass:ZI,deps:[bt,KI,am]},{provide:ZI,useClass:ZI,deps:[bt,KI,am]}],IP=[{provide:bv,useValue:"root"},{provide:ks,useFactory:function c4(){return new ks},deps:[]},{provide:TE,useClass:i4,multi:!0,deps:[iu,bt,Os]},{provide:TE,useClass:a4,multi:!0,deps:[iu]},fP,lP,uP,{provide:SA,useExisting:fP},{provide:class wH{},useClass:KH,deps:[]},[]];let f4=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:bg,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(de(h4,12))};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Hi({providers:[...IP,...vP],imports:[_H,Hj]})}return t})();typeof window<"u"&&window;var Yc=xe(534);(0,Yc.registerVersion)("firebase","10.5.2","app");class w4 extends at{constructor(e,n){super()}schedule(e,n=0){return this}}const Sm={setInterval(t,e,...n){const{delegate:r}=Sm;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Sm;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class DP extends w4{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Sm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Sm.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ae(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const PE={now:()=>(PE.delegate||Date).now(),delegate:void 0};class Oh{constructor(e,n=Oh.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Oh.now=PE.now;class AP extends Oh{constructor(e,n=Oh.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const A4=new class D4 extends AP{}(class T4 extends DP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),CP=new AP(DP),NE=new kg("ANGULARFIRE2_VERSION");class SP{constructor(){return((t,e)=>{const n=(0,Yc.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(b4)}}const b4="app-check";function Jc(){}class bP{zone;delegate;constructor(e,n=A4){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class R4{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jc,{},Jc,Jc)),n.pipe(function C4(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?U((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(fe(s,c=>{var d;null===(d=r.next)||void 0===d||d.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,c),s.error(c)},()=>{var c,d;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Dn}({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let RP=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new bP(Zone.current)),this.insideAngular=n.run(()=>new bP(Zone.current,CP)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(de(bt))};static \u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Kr(t){return function N4(t){return function(n){return(n=n.lift(new R4(t.ngZone))).pipe(Xn(t.outsideAngular),Vn(t.insideAngular))}}(function Xc(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var jo=xe(106);jo.Z.registerVersion("firebase","10.5.2","app-compat");const k4=["ngOnDestroy"];class PP{constructor(e){return e}}const bm=new ye("angularfire2.app.options"),Rm=new ye("angularfire2.app.name");function xE(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=jo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>jo.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;V4("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new PP(o)}const V4=(t,...e)=>{},B4={provide:PP,useFactory:xE,deps:[bm,bt,[new u,Rm]]};let U4=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:bm,useValue:n},{provide:Rm,useValue:r}]}}constructor(n){jo.Z.registerVersion("angularfire",NE.full,"core"),jo.Z.registerVersion("angularfire",NE.full,"app-compat"),jo.Z.registerVersion("angular",RA.full,n.toString())}static \u0275fac=function(r){return new(r||t)(de(Os))};static \u0275mod=si({type:t});static \u0275inj=Hi({providers:[B4]})}return t})();function NP(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function j4(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(xP("error",`${e} was already initialized on the ${n} Firebase App with different settings.${$4?" You may need to reload as Firebase is not HMR aware.":""}`),xP("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const $4=typeof module<"u"&&!!module.hot,xP=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],xe(290);class H4 extends j{constructor(e=1/0,n=1/0,r=PE){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function MP(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,be({connector:()=>new H4(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const OP=Te(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Pm(t,e){return U((n,r)=>{let i=0;n.subscribe(fe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function G4(t=W4){return U((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function W4(){return new OP}function kP(t,e){return I(e)?ut(()=>t,e):ut(()=>t)}const FP=new ye("angularfire2.auth.use-emulator"),LP=new ye("angularfire2.auth.settings"),VP=new ye("angularfire2.auth.tenant-id"),BP=new ye("angularfire2.auth.langugage-code"),UP=new ye("angularfire2.auth.use-device-language"),jP=new ye("angularfire.auth.persistence"),$P=(t,e,n,r,i,s,o,a)=>NP(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[d,p]of Object.entries(o))c.settings[d]=p;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]);let HP=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,c,d,p,g,_,v){const E=new j,A=ne(void 0).pipe(Vn(o.outsideAngular),ut(()=>s.runOutsideAngular(()=>Promise.resolve().then(xe.bind(xe,290)))),Ke(()=>xE(n,s,r)),Ke(b=>$P(b,s,a,d,p,g,c,_)),MP({bufferSize:1,refCount:!1}));if(Tm(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ne(null);else{A.pipe(function Z4(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Pm((i,s)=>t(i,s,r)):Dn,function q4(t){return t<=0?()=>Ur:U((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}(1),n?function z4(t){return U((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}(e):G4(()=>new OP))}()).subscribe();const b=A.pipe(ut(B=>B.getRedirectResult().then(X=>X,()=>null)),Kr,MP({bufferSize:1,refCount:!1})),k=A.pipe(ut(B=>new dt(X=>({unsubscribe:s.runOutsideAngular(()=>B.onAuthStateChanged(oe=>X.next(oe),oe=>X.error(oe),()=>X.complete()))})))),R=A.pipe(ut(B=>new dt(X=>({unsubscribe:s.runOutsideAngular(()=>B.onIdTokenChanged(oe=>X.next(oe),oe=>X.error(oe),()=>X.complete()))}))));this.authState=b.pipe(kP(k),Xn(o.outsideAngular),Vn(o.insideAngular)),this.user=b.pipe(kP(R),Xn(o.outsideAngular),Vn(o.insideAngular)),this.idToken=this.user.pipe(ut(B=>B?C(B.getIdToken()):ne(null))),this.idTokenResult=this.user.pipe(ut(B=>B?C(B.getIdTokenResult()):ne(null))),this.credential=$(b,E,this.authState.pipe(Pm(B=>!B))).pipe(Ke(B=>B?.user?B:null),Xn(o.outsideAngular),Vn(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(k4.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(d=>n.run(()=>d)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,d)=>o.then(p=>{const g=p?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,A,s,{spy:{apply:(b,k,R)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&R.then(B=>E.next(B))}}})}static \u0275fac=function(r){return new(r||t)(de(bm),de(Rm,8),de(Os),de(bt),de(RP),de(FP,8),de(LP,8),de(VP,8),de(BP,8),de(UP,8),de(jP,8),de(SP,8))};static \u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function qP(...t){return function Q4(){return ys(1)}()(C(t,vs(t)))}function ME(...t){const e=vs(t);return U((n,r)=>{(e?qP(t,n,e):qP(t,n)).subscribe(r)})}function OE(){return U((t,e)=>{let n,r=!1;t.subscribe(fe(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}function kE(t,e){return U(function Y4(t,e,n,r,i){return(s,o)=>{let a=n,c=e,d=0;s.subscribe(fe(o,p=>{const g=d++;c=a?t(c,p,g):(a=!0,p),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(t,e,arguments.length>=2,!0))}var ue,z=xe(861),zP=xe(537),os=xe(879),Dt=xe(58),J4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Li={},FE=FE||{},Oe=J4||self;function Nm(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function kh(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var LE="closure_uid_"+(1e9*Math.random()>>>0),e9=0;function t9(t,e,n){return t.call.apply(t.bind,arguments)}function n9(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function cr(t,e,n){return(cr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t9:n9).apply(null,arguments)}function xm(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Pn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function $o(){this.s=this.s,this.o=this.o}$o.prototype.s=!1,$o.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function X4(t){Object.prototype.hasOwnProperty.call(t,LE)&&t[LE]||(t[LE]=++e9)}(this)},$o.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const GP=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function VE(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function WP(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Nm(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function lr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}lr.prototype.h=function(){this.defaultPrevented=!0};var i9=function(){if(!Oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Oe.addEventListener("test",()=>{},e),Oe.removeEventListener("test",()=>{},e)}catch{}return t}();function Fh(t){return/^[\s\xa0]*$/.test(t)}function Mm(){var t=Oe.navigator;return t&&(t=t.userAgent)?t:""}function as(t){return-1!=Mm().indexOf(t)}function BE(t){return BE[" "](t),t}BE[" "]=function(){};var jE,t,o9=as("Opera"),el=as("Trident")||as("MSIE"),ZP=as("Edge"),UE=ZP||el,KP=as("Gecko")&&!(-1!=Mm().toLowerCase().indexOf("webkit")&&!as("Edge"))&&!(as("Trident")||as("MSIE"))&&!as("Edge"),a9=-1!=Mm().toLowerCase().indexOf("webkit")&&!as("Edge");function QP(){var t=Oe.document;return t?t.documentMode:void 0}e:{var $E="",HE=(t=Mm(),KP?/rv:([^\);]+)(\)|;)/.exec(t):ZP?/Edge\/([\d\.]+)/.exec(t):el?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):a9?/WebKit\/(\S+)/.exec(t):o9?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(HE&&($E=HE?HE[1]:""),el){var qE=QP();if(null!=qE&&qE>parseFloat($E)){jE=String(qE);break e}}jE=$E}var u9=Oe.document&&el&&(QP()||parseInt(jE,10))||void 0;function Lh(t,e){if(lr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(KP){e:{try{BE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:c9[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Lh.$.h.call(this)}}Pn(Lh,lr);var c9={2:"touch",3:"pen",4:"mouse"};Lh.prototype.h=function(){Lh.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Vh="closure_listenable_"+(1e6*Math.random()|0),l9=0;function d9(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++l9,this.fa=this.ia=!1}function Om(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function GE(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function JP(t){const e={};for(const n in t)e[n]=t[n];return e}const XP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function eN(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<XP.length;s++)n=XP[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function km(t){this.src=t,this.g={},this.h=0}function WE(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=GP(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Om(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ZE(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}km.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=ZE(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new d9(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var KE="closure_lm_"+(1e6*Math.random()|0),QE={};function tN(t,e,n,r,i){if(r&&r.once)return rN(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)tN(t,e[s],n,r,i);return null}return n=ew(n),t&&t[Vh]?t.O(e,n,kh(r)?!!r.capture:!!r,i):nN(t,e,n,!1,r,i)}function nN(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=kh(i)?!!i.capture:!!i,a=JE(t);if(a||(t[KE]=a=new km(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function f9(){const e=p9;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)i9||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sN(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function rN(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)rN(t,e[s],n,r,i);return null}return n=ew(n),t&&t[Vh]?t.P(e,n,kh(r)?!!r.capture:!!r,i):nN(t,e,n,!0,r,i)}function iN(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)iN(t,e[s],n,r,i);else r=kh(r)?!!r.capture:!!r,n=ew(n),t&&t[Vh]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ZE(s=t.g[e],n,r,i))&&(Om(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=JE(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ZE(e,n,r,i)),(n=-1<t?e[t]:null)&&YE(n))}function YE(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Vh])WE(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sN(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=JE(e))?(WE(n,t),0==n.h&&(n.src=null,e[KE]=null)):Om(t)}}}function sN(t){return t in QE?QE[t]:QE[t]="on"+t}function p9(t,e){if(t.fa)t=!0;else{e=new Lh(e,this);var n=t.listener,r=t.la||t.src;t.ia&&YE(t),t=n.call(r,e)}return t}function JE(t){return(t=t[KE])instanceof km?t:null}var XE="__closure_events_fn_"+(1e9*Math.random()>>>0);function ew(t){return"function"==typeof t?t:(t[XE]||(t[XE]=function(e){return t.handleEvent(e)}),t[XE])}function Nn(){$o.call(this),this.i=new km(this),this.S=this,this.J=null}function qn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new lr(e,t);else if(e instanceof lr)e.target=e.target||t;else{var i=e;eN(e=new lr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Fm(o,r,!0,e)&&i}if(i=Fm(o=e.g=t,r,!0,e)&&i,i=Fm(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Fm(o=e.g=n[s],r,!1,e)&&i}function Fm(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&WE(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Pn(Nn,$o),Nn.prototype[Vh]=!0,Nn.prototype.removeEventListener=function(t,e,n,r){iN(this,t,e,n,r)},Nn.prototype.N=function(){if(Nn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Om(n[r]);delete t.g[e],t.h--}}this.J=null},Nn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Nn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var tw=Oe.JSON.stringify;function m9(){var t=nw;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var oN=new class g9{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y9,t=>t.reset());class y9{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function v9(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function I9(t){Oe.setTimeout(()=>{throw t},0)}let Bh,Uh=!1,nw=new class _9{constructor(){this.h=this.g=null}add(e,n){const r=oN.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},aN=()=>{const t=Oe.Promise.resolve(void 0);Bh=()=>{t.then(E9)}};var E9=()=>{for(var t;t=m9();){try{t.h.call(t.g)}catch(n){I9(n)}var e=oN;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Uh=!1};function Lm(t,e){Nn.call(this),this.h=t||1,this.g=e||Oe,this.j=cr(this.qb,this),this.l=Date.now()}function rw(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function iw(t,e,n){if("function"==typeof t)n&&(t=cr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=cr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Oe.setTimeout(t,e||0)}function uN(t){t.g=iw(()=>{t.g=null,t.i&&(t.i=!1,uN(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Pn(Lm,Nn),(ue=Lm.prototype).ga=!1,ue.T=null,ue.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qn(this,"tick"),this.ga&&(rw(this),this.start()))}},ue.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ue.N=function(){Lm.$.N.call(this),rw(this),delete this.g};class w9 extends $o{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uN(this)}N(){super.N(),this.g&&(Oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jh(t){$o.call(this),this.h=t,this.g={}}Pn(jh,$o);var cN=[];function lN(t,e,n,r){Array.isArray(n)||(n&&(cN[0]=n.toString()),n=cN);for(var i=0;i<n.length;i++){var s=tN(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function dN(t){GE(t.g,function(e,n){this.g.hasOwnProperty(n)&&YE(e)},t),t.g={}}function Vm(){this.g=!0}function tl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function C9(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return tw(n)}catch{return e}}(t,n)+(r?" "+r:"")})}jh.prototype.N=function(){jh.$.N.call(this),dN(this)},jh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vm.prototype.Ea=function(){this.g=!1},Vm.prototype.info=function(){};var ou={},hN=null;function Bm(){return hN=hN||new Nn}function fN(t){lr.call(this,ou.Ta,t)}function $h(t){const e=Bm();qn(e,new fN(e))}function pN(t,e){lr.call(this,ou.STAT_EVENT,t),this.stat=e}function Dr(t){const e=Bm();qn(e,new pN(e,t))}function gN(t,e){lr.call(this,ou.Ua,t),this.size=e}function Hh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Oe.setTimeout(function(){t()},e)}ou.Ta="serverreachability",Pn(fN,lr),ou.STAT_EVENT="statevent",Pn(pN,lr),ou.Ua="timingevent",Pn(gN,lr);var Um={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function sw(){}function yN(){}sw.prototype.h=null;var uw,qh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ow(){lr.call(this,"d")}function aw(){lr.call(this,"c")}function jm(){}function zh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new jh(this),this.P=S9,this.V=new Lm(t=UE?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vN}function vN(){this.i=null,this.g="",this.h=!1}Pn(ow,lr),Pn(aw,lr),Pn(jm,sw),jm.prototype.g=function(){return new XMLHttpRequest},jm.prototype.i=function(){return{}},uw=new jm;var S9=45e3,cw={},$m={};function lw(t,e,n){t.L=1,t.v=Gm(zs(e)),t.s=n,t.S=!0,IN(t,null)}function IN(t,e){t.G=Date.now(),Gh(t),t.A=zs(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),PN(n.i,"t",r),t.C=0,n=t.l.J,t.h=new vN,t.g=ex(t.l,n?e:null,!t.s),0<t.O&&(t.M=new w9(cr(t.Pa,t,t.g),t.O)),lN(t.U,t.g,"readystatechange",t.nb),e=t.I?JP(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),$h(),function T9(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var d=a[c].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");o=2<=g.length&&"type"==g[1]?o+(p+"=")+d+"&":o+(p+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function EN(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function wN(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=b9(t,n),i==$m){4==e&&(t.o=4,Dr(14),r=!1),tl(t.j,t.m,null,"[Incomplete Response]");break}if(i==cw){t.o=4,Dr(15),tl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}tl(t.j,t.m,i,null),dw(t,i)}EN(t)&&i!=$m&&i!=cw&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Dr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yw(e),e.M=!0,Dr(11))):(tl(t.j,t.m,n,"[Invalid Chunked Response]"),au(t),Wh(t))}function b9(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?$m:(n=Number(e.substring(n,r)),isNaN(n)?cw:(r+=1)+n>e.length?$m:(e=e.slice(r,r+n),t.C=r+n,e))}function Gh(t){t.Y=Date.now()+t.P,TN(t,t.P)}function TN(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Hh(cr(t.lb,t),e)}function Hm(t){t.B&&(Oe.clearTimeout(t.B),t.B=null)}function Wh(t){0==t.l.H||t.J||QN(t.l,t)}function au(t){Hm(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,rw(t.V),dN(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function dw(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||hw(n.i,t)))if(!t.K&&hw(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Jm(n),Qm(n)}_w(n),Dr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Hh(cr(n.ib,n),6e3));if(1>=MN(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else cu(n,11)}else if((t.K||n.g==t)&&Jm(n),!Fh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const p=d[3];null!=p&&(n.ra=p,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const E=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(fw(s,s.h),s.h=null))}if(r.F){const A=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;A&&(r.Da=A,Ut(r.I,r.F,A))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=XN(r,r.J?r.pa:null,r.Y),o.K){ON(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(Hm(a),Gh(a)),r.g=o}else ZN(r);0<n.j.length&&Ym(n)}else"stop"!=d[0]&&"close"!=d[0]||cu(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?cu(n,7):mw(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}$h()}catch{}}function DN(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Nm(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function P9(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Nm(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function R9(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Nm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(ue=zh.prototype).setTimeout=function(t){this.P=t},ue.nb=function(t){t=t.target;const e=this.M;e&&3==us(t)?e.l():this.Pa(t)},ue.Pa=function(t){try{if(t==this.g)e:{const p=us(this.g);var e=this.g.Ia();if(this.g.da(),!(3>p)&&(3!=p||UE||this.g&&(this.h.h||this.g.ja()||$N(this.g)))){this.J||4!=p||7==e||$h(),Hm(this);var n=this.g.da();this.ca=n;t:if(EN(this)){var r=$N(this.g);t="";var i=r.length,s=4==us(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){au(this),Wh(this);var o="";break t}this.h.i=new Oe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function D9(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fh(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.o=3,Dr(12),au(this),Wh(this);break e}tl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dw(this,n)}this.S?(wN(this,p,o),UE&&this.i&&3==p&&(lN(this.U,this.V,"tick",this.mb),this.V.start())):(tl(this.j,this.m,o,null),dw(this,o)),4==p&&au(this),this.i&&!this.J&&(4==p?QN(this.l,this):(this.i=!1,Gh(this)))}else(function Z9(t){const e={};t=(t.g&&2<=us(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Fh(t[r]))continue;var n=v9(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function h9(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Dr(12)):(this.o=0,Dr(13)),au(this),Wh(this)}}}catch{}},ue.mb=function(){if(this.g){var t=us(this.g),e=this.g.ja();this.C<e.length&&(Hm(this),wN(this,t,e),this.i&&4!=t&&Gh(this))}},ue.cancel=function(){this.J=!0,au(this)},ue.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function A9(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($h(),Dr(17)),au(this),this.o=2,Wh(this)):TN(this,this.Y-t)};var AN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof uu){this.h=t.h,qm(this,t.j),this.s=t.s,this.g=t.g,zm(this,t.m),this.l=t.l;var e=t.i,n=new Qh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),CN(this,n),this.o=t.o}else t&&(e=String(t).match(AN))?(this.h=!1,qm(this,e[1]||"",!0),this.s=Zh(e[2]||""),this.g=Zh(e[3]||"",!0),zm(this,e[4]),this.l=Zh(e[5]||"",!0),CN(this,e[6]||"",!0),this.o=Zh(e[7]||"")):(this.h=!1,this.i=new Qh(null,this.h))}function zs(t){return new uu(t)}function qm(t,e,n){t.j=n?Zh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function zm(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function CN(t,e,n){e instanceof Qh?(t.i=e,function L9(t,e){e&&!t.j&&(Ho(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(bN(this,r),PN(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Kh(e,k9)),t.i=new Qh(e,t.h))}function Ut(t,e,n){t.i.set(e,n)}function Gm(t){return Ut(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Zh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kh(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,x9),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function x9(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}uu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Kh(e,SN,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Kh(e,SN,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kh(n,"/"==n.charAt(0)?O9:M9,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Kh(n,F9)),t.join("")};var SN=/[#\/\?@]/g,M9=/[#\?:]/g,O9=/[#\?]/g,k9=/[#\?@]/g,F9=/#/g;function Qh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ho(t){t.g||(t.g=new Map,t.h=0,t.i&&function N9(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function bN(t,e){Ho(t),e=nl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function RN(t,e){return Ho(t),e=nl(t,e),t.g.has(e)}function PN(t,e,n){bN(t,e),0<n.length&&(t.i=null,t.g.set(nl(t,e),VE(n)),t.h+=n.length)}function nl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function NN(t){this.l=t||B9,t=Oe.PerformanceNavigationTiming?0<(t=Oe.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Oe.g&&Oe.g.Ka&&Oe.g.Ka()&&Oe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ue=Qh.prototype).add=function(t,e){Ho(this),this.i=null,t=nl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ue.forEach=function(t,e){Ho(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},ue.ta=function(){Ho(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},ue.Z=function(t){Ho(this);let e=[];if("string"==typeof t)RN(this,t)&&(e=e.concat(this.g.get(nl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},ue.set=function(t,e){return Ho(this),this.i=null,RN(this,t=nl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ue.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var B9=10;function xN(t){return!!t.h||!!t.g&&t.g.size>=t.j}function MN(t){return t.h?1:t.g?t.g.size:0}function hw(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function fw(t,e){t.g?t.g.add(e):t.h=e}function ON(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function kN(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return VE(t.i)}NN.prototype.cancel=function(){if(this.i=kN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var U9=class{stringify(t){return Oe.JSON.stringify(t,void 0)}parse(t){return Oe.JSON.parse(t,void 0)}};function j9(){this.g=new U9}function $9(t,e,n){const r=n||"";try{DN(t,function(i,s){let o=i;kh(i)&&(o=tw(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wm(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Yh(t){this.l=t.ec||null,this.j=t.ob||!1}function Zm(t,e){Nn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=pw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pn(Yh,sw),Yh.prototype.g=function(){return new Zm(this.l,this.j)},Yh.prototype.i=function(t){return function(){return t}}({}),Pn(Zm,Nn);var pw=0;function FN(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Jh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Xh(t)}function Xh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ue=Zm.prototype).open=function(t,e){if(this.readyState!=pw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Xh(this)},ue.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jh(this)),this.readyState=pw},ue.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Xh(this)),this.g&&(this.readyState=3,Xh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FN(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},ue.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Jh(this):Xh(this),3==this.readyState&&FN(this)}},ue.Za=function(t){this.g&&(this.response=this.responseText=t,Jh(this))},ue.Ya=function(t){this.g&&(this.response=t,Jh(this))},ue.ka=function(){this.g&&Jh(this)},ue.setRequestHeader=function(t,e){this.v.append(t,e)},ue.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ue.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Zm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var q9=Oe.JSON.parse;function Qt(t){Nn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=LN,this.L=this.M=!1}Pn(Qt,Nn);var LN="",z9=/^https?$/i,G9=["POST","PUT"];function VN(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,BN(t),Km(t)}function BN(t){t.F||(t.F=!0,qn(t,"complete"),qn(t,"error"))}function UN(t){if(t.h&&typeof FE<"u"&&(!t.C[1]||4!=us(t)||2!=t.da()))if(t.v&&4==us(t))iw(t.La,0,t);else if(qn(t,"readystatechange"),4==us(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(AN)[1]||null;!i&&Oe.self&&Oe.self.location&&(i=Oe.self.location.protocol.slice(0,-1)),r=!z9.test(i?i.toLowerCase():"")}n=r}if(n)qn(t,"complete"),qn(t,"success");else{t.m=6;try{var s=2<us(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",BN(t)}}finally{Km(t)}}}function Km(t,e){if(t.g){jN(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||qn(t,"ready");try{n.onreadystatechange=r}catch{}}}function jN(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Oe.clearTimeout(t.A),t.A=null)}function us(t){return t.g?t.g.readyState:0}function $N(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case LN:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function HN(t){let e="";return GE(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function gw(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=HN(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ut(t,e,n))}function ef(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qN(t){this.Ga=0,this.j=[],this.l=new Vm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ef("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ef("baseRetryDelayMs",5e3,t),this.hb=ef("retryDelaySeedMs",1e4,t),this.eb=ef("forwardChannelMaxRetries",2,t),this.xa=ef("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new NN(t&&t.concurrentRequestLimit),this.Ja=new j9,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function mw(t){if(zN(t),3==t.H){var e=t.W++,n=zs(t.I);if(Ut(n,"SID",t.K),Ut(n,"RID",e),Ut(n,"TYPE","terminate"),tf(t,n),(e=new zh(t,t.l,e)).L=2,e.v=Gm(zs(n)),n=!1,Oe.navigator&&Oe.navigator.sendBeacon)try{n=Oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Oe.Image&&((new Image).src=e.v,n=!0),n||(e.g=ex(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Gh(e)}JN(t)}function Qm(t){t.g&&(yw(t),t.g.cancel(),t.g=null)}function zN(t){Qm(t),t.u&&(Oe.clearTimeout(t.u),t.u=null),Jm(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Oe.clearTimeout(t.m),t.m=null)}function Ym(t){if(!xN(t.i)&&!t.m){t.m=!0;var e=t.Na;Bh||aN(),Uh||(Bh(),Uh=!0),nw.add(e,t),t.C=0}}function GN(t,e){var n;n=e?e.m:t.W++;const r=zs(t.I);Ut(r,"SID",t.K),Ut(r,"RID",n),Ut(r,"AID",t.V),tf(t,r),t.o&&t.s&&gw(r,t.o,t.s),n=new zh(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=WN(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),fw(t.i,n),lw(n,r,e)}function tf(t,e){t.na&&GE(t.na,function(n,r){Ut(e,r,n)}),t.h&&DN({},function(n,r){Ut(e,r,n)})}function WN(t,e,n){n=Math.min(t.j.length,n);var r=t.h?cr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let d=i[c].g;const p=i[c].map;if(d-=s,0>d)s=Math.max(0,i[c].g-100),a=!1;else try{$9(p,o,"req"+d+"_")}catch{r&&r(p)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function ZN(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Bh||aN(),Uh||(Bh(),Uh=!0),nw.add(e,t),t.A=0}}function _w(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Hh(cr(t.Ma,t),YN(t,t.A)),t.A++,0))}function yw(t){null!=t.B&&(Oe.clearTimeout(t.B),t.B=null)}function KN(t){t.g=new zh(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=zs(t.wa);Ut(e,"RID","rpc"),Ut(e,"SID",t.K),Ut(e,"AID",t.V),Ut(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ut(e,"TO",t.qa),Ut(e,"TYPE","xmlhttp"),tf(t,e),t.o&&t.s&&gw(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Gm(zs(e)),n.s=null,n.S=!0,IN(n,t)}function Jm(t){null!=t.v&&(Oe.clearTimeout(t.v),t.v=null)}function QN(t,e){var n=null;if(t.g==e){Jm(t),yw(t),t.g=null;var r=2}else{if(!hw(t.i,e))return;n=e.F,ON(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;qn(r=Bm(),new gN(r,n)),Ym(t)}else ZN(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function K9(t,e){return!(MN(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Hh(cr(t.Na,t,e),YN(t,t.C)),t.C++,0)))}(t,e)||2==r&&_w(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:cu(t,5);break;case 4:cu(t,10);break;case 3:cu(t,6);break;default:cu(t,2)}}function YN(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function cu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=cr(t.pb,t);n||(n=new uu("//www.google.com/images/cleardot.gif"),Oe.location&&"http"==Oe.location.protocol||qm(n,"https"),Gm(n)),function H9(t,e){const n=new Vm;if(Oe.Image){const r=new Image;r.onload=xm(Wm,n,r,"TestLoadImage: loaded",!0,e),r.onerror=xm(Wm,n,r,"TestLoadImage: error",!1,e),r.onabort=xm(Wm,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=xm(Wm,n,r,"TestLoadImage: timeout",!1,e),Oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Dr(2);t.H=0,t.h&&t.h.za(e),JN(t),zN(t)}function JN(t){if(t.H=0,t.ma=[],t.h){const e=kN(t.i);(0!=e.length||0!=t.j.length)&&(WP(t.ma,e),WP(t.ma,t.j),t.i.i.length=0,VE(t.j),t.j.length=0),t.h.ya()}}function XN(t,e,n){var r=n instanceof uu?zs(n):new uu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),zm(r,r.m);else{var i=Oe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new uu(null);r&&qm(s,r),e&&(s.g=e),i&&zm(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Ut(r,n,e),Ut(r,"VER",t.ra),tf(t,r),r}function ex(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qt(n&&t.Ha&&!t.va?new Yh({ob:!0}):t.va)).Oa(t.J),e}function tx(){}function Xm(){if(el&&!(10<=Number(u9)))throw Error("Environmental error: no available transport.")}function Qr(t,e){Nn.call(this),this.g=new qN(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Fh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fh(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new rl(this)}function nx(t){ow.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function rx(){aw.call(this),this.status=1}function rl(t){this.g=t}function Vi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function vw(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function mt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(ue=Qt.prototype).Oa=function(t){this.M=t},ue.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():uw.g(),this.C=function _N(t){return t.h||(t.h=t.i())}(this.u?this.u:uw),this.g.onreadystatechange=cr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void VN(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Oe.FormData&&t instanceof Oe.FormData,!(0<=GP(G9,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jN(this),0<this.B&&((this.L=function W9(t){return el&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cr(this.ua,this)):this.A=iw(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){VN(this,s)}},ue.ua=function(){typeof FE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qn(this,"timeout"),this.abort(8))},ue.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,qn(this,"complete"),qn(this,"abort"),Km(this))},ue.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Km(this,!0)),Qt.$.N.call(this)},ue.La=function(){this.s||(this.G||this.v||this.l?UN(this):this.kb())},ue.kb=function(){UN(this)},ue.isActive=function(){return!!this.g},ue.da=function(){try{return 2<us(this)?this.g.status:-1}catch{return-1}},ue.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ue.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),q9(e)}},ue.Ia=function(){return this.m},ue.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ue=qN.prototype).ra=8,ue.H=1,ue.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new zh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=JP(s),eN(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=WN(this,i,e),Ut(n=zs(this.I),"RID",t),Ut(n,"CVER",22),this.F&&Ut(n,"X-HTTP-Session-Id",this.F),tf(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(HN(s)))+"&"+e:this.o&&gw(n,this.o,s)),fw(this.i,i),this.bb&&Ut(n,"TYPE","init"),this.P?(Ut(n,"$req",e),Ut(n,"SID","null"),i.aa=!0,lw(i,n,null)):lw(i,n,e),this.H=2}}else 3==this.H&&(t?GN(this,t):0==this.j.length||xN(this.i)||GN(this))},ue.Ma=function(){if(this.u=null,KN(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Hh(cr(this.jb,this),t)}},ue.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Dr(10),Qm(this),KN(this))},ue.ib=function(){null!=this.v&&(this.v=null,Qm(this),_w(this),Dr(19))},ue.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Dr(2)):(this.l.info("Failed to ping google.com"),Dr(1))},ue.isActive=function(){return!!this.h&&this.h.isActive(this)},(ue=tx.prototype).Ba=function(){},ue.Aa=function(){},ue.za=function(){},ue.ya=function(){},ue.isActive=function(){return!0},ue.Va=function(){},Xm.prototype.g=function(t,e){return new Qr(t,e)},Pn(Qr,Nn),Qr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Dr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=XN(t,null,t.Y),Ym(t)},Qr.prototype.close=function(){mw(this.g)},Qr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=tw(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Ym(e)},Qr.prototype.N=function(){this.g.h=null,delete this.j,mw(this.g),delete this.g,Qr.$.N.call(this)},Pn(nx,ow),Pn(rx,aw),Pn(rl,tx),rl.prototype.Ba=function(){qn(this.g,"a")},rl.prototype.Aa=function(t){qn(this.g,new nx(t))},rl.prototype.za=function(t){qn(this.g,new rx)},rl.prototype.ya=function(){qn(this.g,"b")},Pn(Vi,function Q9(){this.blockSize=-1}),Vi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vi.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)vw(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){vw(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){vw(this,r),i=0;break}}this.h=i,this.i+=e},Vi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var Y9={};function Iw(t){return-128<=t&&128>t?function s9(t,e){var n=Y9;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new mt([0|e],0>e?-1:0)}):new mt([0|t],0>t?-1:0)}function cs(t){if(isNaN(t)||!isFinite(t))return il;if(0>t)return zn(cs(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Ew;return new mt(e,0)}var Ew=4294967296,il=Iw(0),ww=Iw(1),sx=Iw(16777216);function Gs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function vi(t){return-1==t.h}function zn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new mt(n,~t.h).add(ww)}function e_(t,e){return t.add(zn(e))}function t_(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function nf(t,e){this.g=t,this.h=e}function n_(t,e){if(Gs(e))throw Error("division by zero");if(Gs(t))return new nf(il,il);if(vi(t))return e=n_(zn(t),e),new nf(zn(e.g),zn(e.h));if(vi(e))return e=n_(t,zn(e)),new nf(zn(e.g),e.h);if(30<t.g.length){if(vi(t)||vi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ww,r=e;0>=r.X(t);)n=ox(n),r=ox(r);var i=sl(n,1),s=sl(r,1);for(r=sl(r,2),n=sl(n,2);!Gs(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=sl(r,1),n=sl(n,1)}return e=e_(t,i.R(e)),new nf(i,e)}for(i=il;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=cs(n)).R(e);vi(o)||0<o.X(t);)o=(s=cs(n-=r)).R(e);Gs(s)&&(s=ww),i=i.add(s),t=e_(t,o)}return new nf(i,t)}function ox(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new mt(n,t.h)}function sl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new mt(i,t.h)}(ue=mt.prototype).ea=function(){if(vi(this))return-zn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Ew+r)*e,e*=Ew}return t},ue.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Gs(this))return"0";if(vi(this))return"-"+zn(this).toString(t);for(var e=cs(Math.pow(t,6)),n=this,r="";;){var i=n_(n,e).g,s=((0<(n=e_(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Gs(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ue.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},ue.X=function(t){return vi(t=e_(this,t))?-1:Gs(t)?0:1},ue.abs=function(){return vi(this)?zn(this):this},ue.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new mt(n,-2147483648&n[n.length-1]?-1:0)},ue.R=function(t){if(Gs(this)||Gs(t))return il;if(vi(this))return vi(t)?zn(this).R(zn(t)):zn(zn(this).R(t));if(vi(t))return zn(this.R(zn(t)));if(0>this.X(sx)&&0>t.X(sx))return cs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,c=65535&t.D(i);n[2*r+2*i]+=o*c,t_(n,2*r+2*i),n[2*r+2*i+1]+=s*c,t_(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,t_(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,t_(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new mt(n,0)},ue.gb=function(t){return n_(this,t).h},ue.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new mt(n,this.h&t.h)},ue.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new mt(n,this.h|t.h)},ue.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new mt(n,this.h^t.h)},Xm.prototype.createWebChannel=Xm.prototype.g,Qr.prototype.send=Qr.prototype.u,Qr.prototype.open=Qr.prototype.m,Qr.prototype.close=Qr.prototype.close,Um.NO_ERROR=0,Um.TIMEOUT=8,Um.HTTP_ERROR=6,mN.COMPLETE="complete",yN.EventType=qh,qh.OPEN="a",qh.CLOSE="b",qh.ERROR="c",qh.MESSAGE="d",Nn.prototype.listen=Nn.prototype.O,Qt.prototype.listenOnce=Qt.prototype.P,Qt.prototype.getLastError=Qt.prototype.Sa,Qt.prototype.getLastErrorCode=Qt.prototype.Ia,Qt.prototype.getStatus=Qt.prototype.da,Qt.prototype.getResponseJson=Qt.prototype.Wa,Qt.prototype.getResponseText=Qt.prototype.ja,Qt.prototype.send=Qt.prototype.ha,Qt.prototype.setWithCredentials=Qt.prototype.Oa,Vi.prototype.digest=Vi.prototype.l,Vi.prototype.reset=Vi.prototype.reset,Vi.prototype.update=Vi.prototype.j,mt.prototype.add=mt.prototype.add,mt.prototype.multiply=mt.prototype.R,mt.prototype.modulo=mt.prototype.gb,mt.prototype.compare=mt.prototype.X,mt.prototype.toNumber=mt.prototype.ea,mt.prototype.toString=mt.prototype.toString,mt.prototype.getBits=mt.prototype.D,mt.fromNumber=cs,mt.fromString=function ix(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return zn(ix(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=cs(Math.pow(e,8)),r=il,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=cs(Math.pow(e,s)),r=r.R(s).add(cs(o))):r=(r=r.R(n)).add(cs(o))}return r};var J9=Li.createWebChannelTransport=function(){return new Xm},X9=Li.getStatEventTarget=function(){return Bm()},Tw=Li.ErrorCode=Um,eq=Li.EventType=mN,tq=Li.Event=ou,ax=Li.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},nq=Li.FetchXmlHttpFactory=Yh,r_=Li.WebChannel=yN,rq=Li.XhrIo=Qt,iq=Li.Md5=Vi,ol=Li.Integer=mt;const ux="@firebase/firestore";class xn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");let al="10.5.2";const qo=new os.Yd("@firebase/firestore");function ul(){return qo.logLevel}function J(t,...e){if(qo.logLevel<=os.in.DEBUG){const n=e.map(Dw);qo.debug(`Firestore (${al}): ${t}`,...n)}}function un(t,...e){if(qo.logLevel<=os.in.ERROR){const n=e.map(Dw);qo.error(`Firestore (${al}): ${t}`,...n)}}function Fr(t,...e){if(qo.logLevel<=os.in.WARN){const n=e.map(Dw);qo.warn(`Firestore (${al}): ${t}`,...n)}}function Dw(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function le(t="Unexpected state"){const e=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: `+t;throw un(e),new Error(e)}function Ie(t,e){t||le()}function ie(t,e){return t}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Dt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class cx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xn.UNAUTHENTICATED))}shutdown(){}}class uq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cq{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,z.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},c=d=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie("string"==typeof r.accessToken),new cx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ie(null===e||"string"==typeof e),new xn(e)}}class lq{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dq{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new lq(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie("string"==typeof n.token),this.R=n.token,new lx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class dx{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=fq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function cl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function hx(t){return t+"\0"}class Gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Gt(0,0))}static max(){return new Ee(new Gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rf{constructor(e,n,r){void 0===n?n=0:n>e.length&&le(),void 0===r?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===rf.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class rt extends rf{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const pq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends rf{construct(e,n,r){return new jt(e,n,r)}static isValidIdentifier(e){return pq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Q(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}class se{constructor(e){this.path=e}static fromPath(e){return new se(rt.fromString(e))}static fromName(e){return new se(rt.fromString(e).popFirst(5))}static empty(){return new se(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new rt(e.slice()))}}class ll{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Aw(t){return t.fields.find(e=>2===e.kind)}function lu(t){return t.fields.filter(e=>2!==e.kind)}ll.UNKNOWN_ID=-1;class du{constructor(e,n){this.fieldPath=e,this.kind=n}}class dl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new dl(0,Yr.min())}}function fx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(1e9===r?new Gt(n+1,0):new Gt(n,r));return new Yr(i,se.empty(),e)}function px(t){return new Yr(t.readTime,t.key,-1)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(Ee.min(),se.empty(),-1)}static max(){return new Yr(Ee.max(),se.empty(),-1)}}function Cw(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=se.comparator(t.documentKey,e.documentKey),0!==n?n:Ne(t.largestBatchId,e.largestBatchId))}const gx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zo(t){return Sw.apply(this,arguments)}function Sw(){return Sw=(0,z.Z)(function*(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==gx)throw t;J("LocalStore","Unexpectedly lost primary lease")}),Sw.apply(this,arguments)}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(p=>{o[d]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class i_{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new wn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new sf(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=bw(r.target.error);this.V.reject(new sf(e,i))}}static open(e,n,r,i){try{return new i_(n,e.transaction(i,r))}catch(s){throw new sf(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(J("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new yq(n)}}class Bi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Bi.S((0,Dt.z$)())&&un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return J("SimpleDb","Removing database:",e),hu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Dt.hl)())return!1;if(Bi.C())return!0;const e=(0,Dt.z$)(),n=Bi.S(e),r=0<n&&n<10,i=Bi.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,z.Z)(function*(){return n.db||(J("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new sf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Q(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Q(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new sf(e,a))},s.onupgradeneeded=o=>{J("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{J("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,z.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const c=i_.open(s.db,e,o?"readonly":"readwrite",r),d=i(c).next(p=>(c.g(),p)).catch(p=>(c.abort(p),N.reject(p))).toPromise();return d.catch(()=>{}),yield c.m,d}catch(c){const d=c,p="FirebaseError"!==d.name&&a<3;if(J("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),s.close(),!p)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _q{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return hu(this.k.delete())}}class sf extends Q{constructor(e,n){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Go(t){return"IndexedDbTransactionError"===t.name}class yq{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(J("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(J("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hu(r)}add(e){return J("SimpleDb","ADD",this.store.name,e,e),hu(this.store.add(e))}get(e){return hu(this.store.get(e)).next(n=>(void 0===n&&(n=null),J("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return J("SimpleDb","DELETE",this.store.name,e),hu(this.store.delete(e))}count(){return J("SimpleDb","COUNT",this.store.name),hu(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new N((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){J("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=bw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new _q(a),d=n(a.primaryKey,a.value,c);if(d instanceof N){const p=d.catch(g=>(c.done(),N.reject(g)));r.push(p)}c.isDone?i():null===c.$?a.continue():a.continue(c.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function hu(t){return new N((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=bw(r.target.error);n(i)}})}let _x=!1;function bw(t){const e=Bi.S((0,Dt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _x||(_x=!0,setTimeout(()=>{throw r},0)),r}}return t}class vq{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;J("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,z.Z)(function*(){n.task=null;try{J("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){Go(r)?J("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield zo(r)}yield n.ee(6e4)}))}}class Iq{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return J("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(J("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=px(s);Cw(o,r)>0&&(r=o)}),new Yr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Jr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function of(t){return null==t}function af(t){return 0===t&&1/t==-1/0}function yx(t){return"number"==typeof t&&Number.isInteger(t)&&!af(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function dr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vx(e)),e=Eq(t.get(n),e);return vx(e)}function Eq(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function vx(t){return t+"\x01\x01"}function ls(t){const e=t.length;if(Ie(e>=2),2===e)return Ie("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),rt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&le(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:le()}s=o+2}return new rt(r)}const Ix=["userId","batchId"];function s_(t,e){return[t,dr(e)]}function Ex(t,e,n){return[t,dr(e),n]}const wq={},Tq=["prefixPath","collectionGroup","readTime","documentId"],Dq=["prefixPath","collectionGroup","documentId"],Aq=["collectionGroup","readTime","prefixPath","documentId"],Cq=["canonicalId","targetId"],Sq=["targetId","path"],bq=["path","targetId"],Rq=["collectionId","parent"],Pq=["indexId","uid"],Nq=["uid","sequenceNumber"],xq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mq=["indexId","uid","orderedDocumentKey"],Oq=["userId","collectionPath","documentId"],kq=["userId","collectionPath","largestBatchId"],Fq=["userId","collectionGroup","largestBatchId"],wx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Lq=[...wx,"documentOverlays"],Tx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dx=Tx,Vq=[...Dx,"indexConfiguration","indexState","indexEntries"];class Rw extends mx{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Mn(t,e){const n=ie(t);return Bi.M(n.ae,e)}function Ax(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Nt{constructor(e,n){this.comparator=e,this.root=n||Gn.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o_(this.root,e,this.comparator,!1)}getReverseIterator(){return new o_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o_(this.root,e,this.comparator,!0)}}class o_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Gn.RED,this.left=i??Gn.EMPTY,this.right=s??Gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Gn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Gn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1,Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sx(this.data.getIterator())}getIteratorFrom(e){return new Sx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Sx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hl(t){return t.hasNext()?t.getNext():void 0}class Lr{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Lr([])}unionWith(e){let n=new It(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class bx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bx("Invalid base64 string: "+s):s}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const Uq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zo(t){if(Ie(!!t),"string"==typeof t){let e=0;const n=Uq.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yt(t.seconds),nanos:Yt(t.nanos)}}function Yt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ws(t){return"string"==typeof t?Tn.fromBase64String(t):Tn.fromUint8Array(t)}function a_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function u_(t){const e=t.mapValue.fields.__previous_value__;return a_(e)?u_(e):e}function uf(t){const e=Zo(t.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}class jq{constructor(e,n,r,i,s,o,a,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}}class Ko{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ko("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ko&&e.projectId===this.projectId&&e.database===this.database}}const Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},c_={nullValue:"NULL_VALUE"};function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?a_(t)?4:xx(t)?9007199254740991:10:le()}function ds(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uf(t).isEqual(uf(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Zo(i.timestampValue),a=Zo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Ws(t.bytesValue).isEqual(Ws(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Yt(i.geoPointValue.latitude)===Yt(s.geoPointValue.latitude)&&Yt(i.geoPointValue.longitude)===Yt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Yt(i.integerValue)===Yt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Yt(i.doubleValue),a=Yt(s.doubleValue);return o===a?af(o)===af(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cl(t.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Ax(o)!==Ax(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!ds(o[c],a[c])))return!1;return!0}(t,e);default:return le()}var s}function cf(t,e){return void 0!==(t.values||[]).find(n=>ds(n,e))}function Jo(t,e){if(t===e)return 0;const n=Yo(t),r=Yo(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Yt(s.integerValue||s.doubleValue),c=Yt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Rx(t.timestampValue,e.timestampValue);case 4:return Rx(uf(t),uf(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ws(s),c=Ws(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const p=Ne(a[d],c[d]);if(0!==p)return p}return Ne(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ne(Yt(s.latitude),Yt(o.latitude));return 0!==a?a:Ne(Yt(s.longitude),Yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let d=0;d<a.length&&d<c.length;++d){const p=Jo(a[d],c[d]);if(p)return p}return Ne(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Qo.mapValue&&o===Qo.mapValue)return 0;if(s===Qo.mapValue)return 1;if(o===Qo.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),d=o.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=Ne(c[g],p[g]);if(0!==_)return _;const v=Jo(a[c[g]],d[p[g]]);if(0!==v)return v}return Ne(c.length,p.length)}(t.mapValue,e.mapValue);default:throw le()}}function Rx(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ne(t,e);const n=Zo(t),r=Zo(e),i=Ne(n.seconds,r.seconds);return 0!==i?i:Ne(n.nanos,r.nanos)}function fl(t){return Pw(t)}function Pw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ws(t.bytesValue).toBase64():"referenceValue"in t?se.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Pw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Pw(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function fu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nw(t){return!!t&&"integerValue"in t}function lf(t){return!!t&&"arrayValue"in t}function Px(t){return!!t&&"nullValue"in t}function Nx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function d_(t){return!!t&&"mapValue"in t}function df(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=df(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=df(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xx(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function $q(t){return"nullValue"in t?c_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?fu(Ko.empty(),se.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:le()}function Hq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?fu(Ko.empty(),se.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Qo:le()}function Mx(t,e){const n=Jo(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Ox(t,e){const n=Jo(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!d_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=df(n)}setAll(e){let n=jt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=df(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());d_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];d_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Wn(df(this.value))}}function kx(t){const e=[];return Wo(t.fields,(n,r)=>{const i=new jt([n]);if(d_(r)){const s=kx(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Lr(e)}class $t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $t(e,0,Ee.min(),Ee.min(),Ee.min(),Wn.empty(),0)}static newFoundDocument(e,n,r,i){return new $t(e,1,n,Ee.min(),r,i,0)}static newNoDocument(e,n){return new $t(e,2,n,Ee.min(),Ee.min(),Wn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Ee.min(),Ee.min(),Wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xo{constructor(e,n){this.position=e,this.inclusive=n}}function Fx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?se.comparator(se.fromName(o.referenceValue),n.key):Jo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Lx(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ds(t.position[n],e.position[n]))return!1;return!0}class hf{constructor(e,n="asc"){this.field=e,this.dir=n}}function qq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Vx{}class Je extends Vx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new zq(e,n,r):"array-contains"===n?new Zq(e,r):"in"===n?new qx(e,r):"not-in"===n?new Kq(e,r):"array-contains-any"===n?new Qq(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Gq(e,r):new Wq(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Jo(n,this.value)):null!==n&&Yo(this.value)===Yo(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _t extends Vx{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new _t(e,n)}matches(e){return pl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function pl(t){return"and"===t.op}function xw(t){return"or"===t.op}function Mw(t){return Bx(t)&&pl(t)}function Bx(t){for(const e of t.filters)if(e instanceof _t)return!1;return!0}function Ow(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(Mw(t))return t.filters.map(e=>Ow(e)).join(",");{const e=t.filters.map(n=>Ow(n)).join(",");return`${t.op}(${e})`}}function Ux(t,e){return t instanceof Je?(r=t,(i=e)instanceof Je&&r.op===i.op&&r.field.isEqual(i.field)&&ds(r.value,i.value)):t instanceof _t?function(r,i){return i instanceof _t&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Ux(o,i.filters[a]),!0)}(t,e):void le();var r,i}function jx(t,e){const n=t.filters.concat(e);return _t.create(n,t.op)}function $x(t){return t instanceof Je?`${(n=t).field.canonicalString()} ${n.op} ${fl(n.value)}`:t instanceof _t?function(n){return n.op.toString()+" {"+n.getFilters().map($x).join(" ,")+"}"}(t):"Filter";var n}class zq extends Je{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class Gq extends Je{constructor(e,n){super(e,"in",n),this.keys=Hx(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Wq extends Je{constructor(e,n){super(e,"not-in",n),this.keys=Hx(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hx(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class Zq extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lf(n)&&cf(n.arrayValue,this.value)}}class qx extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&cf(this.value.arrayValue,n)}}class Kq extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(cf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!cf(this.value.arrayValue,n)}}class Qq extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cf(this.value.arrayValue,r))}}class Yq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function kw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Yq(t,e,n,r,i,s,o)}function pu(t){const e=ie(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ow(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fl(r)).join(",")),e.ce=n}return e.ce}function ff(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ux(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lx(t.startAt,e.startAt)&&Lx(t.endAt,e.endAt)}function h_(t){return se.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function f_(t,e){return t.filters.filter(n=>n instanceof Je&&n.field.isEqual(e))}function zx(t,e,n){let r=c_,i=!0;for(const s of f_(t,e)){let o=c_,a=!0;switch(s.op){case"<":case"<=":o=$q(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=c_}Mx({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Mx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function Gx(t,e,n){let r=Qo,i=!0;for(const s of f_(t,e)){let o=Qo,a=!0;switch(s.op){case">=":case">":o=Hq(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Qo}Ox({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Ox({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Zs{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null}}function Wx(t,e,n,r,i,s,o,a){return new Zs(t,e,n,r,i,s,o,a)}function gl(t){return new Zs(t)}function Zx(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Fw(t){return null!==t.collectionGroup}function ml(t){const e=ie(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(jt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new hf(s,r))}),n.has(jt.keyField().canonicalString())||e.le.push(new hf(jt.keyField(),r))}return e.le}function Ar(t){const e=ie(t);return e.he||(e.he=function Kx(t,e){if("F"===t.limitType)return kw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new hf(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Xo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xo(t.startAt.position,t.startAt.inclusive):null;return kw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,ml(t))),e.he}function Lw(t,e){const n=t.filters.concat([e]);return new Zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function p_(t,e,n){return new Zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pf(t,e){return ff(Ar(t),Ar(e))&&t.limitType===e.limitType}function Qx(t){return`${pu(Ar(t))}|lt:${t.limitType}`}function _l(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$x(i)).join(", ")}]`),of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fl(i)).join(",")),`Target(${r})`}(Ar(t))}; limitType=${t.limitType})`}function gf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ml(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,c){const d=Fx(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,ml(r),i)||r.endAt&&!function(o,a,c){const d=Fx(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,ml(r),i)));var r,i}function Yx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Jx(t){return(e,n)=>{let r=!1;for(const i of ml(t)){const s=Jq(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Jq(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),d=a.data.field(s);return null!==c&&null!==d?Jo(c,d):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}class Ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Cx(this.inner)}size(){return this.innerSize}}const Xq=new Nt(se.comparator);function Vr(){return Xq}const Xx=new Nt(se.comparator);function mf(...t){let e=Xx;for(const n of t)e=e.insert(n.key,n);return e}function eM(t){let e=Xx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hs(){return _f()}function tM(){return _f()}function _f(){return new Ks(t=>t.toString(),(t,e)=>t.isEqual(e))}const ez=new Nt(se.comparator),tz=new It(se.comparator);function Ve(...t){let e=tz;for(const n of t)e=e.add(n);return e}const nz=new It(Ne);function Vw(){return nz}function nM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function rM(t){return{integerValue:""+t}}function iM(t,e){return yx(e)?rM(e):nM(t,e)}class g_{constructor(){this._=void 0}}function rz(t,e,n){return t instanceof yl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&a_(s)&&(s=u_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof gu?oM(t,e):t instanceof mu?aM(t,e):function(i,s){const o=sM(i,s),a=uM(o)+uM(i.Ie);return Nw(o)&&Nw(i.Ie)?rM(a):nM(i.serializer,a)}(t,e)}function iz(t,e,n){return t instanceof gu?oM(t,e):t instanceof mu?aM(t,e):n}function sM(t,e){return t instanceof vl?Nw(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class yl extends g_{}class gu extends g_{constructor(e){super(),this.elements=e}}function oM(t,e){const n=cM(e);for(const r of t.elements)n.some(i=>ds(i,r))||n.push(r);return{arrayValue:{values:n}}}class mu extends g_{constructor(e){super(),this.elements=e}}function aM(t,e){let n=cM(e);for(const r of t.elements)n=n.filter(i=>!ds(i,r));return{arrayValue:{values:n}}}class vl extends g_{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function uM(t){return Yt(t.integerValue||t.doubleValue)}function cM(t){return lf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class yf{constructor(e,n){this.field=e,this.transform=n}}class oz{constructor(e,n){this.version=e,this.transformResults=n}}class Wt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function m_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class __{}function lM(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new El(t.key,Wt.none()):new Il(t.key,t.data,Wt.none());{const n=t.data,r=Wn.empty();let i=new It(jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Qs(t.key,r,new Lr(i.toArray()),Wt.none())}}function az(t,e,n){t instanceof Il?function(i,s,o){const a=i.value.clone(),c=fM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Qs?function(i,s,o){if(!m_(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=fM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(hM(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function vf(t,e,n,r){return t instanceof Il?function(s,o,a,c){if(!m_(s.precondition,o))return a;const d=s.value.clone(),p=pM(s.fieldTransforms,c,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qs?function(s,o,a,c){if(!m_(s.precondition,o))return a;const d=pM(s.fieldTransforms,c,o),p=o.data;return p.setAll(hM(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,m_(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function uz(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=sM(r.transform,i||null);null!=s&&(null===n&&(n=Wn.empty()),n.set(r.field,s))}return n||null}function dM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&cl(r,i,(s,o)=>function sz(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof gu&&i instanceof gu||r instanceof mu&&i instanceof mu?cl(r.elements,i.elements,ds):r instanceof vl&&i instanceof vl?ds(r.Ie,i.Ie):r instanceof yl&&i instanceof yl);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Il extends __{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qs extends __{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fM(t,e,n){const r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iz(o,a,n[i]))}return r}function pM(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,rz(s,o,e))}return r}class El extends __{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bw extends __{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&az(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tM();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=lM(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ve())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(n,r)=>dM(n,r))&&cl(this.baseMutations,e.baseMutations,(n,r)=>dM(n,r))}}class jw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=ez;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new jw(e,n,r,i)}}class $w{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lz{constructor(e,n){this.count=e,this.unchangedNames=n}}var gn,it;function gM(t){switch(t){default:return le();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function mM(t){if(void 0===t)return un("GRPC error has no .code"),O.UNKNOWN;switch(t){case gn.OK:return O.OK;case gn.CANCELLED:return O.CANCELLED;case gn.UNKNOWN:return O.UNKNOWN;case gn.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case gn.INTERNAL:return O.INTERNAL;case gn.UNAVAILABLE:return O.UNAVAILABLE;case gn.UNAUTHENTICATED:return O.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case gn.NOT_FOUND:return O.NOT_FOUND;case gn.ALREADY_EXISTS:return O.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return O.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case gn.ABORTED:return O.ABORTED;case gn.OUT_OF_RANGE:return O.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return O.UNIMPLEMENTED;case gn.DATA_LOSS:return O.DATA_LOSS;default:return le()}}(it=gn||(gn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";function _M(){return new TextEncoder}const dz=new ol([4294967295,4294967295],0);function yM(t){const e=_M().encode(t),n=new iq;return n.update(e),new Uint8Array(n.digest())}function vM(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ol([n,r],0),new ol([i,s],0)]}class Hw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new If(`Invalid padding: ${n}`);if(r<0)throw new If(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new If(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new If(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ol.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ol.fromNumber(r)));return 1===i.compare(dz)&&(i=new ol([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=yM(e),[r,i]=vM(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Hw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=yM(e),[r,i]=vM(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class If extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ef{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ef(Ee.min(),i,new Nt(Ne),Vr(),Ve())}}class wf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wf(r,n,Ve(),Ve(),Ve())}}class v_{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class IM{constructor(e,n){this.targetId=e,this.fe=n}}class EM{constructor(e,n,r=Tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wM{constructor(){this.ge=0,this.pe=DM(),this.ye=Tn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ve(),n=Ve(),r=Ve();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new wf(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=DM()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class hz{constructor(e){this.Le=e,this.ke=new Map,this.qe=Vr(),this.Qe=TM(),this.Ke=new Nt(Ne)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(h_(s))if(0===r){const o=new se(s.path);this.We(n,o,$t.newNoDocument(o,Ee.min()))}else Ie(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),c=a?this.et(a,e,o):1;0!==c&&(this.He(n),this.Ke=this.Ke.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ws(r).toUint8Array()}catch(c){if(c instanceof bx)return Fr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Hw(o,i,s)}catch(c){return Fr(c instanceof If?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&h_(a.target)){const c=new se(a.target.path);null!==this.qe.get(c)||this.st(o,c)||this.We(o,c,$t.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ve();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const d=this.Ye(c);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Ef(e,n,this.Ke,this.qe,r);return this.qe=Vr(),this.Qe=TM(),this.Ke=new Nt(Ne),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new wM,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new It(Ne),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||J("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new wM),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function TM(){return new Nt(se.comparator)}function DM(){return new Nt(se.comparator)}const fz={asc:"ASCENDING",desc:"DESCENDING"},pz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gz={and:"AND",or:"OR"};class mz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qw(t,e){return t.useProto3Json||of(e)?e:{value:e}}function wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _z(t,e){return wl(t,e.toTimestamp())}function cn(t){return Ie(!!t),Ee.fromTimestamp(function(n){const r=Zo(n);return new Gt(r.seconds,r.nanos)}(t))}function zw(t,e){return(r=t,new rt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function CM(t){const e=rt.fromString(t);return Ie(kM(e)),e}function Tf(t,e){return zw(t.databaseId,e.path)}function fs(t,e){const n=CM(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(bM(n))}function Gw(t,e){return zw(t.databaseId,e)}function SM(t){const e=CM(t);return 4===e.length?rt.emptyPath():bM(e)}function Df(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bM(t){return Ie(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function RM(t,e,n){return{name:Tf(t,e),fields:n.value.mapValue.fields}}function PM(t,e,n){const r=fs(t,e.name),i=cn(e.updateTime),s=e.createTime?cn(e.createTime):Ee.min(),o=new Wn({mapValue:{fields:e.fields}}),a=$t.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Af(t,e){let n;if(e instanceof Il)n={update:RM(t,e.key,e.value)};else if(e instanceof El)n={delete:Tf(t,e.key)};else if(e instanceof Qs)n={update:RM(t,e.key,e.data),updateMask:Az(e.fieldMask)};else{if(!(e instanceof Bw))return le();n={verify:Tf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:_z(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:le()),n;var s}function Ww(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Wt.updateTime(cn(s.updateTime)):void 0!==s.exists?Wt.exists(s.exists):Wt.none():Wt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(Ie("REQUEST_TIME"===a.setToServerValue),c=new yl):"appendMissingElements"in a?c=new gu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new mu(a.removeAllFromArray.values||[]):"increment"in a?c=new vl(o,a.increment):le();const d=jt.fromServerFormat(a.fieldPath);return new yf(d,c)}(t,i)):[];var s;if(e.update){const i=fs(t,e.update.name),s=new Wn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Lr((e.updateMask.fieldPaths||[]).map(p=>jt.fromServerFormat(p)));return new Qs(i,s,o,n,r)}return new Il(i,s,n,r)}if(e.delete){const i=fs(t,e.delete);return new El(i,n)}if(e.verify){const i=fs(t,e.verify);return new Bw(i,n)}return le()}function NM(t,e){return{documents:[Gw(t,e.path)]}}function Zw(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Gw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Gw(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(0!==c.length)return OM(_t.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(0!==c.length)return c.map(d=>{return{field:ea((g=d).field),direction:wz(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=qw(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n;var c}function xM(t){let e=SM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ie(1===r);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const _=MM(g);return _ instanceof _t&&Mw(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new hf(Tl((E=_).field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,of(_)?null:_}(n.limit));let c=null;var g;n.startAt&&(c=new Xo((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Xo(g.values||[],!g.before)}(n.endAt)),Wx(e,i,o,s,a,"F",c,d)}function MM(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Tl(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Tl(n.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Tl(n.unaryFilter.field);return Je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Tl(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):void 0!==t.fieldFilter?Je.create(Tl((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return _t.create(n.compositeFilter.filters.map(r=>MM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le();var n}function wz(t){return fz[t]}function Tz(t){return pz[t]}function Dz(t){return gz[t]}function ea(t){return{fieldPath:t.canonicalString()}}function Tl(t){return jt.fromServerFormat(t.fieldPath)}function OM(t){return t instanceof Je?function(n){if("=="===n.op){if(Nx(n.value))return{unaryFilter:{field:ea(n.field),op:"IS_NAN"}};if(Px(n.value))return{unaryFilter:{field:ea(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Nx(n.value))return{unaryFilter:{field:ea(n.field),op:"IS_NOT_NAN"}};if(Px(n.value))return{unaryFilter:{field:ea(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(n.field),op:Tz(n.op),value:n.value}}}(t):t instanceof _t?function(n){const r=n.getFilters().map(i=>OM(i));return 1===r.length?r[0]:{compositeFilter:{op:Dz(n.op),filters:r}}}(t):le()}function Az(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kM(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ys{constructor(e,n,r,i,s=Ee.min(),o=Ee.min(),a=Tn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FM{constructor(e){this.ut=e}}function LM(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:I_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Tf(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:wl(s,o.version.toTimestamp()),createTime:wl(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:_u(e.version)};else{if(!e.isUnknownDocument())return le();r.unknownDocument={path:n.path.toArray(),version:_u(e.version)}}var s,o;return r}function I_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function _u(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yu(t){const e=new Gt(t.seconds,t.nanoseconds);return Ee.fromTimestamp(e)}function vu(t,e){const n=(e.baseMutations||[]).map(s=>Ww(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>Ww(t.ut,s)),i=Gt.fromMillis(e.localWriteTimeMs);return new Uw(e.batchId,i,n,r)}function Cf(t){const e=yu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?yu(t.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=void 0!==t.query.documents?(Ie(1===(s=t.query).documents.length),Ar(gl(SM(s.documents[0])))):function(s){return Ar(xM(s))}(t.query),new Ys(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Tn.fromBase64String(t.resumeToken));var s}function VM(t,e){const n=_u(e.snapshotVersion),r=_u(e.lastLimboFreeSnapshotVersion);let i;i=h_(e.target)?NM(t.ut,e.target):Zw(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Kw(t){const e=xM({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?p_(e,e.limit,"L"):e}function Qw(t,e){return new $w(e.largestBatchId,Ww(t.ut,e.overlayMutation))}function BM(t,e){const n=e.path.lastSegment();return[t,dr(e.path.popLast()),n]}function UM(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:_u(r.readTime),documentKey:dr(r.documentKey.path),largestBatchId:r.largestBatchId}}class Sz{getBundleMetadata(e,n){return jM(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:yu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return jM(e).put({bundleId:(i=n).id,createTime:_u(cn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return $M(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:Kw(s.bundledQuery),readTime:yu(s.readTime)};var s})}saveNamedQuery(e,n){return $M(e).put({name:(i=n).name,readTime:_u(cn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function jM(t){return Mn(t,"bundles")}function $M(t){return Mn(t,"namedQueries")}class E_{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new E_(e,n.uid||"")}getOverlay(e,n){return Sf(e).get(BM(this.userId,n)).next(r=>r?Qw(this.serializer,r):null)}getOverlays(e,n){const r=hs();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new $w(n,o);i.push(this.lt(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(dr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Sf(e).H("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=hs(),s=dr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Sf(e).W("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const d=Qw(this.serializer,c);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=hs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Sf(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,d,p)=>{const g=Qw(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):p.done()}).next(()=>s)}lt(e,n){return Sf(e).put(function(i,s,o){const[a,c,d]=BM(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Af(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function Sf(t){return Mn(t,"documentOverlays")}class Iu{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Yt(e.integerValue));else if("doubleValue"in e){const r=Yt(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),af(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Ws(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?xx(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):le()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),se.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function bz(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function HM(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=bz(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Iu.St=new Iu;class Rz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=HM(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=HM(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Pz{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Nz{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class bf{constructor(){this.Wt=new Rz,this.Gt=new Pz(this.Wt),this.zt=new Nz(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Eu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Eu(this.indexId,this.documentKey,this.arrayValue,r)}}function ta(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=qM(t.arrayValue,e.arrayValue),0!==n?n:(n=qM(t.directionalValue,e.directionalValue),0!==n?n:se.comparator(t.documentKey,e.documentKey)))}function qM(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class zM{constructor(e){this.Jt=new It((n,r)=>jt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ie(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=Aw(e);if(void 0!==n&&!this.tn(n))return!1;const r=lu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.nn(a,c)||!this.rn(this.Yt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new It(jt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new du(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new du(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new du(r.field,"asc"===r.dir?0:1)));return new ll(ll.UNKNOWN_ID,this.collectionId,n,dl.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function GM(t){var e,n;if(Ie(t instanceof Je||t instanceof _t),t instanceof Je){if(t instanceof qx){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>Je.create(t.field,"==",s)))||[];return _t.create(i,"or")}return t}const r=t.filters.map(i=>GM(i));return _t.create(r,t.op)}function xz(t){if(0===t.getFilters().length)return[];const e=Xw(GM(t));return Ie(WM(e)),Yw(e)||Jw(e)?[e]:e.getFilters()}function Yw(t){return t instanceof Je}function Jw(t){return t instanceof _t&&Mw(t)}function WM(t){return Yw(t)||Jw(t)||function(n){if(n instanceof _t&&xw(n)){for(const r of n.getFilters())if(!Yw(r)&&!Jw(r))return!1;return!0}return!1}(t)}function Xw(t){if(Ie(t instanceof Je||t instanceof _t),t instanceof Je)return t;if(1===t.filters.length)return Xw(t.filters[0]);const e=t.filters.map(r=>Xw(r));let n=_t.create(e,t.op);return n=w_(n),WM(n)?n:(Ie(n instanceof _t),Ie(pl(n)),Ie(n.filters.length>1),n.filters.reduce((r,i)=>eT(r,i)))}function eT(t,e){let n;return Ie(t instanceof Je||t instanceof _t),Ie(e instanceof Je||e instanceof _t),n=t instanceof Je?e instanceof Je?_t.create([t,e],"and"):ZM(t,e):e instanceof Je?ZM(e,t):function(i,s){if(Ie(i.filters.length>0&&s.filters.length>0),pl(i)&&pl(s))return jx(i,s.getFilters());const o=xw(i)?i:s,a=xw(i)?s:i,c=o.filters.map(d=>eT(d,a));return _t.create(c,"or")}(t,e),w_(n)}function ZM(t,e){if(pl(e))return jx(e,t.getFilters());{const n=e.filters.map(r=>eT(t,r));return _t.create(n,"or")}}function w_(t){if(Ie(t instanceof Je||t instanceof _t),t instanceof Je)return t;const e=t.getFilters();if(1===e.length)return w_(e[0]);if(Bx(t))return t;const n=e.map(i=>w_(i)),r=[];return n.forEach(i=>{i instanceof Je?r.push(i):i instanceof _t&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:_t.create(r,t.op)}class Mz{constructor(){this.on=new tT}addToCollectionParentIndex(e,n){return this.on.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Yr.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class tT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new It(rt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(rt.comparator)).toArray()}}const T_=new Uint8Array(0);class Oz{constructor(e,n){this.user=e,this.databaseId=n,this._n=new tT,this.an=new Ks(r=>pu(r),(r,i)=>ff(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:dr(i)};return KM(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[hx(n),""],!1,!0);return KM(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ls(o.parent))}return r})}addFieldIndex(e,n){const r=Rf(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=Al(e);return s.next(a=>{o.put(UM(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Rf(e),i=Al(e),s=Dl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Rf(e),r=Dl(e),i=Al(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return N.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new zM(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Dl(e);let i=!0;const s=new Map;return N.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ve();const a=[];return N.forEach(s,(c,d)=>{var B;J("IndexedDbIndexManager",`Using index ${B=c,`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`} to execute ${pu(n)}`);const p=function(B,X){const oe=Aw(X);if(void 0===oe)return null;for(const Pe of f_(B,oe.fieldPath))switch(Pe.op){case"array-contains-any":return Pe.value.arrayValue.values||[];case"array-contains":return[Pe.value]}return null}(d,c),g=function(B,X){const oe=new Map;for(const Pe of lu(X))for(const ft of f_(B,Pe.fieldPath))switch(ft.op){case"==":case"in":oe.set(Pe.fieldPath.canonicalString(),ft.value);break;case"not-in":case"!=":return oe.set(Pe.fieldPath.canonicalString(),ft.value),Array.from(oe.values())}return null}(d,c),_=function(B,X){const oe=[];let Pe=!0;for(const ft of lu(X)){const Kn=0===ft.kind?zx(B,ft.fieldPath,B.startAt):Gx(B,ft.fieldPath,B.startAt);oe.push(Kn.value),Pe&&(Pe=Kn.inclusive)}return new Xo(oe,Pe)}(d,c),v=function(B,X){const oe=[];let Pe=!0;for(const ft of lu(X)){const Kn=0===ft.kind?Gx(B,ft.fieldPath,B.endAt):zx(B,ft.fieldPath,B.endAt);oe.push(Kn.value),Pe&&(Pe=Kn.inclusive)}return new Xo(oe,Pe)}(d,c),E=this.ln(c,d,_),A=this.ln(c,d,v),b=this.hn(c,d,g),k=this.Pn(c.indexId,p,E,_.inclusive,A,v.inclusive,b);return N.forEach(k,R=>r.j(R,n.limit).next(B=>{B.forEach(X=>{const oe=se.fromSegments(X.documentKey);o.has(oe)||(o=o.add(oe),a.push(oe))})}))}).next(()=>a)}return N.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:xz(_t.create(e.filters,"and")).map(r=>kw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const c=(null!=n?n.length:1)*Math.max(r.length,s.length),d=c/(null!=n?n.length:1),p=[];for(let g=0;g<c;++g){const _=n?this.In(n[g/d]):T_,v=this.Tn(e,_,r[g%d],i),E=this.En(e,_,s[g%d],o),A=a.map(b=>this.Tn(e,_,b,!0));p.push(...this.createRange(v,E,A))}return p}Tn(e,n,r,i){const s=new Eu(e,se.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new Eu(e,se.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new zM(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return N.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let d=new It(jt.comparator),p=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?p=!0:d=d.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new bf;for(const i of lu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);Iu.St.ht(s,o)}return r.Ut()}In(e){const n=new bf;return Iu.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new bf;return Iu.St.ht(fu(this.databaseId,n),r.jt(function(s){const o=lu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new bf);let s=0;for(const o of lu(e)){const a=r[s++];for(const c of i)if(this.Rn(n,o.fieldPath)&&lf(a))i=this.Vn(i,o,a);else{const d=c.jt(o.kind);Iu.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new bf;c.seed(a.Ut()),Iu.St.ht(o,c.jt(n.kind)),s.push(c)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof Je&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Rf(e),i=Al(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(p,g){const _=g?new dl(g.sequenceNumber,new Yr(yu(g.readTime),new se(ls(g.documentKey)),g.largestBatchId)):dl.empty(),v=p.fields.map(([E,A])=>new du(jt.fromServerFormat(E),A));return new ll(p.indexId,p.collectionGroup,v,_)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ne(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Rf(e),s=Al(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,c=>s.put(UM(c.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,c=>this.gn(e,i,c).next(d=>{const p=this.pn(s,c);return d.isEqual(p)?N.resolve():this.yn(e,s,c,d,p)}))))})}wn(e,n,r,i){return Dl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Dl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Dl(e);let s=new It(ta);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Eu(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new It(ta);const i=this.dn(n,e);if(null==i)return r;const s=Aw(n);if(null!=s){const o=e.data.field(s.fieldPath);if(lf(o))for(const a of o.arrayValue.values||[])r=r.add(new Eu(n.indexId,e.key,this.In(a),i))}else r=r.add(new Eu(n.indexId,e.key,T_,i));return r}yn(e,n,r,i,s){J("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,d,p,g,_){const v=c.getIterator(),E=d.getIterator();let A=hl(v),b=hl(E);for(;A||b;){let k=!1,R=!1;if(A&&b){const B=p(A,b);B<0?R=!0:B>0&&(k=!0)}else null!=A?R=!0:k=!0;k?(g(b),b=hl(E)):R?(_(A),A=hl(v)):(A=hl(v),b=hl(E))}}(i,s,ta,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),N.waitFor(o)}fn(e){let n=1;return Al(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ta(o,a)).filter((o,a,c)=>!a||0!==ta(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=ta(o,e),c=ta(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&c<0)i.push(o),i.push(o.Ht());else if(c>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,T_,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,T_,[]]))}return s}bn(e,n){return ta(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(QM)}getMinOffset(e,n){return N.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||le())).next(QM)}}function KM(t){return Mn(t,"collectionParents")}function Dl(t){return Mn(t,"indexEntries")}function Rf(t){return Mn(t,"indexConfiguration")}function Al(t){return Mn(t,"indexState")}function QM(t){Ie(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Cw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Yr(e.readTime,e.documentKey,n)}const YM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hr(e,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function JM(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},(p,g,_)=>(a++,_.delete()));s.push(c.next(()=>{Ie(1===a)}));const d=[];for(const p of n.mutations){const g=Ex(e,p.key.path,n.batchId);s.push(i.delete(g)),d.push(p.key)}return N.waitFor(s).next(()=>d)}function D_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw le();e=t.noDocument}return JSON.stringify(e).length}hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(41943040,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);class A_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ie(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new A_(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return na(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Cl(e),o=na(e);return o.add({}).next(a=>{Ie("number"==typeof a);const c=new Uw(a,n,r,i),d=function(v,E,A){const b=A.baseMutations.map(R=>Af(v.ut,R)),k=A.mutations.map(R=>Af(v.ut,R));return{userId:E,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:b,mutations:k}}(this.serializer,this.userId,c),p=[];let g=new It((_,v)=>Ne(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=Ex(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),p.push(o.put(d)),p.push(s.put(v,wq))}return g.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),N.waitFor(p).next(()=>c)})}lookupMutationBatch(e,n){return na(e).get(n).next(r=>r?(Ie(r.userId===this.userId),vu(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?N.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return na(e).Y({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(Ie(a.batchId>=r),s=vu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return na(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return na(e).W("userMutationsIndex",n).next(r=>r.map(i=>vu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=s_(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Cl(e).Y({range:i},(o,a,c)=>{const[d,p,g]=o,_=ls(p);if(d===this.userId&&n.path.isEqual(_))return na(e).get(g).next(v=>{if(!v)throw le();Ie(v.userId===this.userId),s.push(vu(this.serializer,v))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ne);const i=[];return n.forEach(s=>{const o=s_(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Cl(e).Y({range:a},(d,p,g)=>{const[_,v,E]=d,A=ls(v);_===this.userId&&s.path.isEqual(A)?r=r.add(E):g.done()});i.push(c)}),N.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=s_(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new It(Ne);return Cl(e).Y({range:o},(c,d,p)=>{const[g,_,v]=c,E=ls(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(v)):p.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(na(e).get(s).next(o=>{if(null===o)throw le();Ie(o.userId===this.userId),r.push(vu(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return JM(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Cl(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=ls(s[1]);i.push(c)}else a.done()}).next(()=>{Ie(0===i.length)})})}containsKey(e,n){return XM(e,this.userId,n)}Mn(e){return e1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XM(t,e,n){const r=s_(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Cl(t).Y({range:s,J:!0},(a,c,d)=>{const[p,g,_]=a;p===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function na(t){return Mn(t,"mutations")}function Cl(t){return Mn(t,"documentMutations")}function e1(t){return Mn(t,"mutationQueues")}class wu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new wu(0)}static Nn(){return new wu(-1)}}class kz{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new wu(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ee.fromTimestamp(new Gt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Sl(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ie(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Sl(e).Y((o,a)=>{const c=Cf(a);c.sequenceNumber<=n&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Sl(e).Y((r,i)=>{const s=Cf(i);n(s)})}Bn(e){return t1(e).get("targetGlobalKey").next(n=>(Ie(null!==n),n))}Ln(e,n){return t1(e).put("targetGlobalKey",n)}kn(e,n){return Sl(e).put(VM(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=pu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Sl(e).Y({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const d=Cf(a);ff(n,d.target)&&(s=d,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ra(e);return n.forEach(o=>{const a=dr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=ra(e);return N.forEach(n,s=>{const o=dr(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ra(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ra(e);let s=Ve();return i.Y({range:r,J:!0},(o,a,c)=>{const d=ls(o[1]),p=new se(d);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=dr(n.path),i=IDBKeyRange.bound([r],[hx(r)],!1,!0);let s=0;return ra(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],c,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return Sl(e).get(n).next(r=>r?Cf(r):null)}}function Sl(t){return Mn(t,"targets")}function t1(t){return Mn(t,"targetGlobal")}function ra(t){return Mn(t,"targetDocuments")}function n1([t,e],[n,r]){const i=Ne(t,n);return 0===i?Ne(e,r):i}class Fz{constructor(e){this.Qn=e,this.buffer=new It(n1),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();n1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class r1{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;J("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,z.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Go(r)?J("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield zo(r)}yield n.Gn(3e5)}))}}class Lz{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return N.resolve(Jr._e);const r=new Fz(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(YM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YM):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),ul()<=os.in.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-p}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${g} documents in `+(d-c)+`ms\nTotal Duration: ${d-p}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class Vz{constructor(e,n){this.db=e,this.garbageCollector=function i1(t,e){return new Lz(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return C_(e,r)}removeReference(e,n,r){return C_(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return C_(e,n)}Xn(e,n){return function(i,s){let o=!1;return e1(i).Z(a=>XM(i,a,s).next(c=>(c&&(o=!0),N.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const c=this.Xn(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ee.min()),ra(e).delete([0,dr(o.path)])))});i.push(c)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return C_(e,n)}Zn(e,n){const r=ra(e);let i,s=Jr._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:d})=>{0===o?(s!==Jr._e&&n(new se(ls(i)),s),s=d,i=c):s=Jr._e}).next(()=>{s!==Jr._e&&n(new se(ls(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function C_(t,e){return ra(t).put((i=t.currentSequenceNumber,{targetId:0,path:dr(e.path),sequenceNumber:i}));var i}class s1{constructor(){this.changes=new Ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Tu(e).put(r)}removeEntry(e,n,r){return Tu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],I_(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=$t.newInvalidDocument(n);return Tu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pf(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:$t.newInvalidDocument(n)};return Tu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pf(n))},(i,s)=>{r={document:this.tr(n,s),size:D_(s)}}).next(()=>r)}getEntries(e,n){let r=Vr();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=Vr(),i=new Nt(se.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,D_(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return N.resolve();let i=new It(c1);n.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Pf(i.first()),Pf(i.last())),o=i.getIterator();let a=o.getNext();return Tu(e).Y({index:"documentKeyIndex",range:s},(c,d,p)=>{const g=se.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&c1(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?p.U(Pf(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),I_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tu(e).W(IDBKeyRange.bound(a,c,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let p=Vr();for(const g of d){const _=this.tr(se.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(gf(n,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,r,i){let s=Vr();const o=u1(n,r),a=u1(n,Yr.max());return Tu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,d,p)=>{const g=this.tr(se.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new Uz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return a1(e).get("remoteDocumentGlobalKey").next(n=>(Ie(!!n),n))}er(e,n){return a1(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function Cz(t,e){let n;if(e.document)n=PM(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=se.fromSegments(e.noDocument.path),i=yu(e.noDocument.readTime);n=$t.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return le();{const r=se.fromSegments(e.unknownDocument.path),i=yu(e.unknownDocument.version);n=$t.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Gt(i[0],i[1]);return Ee.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Ee.min()))return r}return $t.newInvalidDocument(e)}}function o1(t){return new Bz(t)}class Uz extends s1{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ks(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new It((s,o)=>Ne(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=LM(this._r.serializer,o);i=i.add(s.path.popLast());const d=D_(c);r+=d-a.size,n.push(this._r.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=LM(this._r.serializer,o.convertToNoDocument(Ee.min()));n.push(this._r.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function a1(t){return Mn(t,"remoteDocumentGlobal")}function Tu(t){return Mn(t,"remoteDocumentsV14")}function Pf(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function u1(t,e){const n=e.documentKey.path.toArray();return[t,I_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function c1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ne(n[s],r[s]),i)return i;return i=Ne(n.length,r.length),i||(i=Ne(n[n.length-2],r[r.length-2]),i||Ne(n[n.length-1],r[r.length-1]))}class jz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class l1{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&vf(r.mutation,i,Lr.empty(),Gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ve()){const i=hs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=mf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Vr();const o=_f(),a=_f();return n.forEach((c,d)=>{const p=r.get(d.key);i.has(d.key)&&(void 0===p||p.mutation instanceof Qs)?s=s.insert(d.key,d):void 0!==p?(o.set(d.key,p.mutation.getFieldMask()),vf(p.mutation,d,p.mutation.getFieldMask(),Gt.now())):o.set(d.key,Lr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var g;return a.set(d,new jz(p,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_f();let i=new Nt((o,a)=>o-a),s=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(null===d)return;let p=r.get(c)||Lr.empty();p=a.applyToLocalView(d,p),r.set(c,p);const g=(i.get(a.batchId)||Ve()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,p=c.value,g=tM();p.forEach(_=>{if(!s.has(_)){const v=lM(n.get(_),r.get(_));null!==v&&g.set(_,v),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return se.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Fw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(hs());let a=-1,c=s;return o.next(d=>N.forEach(d,(p,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(p)?N.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Ve())).next(p=>({batchId:a,changes:eM(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=mf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=mf();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,c=>{const d=(g=n,_=c.child(s),new Zs(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,d)=>{const p=d.getKey();null===o.get(p)&&(o=o.insert(p,$t.newInvalidDocument(p)))});let a=mf();return o.forEach((c,d)=>{const p=s.get(c);void 0!==p&&vf(p.mutation,d,Lr.empty(),Gt.now()),gf(n,d)&&(a=a.insert(c,d))}),a})}}class $z{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return N.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:cn(i.createTime)}),N.resolve();var i}getNamedQuery(e,n){return N.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:Kw(i.bundledQuery),readTime:cn(i.readTime)}),N.resolve();var i}}class Hz{constructor(){this.overlays=new Nt(se.comparator),this.lr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hs();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=hs(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Nt((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);null===p&&(p=hs(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const a=hs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return N.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $w(n,r));let s=this.lr.get(n);void 0===s&&(s=Ve(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class nT{constructor(){this.hr=new It(On.Pr),this.Ir=new It(On.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new On(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new On(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new se(new rt([])),r=new On(n,e),i=new On(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new se(new rt([])),r=new On(n,e),i=new On(n,e+1);let s=Ve();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new On(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class On{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return se.comparator(e.key,n.key)||Ne(e.gr,n.gr)}static Tr(e,n){return Ne(e.gr,n.gr)||se.comparator(e.key,n.key)}}class qz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new It(On.Pr)}checkEmpty(e){return N.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new Uw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new On(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new On(n,0),i=new On(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ne);return n.forEach(i=>{const s=new On(i,0),o=new On(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),N.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new On(new se(s),0);let a=new It(Ne);return this.yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.gr)),!0)},o),N.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ie(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return N.forEach(n.mutations,i=>{const s=new On(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new On(n,0),i=this.yr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return N.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class zz{constructor(e){this.Cr=e,this.docs=new Nt(se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Vr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$t.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vr();const o=n.path,a=new se(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Cw(px(p),r)<=0||(i.has(p.key)||gf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}vr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Gz(this)}getSize(e){return N.resolve(this.size)}}class Gz extends s1{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class Wz{constructor(e){this.persistence=e,this.Fr=new Ks(n=>pu(n),ff),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Mr=0,this.Or=new nT,this.targetCount=0,this.Nr=wu.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),N.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new wu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.kn(n),N.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Or.containsKey(n))}}class rT{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Jr(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Wz(this),this.indexManager=new Mz,this.remoteDocumentCache=new zz(r=>this.referenceDelegate.Qr(r)),this.serializer=new FM(n),this.Kr=new $z(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Hz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new qz(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new Zz(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return N.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Zz extends mx{constructor(e){super(),this.currentSequenceNumber=e}}class S_{constructor(e){this.persistence=e,this.Gr=new nT,this.zr=null}static jr(e){return new S_(e)}get Hr(){if(this.zr)return this.zr;throw le()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),N.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Hr,r=>{const i=se.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,Ee.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return N.or([()=>N.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class Kz{constructor(e){this.serializer=e}N(e,n,r,i){const s=new i_("createOrUpgrade",n);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ix,{unique:!0}),c.createObjectStore("documentMutations"),d1(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),d1(e)),o=o.next(()=>function(c){const d=c.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,d){return d.store("mutations").W().next(p=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ix,{unique:!0});const g=d.store("mutations"),_=p.map(v=>g.put(v));return N.waitFor(_)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const d=c.createObjectStore("documentOverlays",{keyPath:Oq});d.createIndex("collectionPathOverlayIndex",kq,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",Fq,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore("remoteDocumentsV14",{keyPath:Tq});d.createIndex("documentKeyIndex",Dq),d.createIndex("collectionGroupIndex",Aq)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Pq}).createIndex("sequenceNumberIndex",Nq,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:xq}).createIndex("documentKeyIndex",Mq,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=D_(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,c=>{Ie(c.userId===s.userId);const d=vu(this.serializer,c);return JM(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const c=new rt(o),d=[0,dr(c)];s.push(n.get(d).next(p=>p?N.resolve():n.put({targetId:0,path:dr(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>N.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Rq});const r=n.store("collectionParents"),i=new tT,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:dr(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const c=new rt(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],d)=>{const p=ls(a);return s(p.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Cf(i),o=VM(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),c=(g=o,g.document?new se(rt.fromString(g.document.name).popFirst(5)):g.noDocument?se.fromSegments(g.noDocument.path):g.unknownDocument?se.fromSegments(g.unknownDocument.path):le()).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>N.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=o1(this.serializer),s=new rT(S_.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(c=>{var d;let p=null!==(d=a.get(c.userId))&&void 0!==d?d:Ve();vu(this.serializer,c).keys().forEach(g=>p=p.add(g)),a.set(c.userId,p)}),N.forEach(a,(c,d)=>{const p=new xn(d),g=E_.ct(this.serializer,p),_=s.getIndexManager(p),v=A_.ct(p,this.serializer,_,s.referenceDelegate);return new l1(i,v,g,_).recalculateAndSaveOverlaysForDocumentKeys(new Rw(n,Jr._e),c).next()})})}}function d1(t){t.createObjectStore("targetDocuments",{keyPath:Sq}).createIndex("documentTargetsIndex",bq,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cq,{unique:!0}),t.createObjectStore("targetGlobal")}const iT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sT{constructor(e,n,r,i,s,o,a,c,d,p,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=d,this._i=p,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!sT.D())throw new Q(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vz(this,i),this.Ii=n+"main",this.serializer=new FM(c),this.Ti=new Bi(this.Ii,this.ai,new Kz(this.serializer)),this.qr=new kz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=o1(this.serializer),this.Kr=new Sz,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===p&&un("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(O.FAILED_PRECONDITION,iT);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Jr(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,z.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,z.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>R_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Go(e))return J("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Nf(e).get("owner").next(n=>N.resolve(this.wi(n)))}Si(e){return R_(e).delete(this.clientId)}bi(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Mn(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return N.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?N.resolve(!0):Nf(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new Q(O.FAILED_PRECONDITION,iT);return!1}}return!(!this.networkEnabled||!this.inForeground)||R_(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&J("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,z.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new Rw(n,Jr._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>R_(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return A_.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Oz(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return E_.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){J("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(c=this.ai)?Vq:14===c?Dx:13===c?Tx:12===c?Lq:11===c?wx:void le();var c;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new Rw(a,this.Lr?this.Lr.next():Jr._e),"readwrite-primary"===n?this.fi(o).next(c=>!!c||this.gi(o)).next(c=>{if(!c)throw un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new Q(O.FAILED_PRECONDITION,gx);return r(o)}).next(c=>this.yi(o).next(()=>c)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Nf(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(O.FAILED_PRECONDITION,iT)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nf(e).put("owner",n)}static D(){return Bi.D()}pi(e){const n=Nf(e);return n.get("owner").next(r=>this.wi(r)?(J("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(un(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Dt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return J("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return un("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){un("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nf(t){return Mn(t,"owner")}function R_(t){return Mn(t,"clientMetadata")}function oT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class aT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ve(),i=Ve();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new aT(e,n.fromCache,r,i)}}class Qz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class h1{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Qz;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(ul()<=os.in.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",_l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),N.resolve()):(ul()<=os.in.DEBUG&&J("QueryEngine","Query:",_l(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(ul()<=os.in.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",_l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ar(n))):N.resolve())}zi(e,n){if(Zx(n))return N.resolve(null);let r=Ar(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=p_(n,null,"F"),r=Ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ve(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Yi(n,a);return this.Zi(n,d,o,c.readTime)?this.zi(e,p_(n,null,"F")):this.Xi(e,d,n,c)}))})))}ji(e,n,r,i){return Zx(n)||i.isEqual(Ee.min())?N.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?N.resolve(null):(ul()<=os.in.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_l(n)),this.Xi(e,o,n,fx(i,-1)).next(a=>a))})}Yi(e,n){let r=new It(Jx(e));return n.forEach((i,s)=>{gf(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return ul()<=os.in.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",_l(n)),this.Gi.getDocumentsMatchingQuery(e,n,Yr.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Yz{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Nt(Ne),this.ns=new Ks(s=>pu(s),ff),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new l1(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function f1(t,e,n,r){return new Yz(t,e,n,r)}function p1(t,e){return uT.apply(this,arguments)}function uT(){return uT=(0,z.Z)(function*(t,e){const n=ie(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Ve();for(const d of i){o.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of s){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(d=>({_s:d,removedBatchIds:o,addedBatchIds:a}))})})}),uT.apply(this,arguments)}function g1(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function m1(t,e,n){let r=Ve(),i=Ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vr();return n.forEach((a,c)=>{const d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||0===c.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{us:o,cs:i}})}function e3(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bl(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Ys(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Rl(t,e,n){return cT.apply(this,arguments)}function cT(){return cT=(0,z.Z)(function*(t,e,n){const r=ie(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Go(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),cT.apply(this,arguments)}function P_(t,e,n){const r=ie(t);let i=Ee.min(),s=Ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,p){const g=ie(c),_=g.ns.get(p);return void 0!==_?N.resolve(g.ts.get(_)):g.qr.getTargetData(d,p)}(r,o,Ar(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:Ee.min(),n?s:Ve())).next(a=>(v1(r,Yx(e),a),{documents:a,ls:s})))}function _1(t,e){const n=ie(t),r=ie(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function y1(t,e){const n=ie(t),r=n.rs.get(e)||Ee.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,fx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(v1(n,e,i),i))}function v1(t,e,n){let r=t.rs.get(e)||Ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function lT(){return lT=(0,z.Z)(function*(t,e,n,r){const i=ie(t);let s=Ve(),o=Vr();for(const d of n){const p=e.hs(d.metadata.name);d.document&&(s=s.add(p));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),o=o.insert(p,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),c=yield bl(i,(p=r,Ar(gl(rt.fromString(`__bundle__/docs/${p}`)))));var p;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>m1(d,a,o).next(p=>(a.apply(d),p)).next(p=>i.qr.removeMatchingKeysForTargetId(d,c.targetId).next(()=>i.qr.addMatchingKeys(d,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,p.us,p.cs)).next(()=>p.us)))}),lT.apply(this,arguments)}function n3(t,e){return dT.apply(this,arguments)}function dT(){return dT=(0,z.Z)(function*(t,e,n=Ve()){const r=yield bl(t,Ar(Kw(e.bundledQuery))),i=ie(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=cn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Tn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),dT.apply(this,arguments)}function I1(t,e){return`firestore_clients_${t}_${e}`}function E1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hT(t,e){return`firestore_targets_${t}_${e}`}class N_{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Q(i.error.code,i.error.message))),o?new N_(e,n,i.state,s):(un("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xf{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Q(r.error.code,r.error.message))),s?new xf(e,r.state,i):(un("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class x_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Vw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=yx(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new x_(e,s):(un("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class fT{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new fT(n.clientId,n.onlineState):(un("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pT{constructor(){this.activeTargetIds=Vw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gT{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Nt(Ne),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=I1(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new pT),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(I1(e.persistenceKey,i));if(s){const o=x_.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(hT(this.persistenceKey,e));if(r){const i=xf.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hT(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J("SharedClientState","READ",e,n),n}setItem(e,n){J("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){J("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(J("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void un("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,z.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Jr._e;if(null!=o)try{const c=JSON.parse(o);Ie("number"==typeof c),a=c}catch(c){un("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==Jr._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new N_(this.currentUser,e,n,r),s=E1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=E1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=hT(this.persistenceKey,e),s=new xf(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return x_.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return N_.Ts(new xn(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return xf.Ts(i,n)}Ms(e){return fT.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);J("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Vw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class w1{constructor(){this.eo=new pT,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new pT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class r3{ro(e){}shutdown(){}}class T1{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let M_=null;function mT(){return null===M_?M_=268435456+Math.round(2147483648*Math.random()):M_++,"0x"+M_.toString(16)}const i3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class s3{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const fr="WebChannelConnection";class o3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=mT(),c=this.So(n,r);J("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,o),this.Do(n,c,d,i).then(p=>(J("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw Fr("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",c,"request:",i),p})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+al,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${i3[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=mT();return new Promise((o,a)=>{const c=new rq;c.setWithCredentials(!0),c.listenOnce(eq.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Tw.NO_ERROR:const p=c.getResponseJson();J(fr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Tw.TIMEOUT:J(fr,`RPC '${e}' ${s} timed out`),a(new Q(O.DEADLINE_EXCEEDED,"Request time out"));break;case Tw.HTTP_ERROR:const g=c.getStatus();if(J(fr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const E=function(b){const k=b.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(k)>=0?k:O.UNKNOWN}(v.status);a(new Q(E,v.message))}else a(new Q(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Q(O.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{J(fr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);J(fr,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",d,r,15)})}vo(e,n,r){const i=mT(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=J9(),a=X9(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.xmlHttpFactory=new nq({})),this.bo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");J(fr,`Creating RPC '${e}' stream ${i}: ${p}`,c);const g=o.createWebChannel(p,c);let _=!1,v=!1;const E=new s3({co:b=>{v?J(fr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(_||(J(fr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),J(fr,`RPC '${e}' stream ${i} sending:`,b),g.send(b))},lo:()=>g.close()}),A=(b,k,R)=>{b.listen(k,B=>{try{R(B)}catch(X){setTimeout(()=>{throw X},0)}})};return A(g,r_.EventType.OPEN,()=>{v||J(fr,`RPC '${e}' stream ${i} transport opened.`)}),A(g,r_.EventType.CLOSE,()=>{v||(v=!0,J(fr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),A(g,r_.EventType.ERROR,b=>{v||(v=!0,Fr(fr,`RPC '${e}' stream ${i} transport errored:`,b),E.Ro(new Q(O.UNAVAILABLE,"The operation could not be completed")))}),A(g,r_.EventType.MESSAGE,b=>{var k;if(!v){const R=b.data[0];Ie(!!R);const X=R.error||(null===(k=R[0])||void 0===k?void 0:k.error);if(X){J(fr,`RPC '${e}' stream ${i} received error:`,X);const oe=X.status;let Pe=function(Zf){const ty=gn[Zf];if(void 0!==ty)return mM(ty)}(oe),ft=X.message;void 0===Pe&&(Pe=O.INTERNAL,ft="Unknown error status: "+oe+" with message "+X.message),v=!0,E.Ro(new Q(Pe,ft)),g.close()}else J(fr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),A(a,tq.STAT_EVENT,b=>{b.stat===ax.PROXY?J(fr,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===ax.NOPROXY&&J(fr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function D1(){return typeof window<"u"?window:null}function O_(){return typeof document<"u"?document:null}function Mf(t){return new mz(t,!0)}class _T{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class A1{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new _T(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,z.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,z.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,z.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(un(n.toString()),un("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===O.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new Q(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,z.Z)(function*(){e.state=0,e.start()}))}o_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a3 extends A1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function vz(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:le(),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(Ie(void 0===p||"string"==typeof p),Tn.fromBase64String(p||"")):(Ie(void 0===p||p instanceof Uint8Array),Tn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const p=void 0===d.code?O.UNKNOWN:mM(d.code);return new Q(p,d.message||"")}(o);n=new EM(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=fs(t,r.document.name),s=cn(r.document.updateTime),o=r.document.createTime?cn(r.document.createTime):Ee.min(),a=new Wn({mapValue:{fields:r.document.fields}}),c=$t.newFoundDocument(i,s,o,a);n=new v_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=fs(t,r.document),s=r.readTime?cn(r.readTime):Ee.min(),o=$t.newNoDocument(i,s);n=new v_([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=fs(t,r.document);n=new v_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return le();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new lz(i,s);n=new IM(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?cn(o.readTime):Ee.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Df(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=h_(c)?{documents:NM(s,c)}:{query:Zw(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AM(s,o.resumeToken);const d=qw(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=wl(s,o.snapshotVersion.toTimestamp());const d=qw(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function Ez(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Df(this.serializer),n.removeTarget=e,this.e_(n)}}class u3 extends A1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function Iz(t,e){return t&&t.length>0?(Ie(void 0!==e),t.map(n=>function(i,s){let o=cn(i.updateTime?i.updateTime:s);return o.isEqual(Ee.min())&&(o=cn(s)),new oz(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.I_(r,n)}return Ie(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Df(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Af(this.serializer,r))};this.e_(n)}}class c3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new Q(O.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(O.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(O.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class d3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(un(n),this.f_=!1):J("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class h3{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,z.Z)(function*(){var c;ia(o)&&(J("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,z.Z)(function*(p){const g=ie(p);g.C_.add(4),yield Pl(g),g.M_.set("Unknown"),g.C_.delete(4),yield Of(g)}),function d(p){return c.apply(this,arguments)})(o))}))}),this.M_=new d3(r,i)}}function Of(t){return vT.apply(this,arguments)}function vT(){return vT=(0,z.Z)(function*(t){if(ia(t))for(const e of t.v_)yield e(!0)}),vT.apply(this,arguments)}function Pl(t){return IT.apply(this,arguments)}function IT(){return IT=(0,z.Z)(function*(t){for(const e of t.v_)yield e(!1)}),IT.apply(this,arguments)}function k_(t,e){const n=ie(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),TT(n)?wT(n):xl(n).Ho()&&ET(n,e))}function kf(t,e){const n=ie(t),r=xl(n);n.D_.delete(e),r.Ho()&&C1(n,e),0===n.D_.size&&(r.Ho()?r.Zo():ia(n)&&n.M_.set("Unknown"))}function ET(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xl(t).u_(e)}function C1(t,e){t.x_.Oe(e),xl(t).c_(e)}function wT(t){t.x_=new hz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),xl(t).start(),t.M_.g_()}function TT(t){return ia(t)&&!xl(t).jo()&&t.D_.size>0}function ia(t){return 0===ie(t).C_.size}function S1(t){t.x_=void 0}function f3(t){return DT.apply(this,arguments)}function DT(){return DT=(0,z.Z)(function*(t){t.D_.forEach((e,n)=>{ET(t,e)})}),DT.apply(this,arguments)}function p3(t,e){return AT.apply(this,arguments)}function AT(){return AT=(0,z.Z)(function*(t,e){S1(t),TT(t)?(t.M_.w_(e),wT(t)):t.M_.set("Unknown")}),AT.apply(this,arguments)}function g3(t,e,n){return CT.apply(this,arguments)}function CT(){return CT=(0,z.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof EM&&2===e.state&&e.cause)try{yield(r=(0,z.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.D_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.D_.delete(c),s.x_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield F_(t,r)}else if(e instanceof v_?t.x_.$e(e):e instanceof IM?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Ee.min()))try{const r=yield g1(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.D_.get(d);p&&s.D_.set(d,p.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const p=s.D_.get(c);if(!p)return;s.D_.set(c,p.withResumeToken(Tn.EMPTY_BYTE_STRING,p.snapshotVersion)),C1(s,c);const g=new Ys(p.target,c,d,p.sequenceNumber);ET(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){J("RemoteStore","Failed to raise snapshot:",r),yield F_(t,r)}var r}),CT.apply(this,arguments)}function F_(t,e,n){return ST.apply(this,arguments)}function ST(){return ST=(0,z.Z)(function*(t,e,n){if(!Go(e))throw e;t.C_.add(1),yield Pl(t),t.M_.set("Offline"),n||(n=()=>g1(t.localStore)),t.asyncQueue.enqueueRetryable((0,z.Z)(function*(){J("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Of(t)}))}),ST.apply(this,arguments)}function b1(t,e){return e().catch(n=>F_(t,n,e))}function Nl(t){return bT.apply(this,arguments)}function bT(){return bT=(0,z.Z)(function*(t){const e=ie(t),n=sa(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;m3(e);)try{const i=yield e3(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,_3(e,i)}catch(i){yield F_(e,i)}R1(e)&&P1(e)}),bT.apply(this,arguments)}function m3(t){return ia(t)&&t.b_.length<10}function _3(t,e){t.b_.push(e);const n=sa(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function R1(t){return ia(t)&&!sa(t).jo()&&t.b_.length>0}function P1(t){sa(t).start()}function y3(t){return RT.apply(this,arguments)}function RT(){return RT=(0,z.Z)(function*(t){sa(t).E_()}),RT.apply(this,arguments)}function v3(t){return PT.apply(this,arguments)}function PT(){return PT=(0,z.Z)(function*(t){const e=sa(t);for(const n of t.b_)e.P_(n.mutations)}),PT.apply(this,arguments)}function I3(t,e,n){return NT.apply(this,arguments)}function NT(){return NT=(0,z.Z)(function*(t,e,n){const r=t.b_.shift(),i=jw.from(r,e,n);yield b1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Nl(t)}),NT.apply(this,arguments)}function E3(t,e){return xT.apply(this,arguments)}function xT(){return xT=(0,z.Z)(function*(t,e){var n;e&&sa(t).h_&&(yield(n=(0,z.Z)(function*(i,s){if(gM(a=s.code)&&a!==O.ABORTED){const o=i.b_.shift();sa(i).Yo(),yield b1(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Nl(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),R1(t)&&P1(t)}),xT.apply(this,arguments)}function N1(t,e){return MT.apply(this,arguments)}function MT(){return MT=(0,z.Z)(function*(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=ia(n);n.C_.add(3),yield Pl(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Of(n)}),MT.apply(this,arguments)}function OT(t,e){return kT.apply(this,arguments)}function kT(){return kT=(0,z.Z)(function*(t,e){const n=ie(t);e?(n.C_.delete(2),yield Of(n)):e||(n.C_.add(2),yield Pl(n),n.M_.set("Unknown"))}),kT.apply(this,arguments)}function xl(t){return t.O_||(t.O_=function(n,r,i){const s=ie(n);return s.A_(),new a3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:f3.bind(null,t),Io:p3.bind(null,t),a_:g3.bind(null,t)}),t.v_.push(function(){var e=(0,z.Z)(function*(n){n?(t.O_.Yo(),TT(t)?wT(t):t.M_.set("Unknown")):(yield t.O_.stop(),S1(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function sa(t){return t.N_||(t.N_=function(n,r,i){const s=ie(n);return s.A_(),new u3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:y3.bind(null,t),Io:E3.bind(null,t),T_:v3.bind(null,t),I_:I3.bind(null,t)}),t.v_.push(function(){var e=(0,z.Z)(function*(n){n?(t.N_.Yo(),yield Nl(t)):(yield t.N_.stop(),t.b_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class FT{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new FT(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Q(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ml(t,e){if(un("AsyncQueue",`${e}: ${t}`),Go(t))return new Q(O.UNAVAILABLE,`${e}: ${t}`);throw t}class Ol{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=mf(),this.sortedSet=new Nt(this.comparator)}static emptySet(e){return new Ol(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class x1{constructor(){this.B_=new Nt(se.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):le():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class kl{constructor(e,n,r,i,s,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new kl(e,n,Ol.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class w3{constructor(){this.k_=void 0,this.listeners=[]}}class T3{constructor(){this.queries=new Ks(e=>Qx(e),pf),this.onlineState="Unknown",this.q_=new Set}}function LT(t,e){return VT.apply(this,arguments)}function VT(){return VT=(0,z.Z)(function*(t,e){const n=ie(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new w3),i)try{s.k_=yield n.onListen(r)}catch(o){const a=Ml(o,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&jT(n)}),VT.apply(this,arguments)}function BT(t,e){return UT.apply(this,arguments)}function UT(){return UT=(0,z.Z)(function*(t,e){const n=ie(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),UT.apply(this,arguments)}function D3(t,e){const n=ie(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&jT(n)}function A3(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function jT(t){t.q_.forEach(e=>{e.next()})}class $T{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class C3{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class M1{constructor(e){this.serializer=e}hs(e){return fs(this.serializer,e)}Ps(e){return e.metadata.exists?PM(this.serializer,e.document,!1):$t.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return cn(e)}}class S3{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=O1(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=rt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new M1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ve()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,z.Z)(function*(){const n=yield function t3(t,e,n,r){return lT.apply(this,arguments)}(e.localStore,new M1(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield n3(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function O1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class k1{constructor(e){this.key=e}}class F1{constructor(e){this.key=e}}class L1{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ve(),this.mutatedKeys=Ve(),this._a=Jx(e),this.aa=new Ol(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new x1,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),v=gf(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),A=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let b=!1;_&&v?_.data.isEqual(v.data)?E!==A&&(r.track({type:3,doc:v}),b=!0):this.ha(_,v)||(r.track({type:2,doc:v}),b=!0,(c&&this._a(v,c)>0||d&&this._a(v,d)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),b=!0):_&&!v&&(r.track({type:1,doc:_}),b=!0,(c||d)&&(a=!0)),b&&(v?(o=o.add(v),s=A?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const p="F"===this.query.limitType?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((d,p)=>function(_,v){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return E(_)-E(v)}(d.type,p.type)||this._a(d.doc,p.doc)),this.Pa(r);const o=n?this.Ia():[],a=0===this.oa.size&&this.current?1:0,c=a!==this.sa;return this.sa=a,0!==s.length||c?{snapshot:new kl(this.query,e.aa,i,s,e.mutatedKeys,0===a,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new x1,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ve(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new F1(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new k1(r))}),n}da(e){this.ia=e.ls,this.oa=Ve();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return kl.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class b3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class R3{constructor(e){this.key=e,this.Ra=!1}}class P3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Ks(a=>Qx(a),pf),this.fa=new Map,this.ga=new Set,this.pa=new Nt(se.comparator),this.ya=new Map,this.wa=new nT,this.Sa={},this.ba=new Map,this.Da=wu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function N3(t,e){return HT.apply(this,arguments)}function HT(){return HT=(0,z.Z)(function*(t,e){const n=hD(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield bl(n.localStore,Ar(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield qT(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&k_(n.remoteStore,o)}return i}),HT.apply(this,arguments)}function qT(t,e,n,r,i){return zT.apply(this,arguments)}function zT(){return zT=(0,z.Z)(function*(t,e,n,r,i){t.va=(g,_,v)=>{return(E=(0,z.Z)(function*(b,k,R,B){let X=k.view.ca(R);X.Zi&&(X=yield P_(b.localStore,k.query,!1).then(({documents:ft})=>k.view.ca(ft,X)));const oe=B&&B.targetChanges.get(k.targetId),Pe=k.view.applyChanges(X,b.isPrimaryClient,oe);return tD(b,k.targetId,Pe.Ta),Pe.snapshot}),function A(b,k,R,B){return E.apply(this,arguments)})(t,g,_,v);var E};const s=yield P_(t.localStore,e,!0),o=new L1(e,s.ls),a=o.ca(s.documents),c=wf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,c);tD(t,n,d.Ta);const p=new b3(e,n,o);return t.ma.set(e,p),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),zT.apply(this,arguments)}function x3(t,e){return GT.apply(this,arguments)}function GT(){return GT=(0,z.Z)(function*(t,e){const n=ie(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!pf(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Rl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),kf(n.remoteStore,r.targetId),Fl(n,r.targetId)}).catch(zo))):(Fl(n,r.targetId),yield Rl(n.localStore,r.targetId,!0))}),GT.apply(this,arguments)}function WT(){return WT=(0,z.Z)(function*(t,e,n){const r=fD(t);try{const i=yield function(o,a){const c=ie(o),d=Gt.now(),p=a.reduce((v,E)=>v.add(E.key),Ve());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=Vr(),A=Ve();return c.ss.getEntries(v,p).next(b=>{E=b,E.forEach((k,R)=>{R.isValidDocument()||(A=A.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,E)).next(b=>{g=b;const k=[];for(const R of a){const B=uz(R,g.get(R.key).overlayedDocument);null!=B&&k.push(new Qs(R.key,B,kx(B.value.mapValue),Wt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,k,a)}).next(b=>{_=b;const k=b.applyToLocalDocumentSet(g,A);return c.documentOverlayCache.saveOverlays(v,b.batchId,k)})}).then(()=>({batchId:_.batchId,changes:eM(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let d=o.Sa[o.currentUser.toKey()];d||(d=new Nt(Ne)),d=d.insert(a,c),o.Sa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield Js(r,i.changes),yield Nl(r.remoteStore)}catch(i){const s=Ml(i,"Failed to persist write");n.reject(s)}}),WT.apply(this,arguments)}function V1(t,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,z.Z)(function*(t,e){const n=ie(t);try{const r=yield function Xz(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,p.addedDocuments,g)));let v=_.withSequenceNumber(s.currentSequenceNumber);var A,b,k;null!==e.targetMismatches.get(g)?v=v.withResumeToken(Tn.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,r)),i=i.insert(g,v),b=v,k=p,(0===(A=_).resumeToken.approximateByteSize()||b.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,v))});let c=Vr(),d=Ve();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(m1(s,o,e.documentUpdates).next(p=>{c=p.us,d=p.cs})),!r.isEqual(Ee.min())){const p=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ie(o.Ra):i.removedDocuments.size>0&&(Ie(o.Ra),o.Ra=!1))}),yield Js(n,r,e)}catch(r){yield zo(r)}}),ZT.apply(this,arguments)}function B1(t,e,n){const r=ie(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=ie(o);c.onlineState=a;let d=!1;c.queries.forEach((p,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&jT(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O3(t,e,n){return KT.apply(this,arguments)}function KT(){return KT=(0,z.Z)(function*(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Nt(se.comparator);o=o.insert(s,$t.newNoDocument(s,Ee.min()));const a=Ve().add(s),c=new Ef(Ee.min(),new Map,new Nt(Ne),o,a);yield V1(r,c),r.pa=r.pa.remove(s),r.ya.delete(e),nD(r)}else yield Rl(r.localStore,e,!1).then(()=>Fl(r,e,n)).catch(zo)}),KT.apply(this,arguments)}function k3(t,e){return QT.apply(this,arguments)}function QT(){return QT=(0,z.Z)(function*(t,e){const n=ie(t),r=e.batch.batchId;try{const i=yield function Jz(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,d,p){const g=d.batch,_=g.keys();let v=N.resolve();return _.forEach(E=>{v=v.next(()=>p.getEntry(c,E)).next(A=>{const b=d.docVersions.get(E);Ie(null!==b),A.version.compareTo(b)<0&&(g.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),p.addEntry(A)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ve();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);eD(n,r,null),XT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Js(n,i)}catch(i){yield zo(i)}}),QT.apply(this,arguments)}function F3(t,e,n){return YT.apply(this,arguments)}function YT(){return YT=(0,z.Z)(function*(t,e,n){const r=ie(t);try{const i=yield function(o,a){const c=ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(Ie(null!==g),p=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(r.localStore,e);eD(r,e,n),XT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Js(r,i)}catch(i){yield zo(i)}}),YT.apply(this,arguments)}function JT(){return JT=(0,z.Z)(function*(t,e){const n=ie(t);ia(n.remoteStore)||J("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ie(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=Ml(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),JT.apply(this,arguments)}function XT(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function eD(t,e,n){const r=ie(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Fl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||U1(t,r)})}function U1(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(kf(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),nD(t))}function tD(t,e,n){for(const r of n)r instanceof k1?(t.wa.addReference(r.key,e),V3(t,r)):r instanceof F1?(J("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||U1(t,r.key)):le()}function V3(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(J("SyncEngine","New document in limbo: "+n),t.ga.add(r),nD(t))}function nD(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new se(rt.fromString(e)),r=t.Da.next();t.ya.set(r,new R3(n)),t.pa=t.pa.insert(n,r),k_(t.remoteStore,new Ys(Ar(gl(n.path)),r,"TargetPurposeLimboResolution",Jr._e))}}function Js(t,e,n){return rD.apply(this,arguments)}function rD(){return rD=(0,z.Z)(function*(t,e,n){const r=ie(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,c)=>{o.push(r.va(c,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const p=aT.Qi(c.targetId,d);s.push(p)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,z.Z)(function*(d,p){const g=ie(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>N.forEach(p,v=>N.forEach(v.ki,E=>g.persistence.referenceDelegate.addReference(_,v.targetId,E)).next(()=>N.forEach(v.qi,E=>g.persistence.referenceDelegate.removeReference(_,v.targetId,E)))))}catch(_){if(!Go(_))throw _;J("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of p){const v=_.targetId;if(!_.fromCache){const E=g.ts.get(v),b=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(v,b)}}}),function c(d,p){return a.apply(this,arguments)})(r.localStore,s))}),rD.apply(this,arguments)}function B3(t,e){return iD.apply(this,arguments)}function iD(){return iD=(0,z.Z)(function*(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=yield p1(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(c=>{c.reject(new Q(O.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Js(n,r._s)}var s}),iD.apply(this,arguments)}function U3(t,e){const n=ie(t),r=n.ya.get(e);if(r&&r.Ra)return Ve().add(r.key);{let i=Ve();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function j3(t,e){return sD.apply(this,arguments)}function sD(){return sD=(0,z.Z)(function*(t,e){const n=ie(t),r=yield P_(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&tD(n,e.targetId,i.Ta),i}),sD.apply(this,arguments)}function $3(t,e){return oD.apply(this,arguments)}function oD(){return oD=(0,z.Z)(function*(t,e){const n=ie(t);return y1(n.localStore,e).then(r=>Js(n,r))}),oD.apply(this,arguments)}function H3(t,e,n,r){return aD.apply(this,arguments)}function aD(){return aD=(0,z.Z)(function*(t,e,n,r){const i=ie(t),s=yield function(a,c){const d=ie(a),p=ie(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.Cn(g,c).next(_=>_?d.localDocuments.getDocuments(g,_):N.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===n?yield Nl(i.remoteStore):"acknowledged"===n||"rejected"===n?(eD(i,e,r||null),XT(i,e),c=e,ie(ie(i.localStore).mutationQueue).Fn(c)):le(),yield Js(i,s)):J("SyncEngine","Cannot apply mutation batch with id: "+e)}),aD.apply(this,arguments)}function uD(){return uD=(0,z.Z)(function*(t,e){const n=ie(t);if(hD(n),fD(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield j1(n,r.toArray());n.Ca=!0,yield OT(n.remoteStore,!0);for(const s of i)k_(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Fl(n,o),Rl(n.localStore,o,!0))),kf(n.remoteStore,o)}),yield i,yield j1(n,r),function(o){const a=ie(o);a.ya.forEach((c,d)=>{kf(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new Nt(se.comparator)}(n),n.Ca=!1,yield OT(n.remoteStore,!1)}}),uD.apply(this,arguments)}function j1(t,e,n){return cD.apply(this,arguments)}function cD(){return cD=(0,z.Z)(function*(t,e,n){const r=ie(t),i=[],s=[];for(const o of e){let a;const c=r.fa.get(o);if(c&&0!==c.length){a=yield bl(r.localStore,Ar(c[0]));for(const d of c){const p=r.ma.get(d),g=yield j3(r,p);g.snapshot&&s.push(g.snapshot)}}else{const d=yield _1(r.localStore,o);a=yield bl(r.localStore,d),yield qT(r,$1(d),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),cD.apply(this,arguments)}function $1(t){return Wx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function z3(t){return n=ie(t).localStore,ie(ie(n).persistence).Bi();var n}function G3(t,e,n,r){return lD.apply(this,arguments)}function lD(){return lD=(0,z.Z)(function*(t,e,n,r){const i=ie(t);if(i.Ca)return void J("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield y1(i.localStore,Yx(s[0])),a=Ef.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Tn.EMPTY_BYTE_STRING);yield Js(i,o,a);break}case"rejected":yield Rl(i.localStore,e,!0),Fl(i,e,r);break;default:le()}}),lD.apply(this,arguments)}function W3(t,e,n){return dD.apply(this,arguments)}function dD(){return dD=(0,z.Z)(function*(t,e,n){const r=hD(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){J("SyncEngine","Adding an already active target "+i);continue}const s=yield _1(r.localStore,i),o=yield bl(r.localStore,s);yield qT(r,$1(s),o.targetId,!1,o.resumeToken),k_(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield Rl(r.localStore,i,!1).then(()=>{kf(r.remoteStore,i),Fl(r,i)}).catch(zo))}}),dD.apply(this,arguments)}function hD(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=V1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O3.bind(null,e),e.Va.a_=D3.bind(null,e.eventManager),e.Va.Fa=A3.bind(null,e.eventManager),e}function fD(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F3.bind(null,e),e}class Ff{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,z.Z)(function*(){n.serializer=Mf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return f1(this.persistence,new h1,e.initialUser,this.serializer)}createPersistence(e){return new rT(S_.jr,this.serializer)}createSharedClientState(e){return new w1}terminate(){var e=this;return(0,z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class pD extends Ff{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield fD(r.xa.syncEngine),yield Nl(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return f1(this.persistence,new h1,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new r1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Iq(n,this.persistence);return new vq(e.asyncQueue,r)}createPersistence(e){const n=oT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new sT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,D1(),O_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new w1}}class H1 extends pD{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof gT&&(r.sharedClientState.syncEngine={Ys:H3.bind(null,i),Zs:G3.bind(null,i),Xs:W3.bind(null,i),Bi:z3.bind(null,i),Js:$3.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,z.Z)(function*(o){yield function q3(t,e){return uD.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=D1();if(!gT.D(n))throw new Q(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gT(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ll{initialize(e,n){var r=this;return(0,z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>B1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=B3.bind(null,r.syncEngine),yield OT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new T3}createDatastore(e){const n=Mf(e.databaseInfo.databaseId),r=new o3(e.databaseInfo);return new c3(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>B1(this.syncEngine,n,0),a=T1.D()?new T1:new r3,new h3(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,c,d,p){const g=new P3(i,s,o,a,c,d);return p&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,z.Z)(function*(r){const i=ie(r);J("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield Pl(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function q1(t,e=10240){let n=0;return{read:()=>(0,z.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class L_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Q3{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new wn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,z.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new C3(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,z.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,z.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class Y3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Q(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,z.Z)(function*(o,a){const c=ie(o),d=Df(c.serializer)+"/documents",p={documents:a.map(E=>Tf(c.serializer,E))},g=yield c.Co("BatchGetDocuments",d,p,a.length),_=new Map;g.forEach(E=>{const A=function yz(t,e){return"found"in e?function(r,i){Ie(!!i.found);const s=fs(r,i.found.name),o=cn(i.found.updateTime),a=i.found.createTime?cn(i.found.createTime):Ee.min(),c=new Wn({mapValue:{fields:i.found.fields}});return $t.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){Ie(!!i.missing),Ie(!!i.readTime);const s=fs(r,i.missing),o=cn(i.readTime);return $t.newNoDocument(s,o)}(t,e):le()}(c.serializer,E);_.set(A.key.toString(),A)});const v=[];return a.forEach(E=>{const A=_.get(E.toString());Ie(!!A),v.push(A)}),v}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new El(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=se.fromPath(i);e.mutations.push(new Bw(s,e.precondition(s)))}),yield(r=(0,z.Z)(function*(s,o){const a=ie(s),c=Df(a.serializer)+"/documents",d={writes:o.map(p=>Af(a.serializer,p))};yield a.wo("Commit",c,d)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw le();n=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Q(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ee.min())?Wt.exists(!1):Wt.updateTime(n):Wt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ee.min()))throw new Q(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wt.updateTime(n)}return Wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class J3{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new _T(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,z.Z)(function*(){const n=new Y3(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!of(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!gM(n)}return!1}}class X3{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xn.UNAUTHENTICATED,this.clientId=dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,z.Z)(function*(a){J("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Ml(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function V_(t,e){return gD.apply(this,arguments)}function gD(){return gD=(0,z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,z.Z)(function*(s){r.isEqual(s)||(yield p1(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),gD.apply(this,arguments)}function mD(t,e){return _D.apply(this,arguments)}function _D(){return _D=(0,z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield yD(t);J("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>N1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>N1(e.remoteStore,s)),t._onlineComponents=e}),_D.apply(this,arguments)}function z1(t){return"FirebaseError"===t.name?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function yD(t){return vD.apply(this,arguments)}function vD(){return vD=(0,z.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{yield V_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!z1(n))throw n;Fr("Error using user provided cache. Falling back to memory cache: "+n),yield V_(t,new Ff)}}else J("FirestoreClient","Using default OfflineComponentProvider"),yield V_(t,new Ff);return t._offlineComponents}),vD.apply(this,arguments)}function B_(t){return ID.apply(this,arguments)}function ID(){return ID=(0,z.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),yield mD(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),yield mD(t,new Ll))),t._onlineComponents}),ID.apply(this,arguments)}function G1(t){return yD(t).then(e=>e.persistence)}function Vl(t){return yD(t).then(e=>e.localStore)}function W1(t){return B_(t).then(e=>e.remoteStore)}function ED(t){return B_(t).then(e=>e.syncEngine)}function Bl(t){return wD.apply(this,arguments)}function wD(){return wD=(0,z.Z)(function*(t){const e=yield B_(t),n=e.eventManager;return n.onListen=N3.bind(null,e.syncEngine),n.onUnlisten=x3.bind(null,e.syncEngine),n}),wD.apply(this,arguments)}function K1(t,e,n={}){const r=new wn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(s,o,a,c,d){const p=new L_({next:_=>{o.enqueueAndForget(()=>BT(s,g));const v=_.docs.has(a);!v&&_.fromCache?d.reject(new Q(O.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&c&&"server"===c.source?d.reject(new Q(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new $T(gl(a.path),p,{includeMetadataChanges:!0,J_:!0});return LT(s,g)}(yield Bl(t),t.asyncQueue,e,n,r)})),r.promise}function Q1(t,e,n={}){const r=new wn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(s,o,a,c,d){const p=new L_({next:_=>{o.enqueueAndForget(()=>BT(s,g)),_.fromCache&&"server"===c.source?d.reject(new Q(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new $T(a,p,{includeMetadataChanges:!0,J_:!0});return LT(s,g)}(yield Bl(t),t.asyncQueue,e,n,r)})),r.promise}function Y1(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const J1=new Map;function TD(t,e,n){if(!n)throw new Q(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X1(t,e,n,r){if(!0===e&&!0===r)throw new Q(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eO(t){if(!se.isDocumentKey(t))throw new Q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tO(t){if(se.isDocumentKey(t))throw new Q(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function U_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":le()}function Ze(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=U_(t);throw new Q(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nO(t,e){if(e<=0)throw new Q(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class rO{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Y1(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rO(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new aq;switch(r.type){case"firstParty":return new dq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=J1.get(n);r&&(J("ComponentProvider","Removing Datastore"),J1.delete(n),r.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zn(this.firestore,e,this._query)}}class Ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}}class ps extends Zn{constructor(e,n,r){super(e,n,gl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new se(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function sO(t,e,...n){if(t=(0,Dt.m9)(t),TD("collection","path",e),t instanceof Lf){const r=rt.fromString(e,...n);return tO(r),new ps(t,null,r)}{if(!(t instanceof Ht||t instanceof ps))throw new Q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return tO(r),new ps(t.firestore,null,r)}}function j_(t,e,...n){if(t=(0,Dt.m9)(t),1===arguments.length&&(e=dx.newId()),TD("doc","path",e),t instanceof Lf){const r=rt.fromString(e,...n);return eO(r),new Ht(t,null,new se(r))}{if(!(t instanceof Ht||t instanceof ps))throw new Q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return eO(r),new Ht(t.firestore,t instanceof ps?t.converter:null,new se(r))}}function oO(t,e){return t=(0,Dt.m9)(t),e=(0,Dt.m9)(e),(t instanceof Ht||t instanceof ps)&&(e instanceof Ht||e instanceof ps)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function DD(t,e){return t=(0,Dt.m9)(t),e=(0,Dt.m9)(e),t instanceof Zn&&e instanceof Zn&&t.firestore===e.firestore&&pf(t._query,e._query)&&t.converter===e.converter}class dG{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new _T(this,"async_queue_retry"),this.iu=()=>{const n=O_();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=O_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=O_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new wn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,z.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Go(n))throw n;J("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,un("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=FT.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&le()}verifyOperationInProgress(){}uu(){var e=this;return(0,z.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function AD(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class hG{constructor(){this._progressObserver={},this._taskCompletionResolver=new wn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xt extends Lf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new dG,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aO(this),this._firestoreClient.terminate()}}function Jt(t){return t._firestoreClient||aO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function aO(t){var e,n,r;const i=t._freezeSettings(),s=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new jq(t._databaseId,c,t._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Y1(p.experimentalLongPollingOptions),p.useFetchStreams));var c,p;t._firestoreClient=new X3(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function uO(t,e,n){const r=new wn;return t.asyncQueue.enqueue((0,z.Z)(function*(){try{yield V_(t,n),yield mD(t,e),r.resolve()}catch(i){const s=i;if(!z1(s))throw s;Fr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function cO(t){if(t._initialized||t._terminated)throw new Q(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gs(Tn.fromBase64String(e))}catch(n){throw new Q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gs(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xs{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Du{constructor(e){this._methodName=e}}class $_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}const TG=/^__.*__$/;class DG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Il(e,this.data,n,this.fieldTransforms)}}class lO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class H_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new H_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return G_(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(dO(this.Iu)&&TG.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class AG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mf(e)}pu(e,n,r,i=!1){return new H_({Iu:e,methodName:n,gu:r,path:jt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Au(t){const e=t._freezeSettings(),n=Mf(t._databaseId);return new AG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function q_(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);RD("Data must be an object, but it was:",o,r);const a=pO(r,o);let c,d;if(s.merge)c=new Lr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=Uf(e,g,n);if(!o.contains(_))throw new Q(O.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);mO(p,_)||p.push(_)}c=new Lr(p),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new DG(new Wn(a),c,d)}class Bf extends Du{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bf}}function hO(t,e,n){return new H_({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class CD extends Du{_toFieldTransform(e){return new yf(e.path,new yl)}isEqual(e){return e instanceof CD}}class CG extends Du{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=hO(this,e,!0),r=this.yu.map(s=>Cu(s,n)),i=new gu(r);return new yf(e.path,i)}isEqual(e){return this===e}}class SG extends Du{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=hO(this,e,!0),r=this.yu.map(s=>Cu(s,n)),i=new mu(r);return new yf(e.path,i)}isEqual(e){return this===e}}class bG extends Du{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new vl(e.serializer,iM(e.serializer,this.wu));return new yf(e.path,n)}isEqual(e){return this===e}}function SD(t,e,n,r){const i=t.pu(1,e,n);RD("Data must be an object, but it was:",i,r);const s=[],o=Wn.empty();Wo(r,(c,d)=>{const p=z_(e,c,n);d=(0,Dt.m9)(d);const g=i.Ru(p);if(d instanceof Bf)s.push(p);else{const _=Cu(d,g);null!=_&&(s.push(p),o.set(p,_))}});const a=new Lr(s);return new lO(o,a,i.fieldTransforms)}function bD(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[Uf(e,r,n)],c=[i];if(s.length%2!=0)throw new Q(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(Uf(e,s[_])),c.push(s[_+1]);const d=[],p=Wn.empty();for(let _=a.length-1;_>=0;--_)if(!mO(d,a[_])){const v=a[_];let E=c[_];E=(0,Dt.m9)(E);const A=o.Ru(v);if(E instanceof Bf)d.push(v);else{const b=Cu(E,A);null!=b&&(d.push(v),p.set(v,b))}}const g=new Lr(d);return new lO(p,g,o.fieldTransforms)}function fO(t,e,n,r=!1){return Cu(n,t.pu(r?4:3,e))}function Cu(t,e){if(gO(t=(0,Dt.m9)(t)))return RD("Unsupported field value:",e,t),pO(t,e);if(t instanceof Du)return function(r,i){if(!dO(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Cu(a,i.Vu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,Dt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return iM(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Gt.fromDate(r);return{timestampValue:wl(i.serializer,s)}}if(r instanceof Gt){const s=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wl(i.serializer,s)}}if(r instanceof $_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gs)return{bytesValue:AM(i.serializer,r._byteString)};if(r instanceof Ht){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${U_(r)}`)}(t,e)}function pO(t,e){const n={};return Cx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wo(t,(r,i)=>{const s=Cu(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function gO(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof $_||t instanceof gs||t instanceof Ht||t instanceof Du)}function RD(t,e,n){if(!gO(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=U_(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Uf(t,e,n){if((e=(0,Dt.m9)(e))instanceof Xs)return e._internalPath;if("string"==typeof e)return z_(t,e);throw G_("Field path arguments must be of type string or ",t,!1,void 0,n)}const RG=new RegExp("[~\\*/\\[\\]]");function z_(t,e,n){if(e.search(RG)>=0)throw G_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xs(...e.split("."))._internalPath}catch{throw G_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function G_(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Q(O.INVALID_ARGUMENT,a+t+c)}function mO(t,e){return t.some(n=>n.isEqual(e))}class jf{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(W_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class PG extends jf{data(){return super.data()}}function W_(t,e){return"string"==typeof e?z_(t,e):e instanceof Xs?e._internalPath:e._delegate._internalPath}function _O(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Q(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PD{}class $f extends PD{}function oa(t,e,...n){let r=[];e instanceof PD&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof Ul).length,a=s.filter(c=>c instanceof Hf).length;if(o>1||o>0&&a>0)throw new Q(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hf extends $f{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hf(e,n,r)}_apply(e){const n=this._parse(e);return EO(e._query,n),new Zn(e.firestore,e.converter,Lw(e._query,n))}_parse(e){const n=Au(e.firestore);return function(s,o,a,c,d,p,g){let _;if(d.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new Q(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){IO(g,p);const v=[];for(const E of g)v.push(vO(c,s,E));_={arrayValue:{values:v}}}else _=vO(c,s,g)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||IO(g,p),_=fO(a,"where",g,"in"===p||"not-in"===p);return Je.create(d,p,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ul extends PD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ul(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:_t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)EO(o,c),o=Lw(o,c)}(e._query,n),new Zn(e.firestore,e.converter,Lw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ND extends $f{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ND(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new Q(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Q(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hf(s,o)}(e._query,this._field,this._direction);return new Zn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class Z_ extends $f{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Z_(e,n,r)}_apply(e){return new Zn(e.firestore,e.converter,p_(e._query,this._limit,this._limitType))}}class K_ extends $f{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new K_(e,n,r)}_apply(e){const n=yO(e,this.type,this._docOrFields,this._inclusive);return new Zn(e.firestore,e.converter,(s=n,new Zs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Q_ extends $f{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Q_(e,n,r)}_apply(e){const n=yO(e,this.type,this._docOrFields,this._inclusive);return new Zn(e.firestore,e.converter,(s=n,new Zs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function yO(t,e,n,r){if(n[0]=(0,Dt.m9)(n[0]),n[0]instanceof jf)return function(s,o,a,c,d){if(!c)throw new Q(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const g of ml(s))if(g.field.isKeyField())p.push(fu(o,c.key));else{const _=c.data.field(g.field);if(a_(_))throw new Q(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=g.field.canonicalString();throw new Q(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}p.push(_)}return new Xo(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Au(t.firestore);return function(o,a,c,d,p,g){const _=o.explicitOrderBy;if(p.length>_.length)throw new Q(O.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let E=0;E<p.length;E++){const A=p[E];if(_[E].field.isKeyField()){if("string"!=typeof A)throw new Q(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof A}`);if(!Fw(o)&&-1!==A.indexOf("/"))throw new Q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${A}' contains a slash.`);const b=o.path.child(rt.fromString(A));if(!se.isDocumentKey(b))throw new Q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const k=new se(b);v.push(fu(a,k))}else{const b=fO(c,d,A);v.push(b)}}return new Xo(v,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function vO(t,e,n){if("string"==typeof(n=(0,Dt.m9)(n))){if(""===n)throw new Q(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fw(e)&&-1!==n.indexOf("/"))throw new Q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!se.isDocumentKey(r))throw new Q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fu(t,new se(r))}if(n instanceof Ht)return fu(t,n._key);throw new Q(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${U_(n)}.`)}function IO(t,e){if(!Array.isArray(t)||0===t.length)throw new Q(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EO(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Q(O.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xD{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new $_(Yt(e.latitude),Yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=u_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uf(e));default:return null}}convertTimestamp(e){const n=Zo(e);return new Gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);Ie(kM(r));const i=new Ko(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||un(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Y_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class BG extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}class Su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eo extends jf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(W_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qf extends eo{data(e={}){return super.data(e)}}class aa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Su(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qf(this._firestore,this._userDataWriter,r.key,r,new Su(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new qf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Su(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new qf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Su(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:jG(a.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function jG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}function TO(t,e){return t instanceof eo&&e instanceof eo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof aa&&e instanceof aa&&t._firestore===e._firestore&&DD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class ua extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}function DO(t,e,n){t=Ze(t,Ht);const r=Ze(t.firestore,xt),i=Y_(t.converter,e,n);return jl(r,[q_(Au(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Wt.none())])}function AO(t,e,n,...r){t=Ze(t,Ht);const i=Ze(t.firestore,xt),s=Au(i);let o;return o="string"==typeof(e=(0,Dt.m9)(e))||e instanceof Xs?bD(s,"updateDoc",t._key,e,n,r):SD(s,"updateDoc",t._key,e),jl(i,[o.toMutation(t._key,Wt.exists(!0))])}function CO(t,...e){var n,r,i;t=(0,Dt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||AD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(AD(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let c,d,p;if(t instanceof Ht)d=Ze(t.firestore,xt),p=gl(t._key.path),c={next:g=>{e[o]&&e[o](MD(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Ze(t,Zn);d=Ze(g.firestore,xt),p=g._query;const _=new ua(d);c={next:v=>{e[o]&&e[o](new aa(d,_,g,v))},error:e[o+1],complete:e[o+2]},_O(t._query)}return function(_,v,E,A){const b=new L_(A),k=new $T(v,b,E);return _.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return LT(yield Bl(_),k)})),()=>{b.Na(),_.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return BT(yield Bl(_),k)}))}}(Jt(d),p,a,c)}function jl(t,e){return function(r,i){const s=new wn;return r.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function M3(t,e,n){return WT.apply(this,arguments)}(yield ED(r),i,s)})),s.promise}(Jt(t),e)}function MD(t,e,n){const r=n.docs.get(e._key),i=new ua(t);return new eo(t,i,e._key,r,new Su(n.hasPendingWrites,n.fromCache),e.converter)}const s6={maxAttempts:5};class SO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Au(e)}set(e,n,r){this._verifyNotCommitted();const i=ca(e,this._firestore),s=Y_(i.converter,n,r),o=q_(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Wt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=ca(e,this._firestore);let o;return o="string"==typeof(n=(0,Dt.m9)(n))||n instanceof Xs?bD(this._dataReader,"WriteBatch.update",s._key,n,r,i):SD(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ca(e,this._firestore);return this._mutations=this._mutations.concat(new El(n._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ca(t,e){if((t=(0,Dt.m9)(t)).firestore!==e)throw new Q(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class o6 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Au(n)}get(n){const r=ca(n,this._firestore),i=new BG(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return le();const o=s[0];if(o.isFoundDocument())return new jf(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new jf(this._firestore,i,r._key,null,r.converter);throw le()})}set(n,r,i){const s=ca(n,this._firestore),o=Y_(s.converter,r,i),a=q_(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=ca(n,this._firestore);let a;return a="string"==typeof(r=(0,Dt.m9)(r))||r instanceof Xs?bD(this._dataReader,"Transaction.update",o._key,r,i,s):SD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=ca(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ca(e,this._firestore),r=new ua(this._firestore);return super.get(e).then(i=>new eo(this._firestore,r,n._key,i._document,new Su(!1,!1),n.converter))}}function kD(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function NO(){if(typeof Uint8Array>"u")throw new Q("unimplemented","Uint8Arrays are not available in this environment.")}function xO(){if(!function Bq(){return typeof atob<"u"}())throw new Q("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){al=Yc.SDK_VERSION,(0,Yc._registerComponent)(new zP.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new xt(new cq(r.getProvider("auth-internal")),new hq(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(d.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Yc.registerVersion)(ux,"4.3.2",e),(0,Yc.registerVersion)(ux,"4.3.2","esm2017")}();class zf{constructor(e){this._delegate=e}static fromBase64String(e){return xO(),new zf(gs.fromBase64String(e))}static fromUint8Array(e){return NO(),new zf(gs.fromUint8Array(e))}toBase64(){return xO(),this._delegate.toBase64()}toUint8Array(){return NO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function FD(t){return function m6(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class _6{enableIndexedDbPersistence(e,n){return function pG(t,e){cO(t=Ze(t,xt));const n=Jt(t);if(n._uninitializedComponentsProvider)throw new Q(O.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Ll;return uO(n,i,new pD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function gG(t){cO(t=Ze(t,xt));const e=Jt(t);if(e._uninitializedComponentsProvider)throw new Q(O.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Ll;return uO(e,r,new H1(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mG(t){if(t._initialized&&!t._terminated)throw new Q(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(n=(0,z.Z)(function*(i){if(!Bi.D())return Promise.resolve();const s=i+"main";yield Bi.delete(s)}),function r(i){return n.apply(this,arguments)})(oT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class MO{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ko||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function iO(t,e,n,r={}){var i;const s=(t=Ze(t,Lf))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=xn.MOCK_USER;else{a=(0,Dt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new xn(d)}t._authCredentials=new uq(new cx(a,c))}}(this._delegate,e,n,r)}enableNetwork(){return function yG(t){return function eG(t){return t.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield G1(t),n=yield W1(t);return e.setNetworkEnabled(!0),function(i){const s=ie(i);return s.C_.delete(0),Of(s)}(n)}))}(Jt(t=Ze(t,xt)))}(this._delegate)}disableNetwork(){return function vG(t){return function tG(t){return t.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield G1(t),n=yield W1(t);return e.setNetworkEnabled(!1),(r=(0,z.Z)(function*(s){const o=ie(s);o.C_.add(0),yield Pl(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(Jt(t=Ze(t,xt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,X1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _G(t){return function(n){const r=new wn;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function L3(t,e){return JT.apply(this,arguments)}(yield ED(n),r)})),r.promise}(Jt(t=Ze(t,xt)))}(this._delegate)}onSnapshotsInSync(e){return function QG(t,e){return function iG(t,e){const n=new L_(e);return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield Bl(t),s=n,ie(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield Bl(t),s=n,void ie(i).q_.delete(s);var i,s}))}}(Jt(t=Ze(t,xt)),AD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $l(this,sO(this._delegate,e))}catch(n){throw Cr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ii(this,j_(this._delegate,e))}catch(n){throw Cr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Sr(this,function lG(t,e){if(t=Ze(t,Lf),TD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Q(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zn(t,null,(r=e,new Zs(rt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Cr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function a6(t,e,n){t=Ze(t,xt);const r=Object.assign(Object.assign({},s6),n);return function(s){if(s.maxAttempts<1)throw new Q(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new wn;return s.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const d=yield function Z1(t){return B_(t).then(e=>e.datastore)}(s);new J3(s.asyncQueue,d,a,o,c).run()})),c.promise}(Jt(t),i=>e(new o6(t,i)),r)}(this._delegate,n=>e(new OO(this,n)))}batch(){return Jt(this._delegate),new kO(new SO(this._delegate,e=>jl(this._delegate,e)))}loadBundle(e){return function IG(t,e){const n=Jt(t=Ze(t,xt)),r=new hG;return function sG(t,e,n,r){const i=function(o,a){let c;return c="string"==typeof o?_M().encode(o):o,p=function(p,g){if(p instanceof Uint8Array)return q1(p,g);if(p instanceof ArrayBuffer)return q1(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Q3(p,a);var p}(n,Mf(e));t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function Z3(t,e,n){const r=ie(t);var i;(i=(0,z.Z)(function*(o,a,c){try{const d=yield a.getMetadata();if(yield function(E,A){const b=ie(E),k=cn(A.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",R=>b.Kr.getBundleMetadata(R,A.id)).then(R=>!!R&&R.createTime.compareTo(k)>=0)}(o.localStore,d))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);c._updateProgress(O1(d));const p=new S3(d,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const v=yield p.ea(g);v&&c._updateProgress(v),g=yield a.Ma()}const _=yield p.complete();return yield Js(o,_.ra,void 0),yield function(E,A){const b=ie(E);return b.persistence.runTransaction("Save bundle","readwrite",k=>b.Kr.saveBundleMetadata(k,A))}(o.localStore,d),c._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return Fr("SyncEngine",`Loading bundle failed with ${d}`),c._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,c){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ED(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function EG(t,e){return function oG(t,e){return t.asyncQueue.enqueue((0,z.Z)(function*(){return function(r,i){const s=ie(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield Vl(t),e)}))}(Jt(t=Ze(t,xt)),e).then(n=>n?new Zn(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Sr(this,n):null)}}class X_ extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new zf(new gs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ii.forKey(n,this.firestore,null)}}class OO{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new X_(e)}get(e){const n=Ru(e);return this._delegate.get(n).then(r=>new Gf(this._firestore,new eo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ru(e);return r?(kD("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ru(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ru(e);return this._delegate.delete(n),this}}class kO{constructor(e){this._delegate=e}set(e,n,r){const i=Ru(e);return r?(kD("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ru(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ru(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class bu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new qf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wf(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=bu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new bu(e,new X_(e),n),i.set(n,s)),s}}bu.INSTANCES=new WeakMap;class Ii{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new X_(e)}static forPath(e,n,r){if(e.length%2!=0)throw new Q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ii(n,new Ht(n._delegate,r,new se(e)))}static forKey(e,n,r){return new Ii(n,new Ht(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $l(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $l(this.firestore,sO(this._delegate,e))}catch(n){throw Cr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Dt.m9)(e))instanceof Ht&&oO(this._delegate,e)}set(e,n){n=kD("DocumentReference.set",n);try{return n?DO(this._delegate,e,n):DO(this._delegate,e)}catch(r){throw Cr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?AO(this._delegate,e):AO(this._delegate,e,n,...r)}catch(i){throw Cr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ZG(t){return jl(Ze(t.firestore,xt),[new El(t._key,Wt.none())])}(this._delegate)}onSnapshot(...e){const n=FO(e),r=LO(e,i=>new Gf(this.firestore,new eo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return CO(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function HG(t){t=Ze(t,Ht);const e=Ze(t.firestore,xt),n=Jt(e),r=new ua(e);return function nG(t,e){const n=new wn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(s,o,a){try{const c=yield function(p,g){const _=ie(p);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,g))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Q(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const d=Ml(c,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Vl(t),e,n);var r})),n.promise}(n,t._key).then(i=>new eo(e,r,t._key,i,new Su(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function qG(t){t=Ze(t,Ht);const e=Ze(t.firestore,xt);return K1(Jt(e),t._key,{source:"server"}).then(n=>MD(e,t,n))}(this._delegate):function $G(t){t=Ze(t,Ht);const e=Ze(t.firestore,xt);return K1(Jt(e),t._key).then(n=>MD(e,t,n))}(this._delegate),n.then(r=>new Gf(this.firestore,new eo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ii(this.firestore,this._delegate.withConverter(e?bu.getInstance(this.firestore,e):null))}}function Cr(t,e,n){return t.message=t.message.replace(e,n),t}function FO(t){for(const e of t)if("object"==typeof e&&!FD(e))return e;return{}}function LO(t,e){var n,r;let i;return i=FD(t[0])?t[0]:FD(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Gf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ii(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return TO(this._delegate,e._delegate)}}class Wf extends Gf{data(e){const n=this._delegate.data(e);return function oq(t,e){t||le()}(void 0!==n),n}}class Sr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new X_(e)}where(e,n,r){try{return new Sr(this.firestore,oa(this._delegate,function NG(t,e,n){const r=e,i=W_("where",t);return Hf._create(i,r,n)}(e,n,r)))}catch(i){throw Cr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Sr(this.firestore,oa(this._delegate,function xG(t,e="asc"){const n=e,r=W_("orderBy",t);return ND._create(r,n)}(e,n)))}catch(r){throw Cr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Sr(this.firestore,oa(this._delegate,function MG(t){return nO("limit",t),Z_._create("limit",t,"F")}(e)))}catch(n){throw Cr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Sr(this.firestore,oa(this._delegate,function OG(t){return nO("limitToLast",t),Z_._create("limitToLast",t,"L")}(e)))}catch(n){throw Cr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Sr(this.firestore,oa(this._delegate,function kG(...t){return K_._create("startAt",t,!0)}(...e)))}catch(n){throw Cr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Sr(this.firestore,oa(this._delegate,function FG(...t){return K_._create("startAfter",t,!1)}(...e)))}catch(n){throw Cr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Sr(this.firestore,oa(this._delegate,function LG(...t){return Q_._create("endBefore",t,!1)}(...e)))}catch(n){throw Cr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Sr(this.firestore,oa(this._delegate,function VG(...t){return Q_._create("endAt",t,!0)}(...e)))}catch(n){throw Cr(n,"endAt()","Query.endAt()")}}isEqual(e){return DD(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function GG(t){t=Ze(t,Zn);const e=Ze(t.firestore,xt),n=Jt(e),r=new ua(e);return function rG(t,e){const n=new wn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(s,o,a){try{const c=yield P_(s,o,!0),d=new L1(o,c.ls),p=d.ca(c.documents),g=d.applyChanges(p,!1);a.resolve(g.snapshot)}catch(c){const d=Ml(c,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Vl(t),e,n);var r})),n.promise}(n,t._query).then(i=>new aa(e,r,t,i))}(this._delegate):"server"===e?.source?function WG(t){t=Ze(t,Zn);const e=Ze(t.firestore,xt),n=Jt(e),r=new ua(e);return Q1(n,t._query,{source:"server"}).then(i=>new aa(e,r,t,i))}(this._delegate):function zG(t){t=Ze(t,Zn);const e=Ze(t.firestore,xt),n=Jt(e),r=new ua(e);return _O(t._query),Q1(n,t._query).then(i=>new aa(e,r,t,i))}(this._delegate),n.then(r=>new LD(this.firestore,new aa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=FO(e),r=LO(e,i=>new LD(this.firestore,new aa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return CO(this._delegate,n,r)}withConverter(e){return new Sr(this.firestore,this._delegate.withConverter(e?bu.getInstance(this.firestore,e):null))}}class v6{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Wf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class LD{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Sr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new v6(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Wf(this._firestore,r))})}isEqual(e){return TO(this._delegate,e._delegate)}}class $l extends Sr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ii(this.firestore,e):null}doc(e){try{return new Ii(this.firestore,void 0===e?j_(this._delegate):j_(this._delegate,e))}catch(n){throw Cr(n,"doc()","CollectionReference.doc()")}}add(e){return function KG(t,e){const n=Ze(t.firestore,xt),r=j_(t),i=Y_(t.converter,e);return jl(n,[q_(Au(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Wt.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Ii(this.firestore,n))}isEqual(e){return oO(this._delegate,e._delegate)}withConverter(e){return new $l(this.firestore,this._delegate.withConverter(e?bu.getInstance(this.firestore,e):null))}}function Ru(t){return Ze(t,Ht)}class VD{constructor(...e){this._delegate=new Xs(...e)}static documentId(){return new VD(jt.keyField().canonicalString())}isEqual(e){return(e=(0,Dt.m9)(e))instanceof Xs&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function c6(){return new CD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Pu(e)}static delete(){const e=function u6(){return new Bf("deleteField")}();return e._methodName="FieldValue.delete",new Pu(e)}static arrayUnion(...e){const n=function l6(...t){return new CG("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Pu(n)}static arrayRemove(...e){const n=function d6(...t){return new SG("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Pu(n)}static increment(e){const n=function h6(t){return new bG("increment",t)}(e);return n._methodName="FieldValue.increment",new Pu(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const I6={Firestore:MO,GeoPoint:$_,Timestamp:Gt,Blob:zf,Transaction:OO,WriteBatch:kO,DocumentReference:Ii,DocumentSnapshot:Gf,Query:Sr,QueryDocumentSnapshot:Wf,QuerySnapshot:LD,CollectionReference:$l,FieldPath:VD,FieldValue:Pu,setLogLevel:function y6(t){!function sq(t){qo.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function VO(t,e){return function T6(t,e=CP){return new dt(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function BD(t,e){return VO(t,e).pipe(Ke(n=>({payload:n,type:"query"})))}!function w6(t){(function E6(t,e){t.INTERNAL.registerComponent(new zP.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},I6)))})(t,(e,n)=>new MO(e,n,new _6)),t.registerVersion("@firebase/firestore-compat","0.3.21")}(jo.Z);class BO{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=zO(r,n);return new $O(i,s,this.afs)}snapshotChanges(){return function D6(t,e){return VO(t,e).pipe(ME(void 0),OE(),Ke(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kr)}valueChanges(e={}){return this.snapshotChanges().pipe(Ke(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return C(this.ref.get(e)).pipe(Kr)}}function ey(t,e){return BD(t,e).pipe(ME(void 0),OE(),Ke(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),p=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function UO(t,e,n){return ey(t,n).pipe(kE((r,i)=>function A6(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function C6(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return UD(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return UD(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UD(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Ft(),Ke(r=>r.map(i=>({type:i.type,payload:i}))))}function UD(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function jO(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class $O{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=ey(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Ke(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(ME(void 0),OE(),Pm(([r,i])=>i.length>0||!r),Ke(([,r])=>r),Kr)}auditTrail(e){return this.stateChanges(e).pipe(kE((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=jO(e);return UO(this.query,n,this.afs.schedulers.outsideAngular).pipe(Kr)}valueChanges(e={}){return BD(this.query,this.afs.schedulers.outsideAngular).pipe(Ke(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Kr)}get(e){return C(this.query.get(e)).pipe(Kr)}add(e){return this.ref.add(e)}doc(e){return new BO(this.ref.doc(e),this.afs)}}class S6{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?ey(this.query,this.afs.schedulers.outsideAngular).pipe(Ke(n=>n.filter(r=>e.indexOf(r.type)>-1)),Pm(n=>n.length>0),Kr):ey(this.query,this.afs.schedulers.outsideAngular).pipe(Kr)}auditTrail(e){return this.stateChanges(e).pipe(kE((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=jO(e);return UO(this.query,n,this.afs.schedulers.outsideAngular).pipe(Kr)}valueChanges(e={}){return BD(this.query,this.afs.schedulers.outsideAngular).pipe(Ke(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Kr)}get(e){return C(this.query.get(e)).pipe(Kr)}}const HO=new ye("angularfire2.enableFirestorePersistence"),qO=new ye("angularfire2.firestore.persistenceSettings"),b6=new ye("angularfire2.firestore.settings"),R6=new ye("angularfire2.firestore.use-emulator");function zO(t,e=(n=>n)){return{query:e(t),ref:t}}let GO=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,c,d,p,g,_,v,E,A,b,k,R){this.schedulers=c;const B=xE(n,a,r),X=p;g&&$P(B,a,_,E,A,b,v,k),[this.firestore,this.persistenceEnabled$]=NP(`${B.name}.firestore`,"AngularFirestore",B.name,()=>{const oe=a.runOutsideAngular(()=>B.firestore());if(s&&oe.settings(s),X&&oe.useEmulator(...X),i&&!Tm(o)){const Pe=()=>{try{return C(oe.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(ft){return typeof console<"u"&&console.warn(ft),ne(!1)}};return[oe,a.runOutsideAngular(Pe)]}return[oe,ne(!1)]},[s,X,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=zO(i,r),a=this.schedulers.ngZone.run(()=>s);return new $O(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new S6(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new BO(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(de(bm),de(Rm,8),de(HO,8),de(b6,8),de(Os),de(bt),de(RP),de(qO,8),de(R6,8),de(HP,8),de(FP,8),de(LP,8),de(VP,8),de(BP,8),de(UP,8),de(jP,8),de(SP,8))};static \u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),P6=(()=>{class t{constructor(){jo.Z.registerVersion("angularfire",NE.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:HO,useValue:!0},{provide:qO,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=si({type:t});static \u0275inj=Hi({providers:[GO]})}return t})(),N6=(()=>{class t{constructor(n){this.firestore=n,this.firestoreCollection=n.collection("todos")}addTodo(n){this.firestoreCollection.add({title:n,isDone:!1})}updateTodoStatus(n,r){this.firestoreCollection.doc(n).update({isDone:r})}deleteTodo(n){this.firestoreCollection.doc(n).delete()}static#e=this.\u0275fac=function(r){return new(r||t)(de(GO))};static#t=this.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function x6(t,e){if(1&t){const n=mI();Bs(0,"li",12)(1,"span")(2,"i",13),_h("click",function(){const s=Co(n).$implicit;return ic(yI().onStatusChange(s.id,!s.isDone))}),Us(),DI(3),Bs(4,"span",14)(5,"i",15),_h("click",function(){const s=Co(n).$implicit;return ic(yI().onDelete(s.id))}),Us()()()()}if(2&t){const n=e.$implicit;Vg(2),Kg("ngClass",n.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),Vg(1),Jg(" ",n.title," ")}}let M6=(()=>{class t{constructor(n){this.todoService=n,this.todos=[]}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(n=>{this.todos=n.sort((r,i)=>r.isDone-i.isDone)})}onClick(n){n.value&&(this.todoService.addTodo(n.value),n.value="")}onStatusChange(n,r){this.todoService.updateTodoStatus(n,r)}onDelete(n){this.todoService.deleteTodo(n)}static#e=this.\u0275fac=function(r){return new(r||t)(je(N6))};static#t=this.\u0275cmp=Pa({type:t,selectors:[["app-todo"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-4","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border","py-0","rounded-3"],[1,"input-group"],["type","text","placeholder","Title Goes Here",1,"form-control","border-0","py-3","shadow-none"],["titleInput",""],["type","button",1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-secondary"],[1,"fa-solid","fa-trash-can",3,"click"]],template:function(r,i){if(1&r){const s=mI();Bs(0,"div",0)(1,"div",1)(2,"h1",2),DI(3," To Do List "),Us()(),Bs(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6),mh(8,"input",7,8),Bs(10,"button",9),_h("click",function(){Co(s);const a=function HC(t){return function To(t,e){return t[e]}(function xp(){return we.lFrame.contextLView}(),qe+t)}(9);return ic(i.onClick(a))}),mh(11,"i",10),Us()()(),function UC(t,e,n,r,i,s,o,a){const c=Z(),d=Ye(),p=t+qe,g=d.firstCreatePass?function gV(t,e,n,r,i,s,o,a,c){const d=e.consts,p=kc(e,t,4,o||null,Qi(d,a));tI(e,n,p,Qi(d,c)),Ro(e,p);const g=p.tView=eI(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,p),g.queries=e.queries.embeddedTView(p)),p}(p,d,c,e,n,r,i,s,o):d.data[p];qr(g,!1);const _=jC(d,c,g,t);bo()&&vg(d,c,_,g),ar(_,c),Ug(c,c[p]=uC(_,c,_,g)),ld(g)&&Jv(d,c,g),null!=o&&Xv(c,g,a)}(12,x6,6,2,"li",11),Us()()()}2&r&&(Vg(12),Kg("ngForOf",i.todos))},dependencies:[QR,JR],encapsulation:2})}return t})(),O6=(()=>{class t{constructor(){this.title="todoapp"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Pa({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(r,i){1&r&&(Bs(0,"div",0)(1,"div",1)(2,"div",2),mh(3,"app-todo"),Us()()())},dependencies:[M6]})}return t})();const k6_firebaseConfig={apiKey:"AIzaSyCKczXBKvUPf_ELCWCIza7Rk103rAv49hI",authDomain:"todoapp-dc127.firebaseapp.com",projectId:"todoapp-dc127",storageBucket:"todoapp-dc127.appspot.com",messagingSenderId:"386016005448",appId:"1:386016005448:web:c8fa2b7a481447b9caf77d"};let F6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t,bootstrap:[O6]});static#n=this.\u0275inj=Hi({imports:[f4,U4.initializeApp(k6_firebaseConfig),P6]})}return t})();d4().bootstrapModule(F6).catch(t=>console.error(t))},106:(Ei,mn,xe)=>{xe.d(mn,{Z:()=>yn});var I=xe(58),Te=xe(537),V=xe(534),Ae=xe(879);class at{constructor(Se,Fe){this._delegate=Se,this.firebase=Fe,(0,V._addComponent)(Se,new Te.wA("app-compat",()=>this,"PUBLIC")),this.container=Se.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this._delegate.automaticDataCollectionEnabled=Se}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Se=>{this._delegate.checkDestroyed(),Se()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(Se,Fe=V._DEFAULT_ENTRY_NAME){var vn;this._delegate.checkDestroyed();const In=this._delegate.container.getProvider(Se);return!In.isInitialized()&&"EXPLICIT"===(null===(vn=In.getComponent())||void 0===vn?void 0:vn.instantiationMode)&&In.initialize(),In.getImmediate({identifier:Fe})}_removeServiceInstance(Se,Fe=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Se).clearInstance(Fe)}_addComponent(Se){(0,V._addComponent)(this._delegate,Se)}_addOrOverwriteComponent(Se){(0,V._addOrOverwriteComponent)(this._delegate,Se)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const qt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function $e(){const st=function _n(st){const Se={},Fe={__esModule:!0,initializeApp:function At(Le,ln={}){const G=V.initializeApp(Le,ln);if((0,I.r3)(Se,G.name))return Se[G.name];const Ot=new st(G,Fe);return Se[G.name]=Ot,Ot},app:In,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function yt(Le){const ln=Le.name,G=ln.replace("-compat","");if(V._registerComponent(Le)&&"PUBLIC"===Le.type){const Ot=(Ct=In())=>{if("function"!=typeof Ct[G])throw qt.create("invalid-app-argument",{appName:ln});return Ct[G]()};void 0!==Le.serviceProps&&(0,I.ZB)(Ot,Le.serviceProps),Fe[G]=Ot,st.prototype[G]=function(...Ct){return this._getService.bind(this,ln).apply(this,Le.multipleInstances?Ct:[])}}return"PUBLIC"===Le.type?Fe[G]:null},removeApp:function vn(Le){delete Se[Le]},useAsService:function Qn(Le,ln){return"serverAuth"===ln?null:ln},modularAPIs:V}};function In(Le){if(!(0,I.r3)(Se,Le=Le||V._DEFAULT_ENTRY_NAME))throw qt.create("no-app",{appName:Le});return Se[Le]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function ot(){return Object.keys(Se).map(Le=>Se[Le])}}),In.App=st,Fe}(at);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:$e,extendNamespace:function Se(Fe){(0,I.ZB)(st,Fe)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),st}(),te=new Ae.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const yn=W;!function tt(st){(0,V.registerVersion)("@firebase/app-compat","0.2.22",st)}()},534:(Ei,mn,xe)=>{xe.r(mn),xe.d(mn,{FirebaseError:()=>Ae.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>Br,_addComponent:()=>Ui,_addOrOverwriteComponent:()=>Ln,_apps:()=>Jn,_clearComponents:()=>Ur,_components:()=>Di,_getProvider:()=>Ai,_registerComponent:()=>_s,_removeServiceInstance:()=>ys,deleteApp:()=>Vn,getApp:()=>vs,getApps:()=>ro,initializeApp:()=>Nu,onLog:()=>io,registerVersion:()=>$i,setLogLevel:()=>xu});var I=xe(861),Te=xe(537),V=xe(879),Ae=xe(58);const at=(L,S)=>S.some(Y=>L instanceof Y);let Mt,qt;const W=new WeakMap,te=new WeakMap,ge=new WeakMap,Be=new WeakMap,tt=new WeakMap;let Se={get(L,S,Y){if(L instanceof IDBTransaction){if("done"===S)return te.get(L);if("objectStoreNames"===S)return L.objectStoreNames||ge.get(L);if("store"===S)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return At(L[S])},set:(L,S,Y)=>(L[S]=Y,!0),has:(L,S)=>L instanceof IDBTransaction&&("done"===S||"store"===S)||S in L};function In(L){return"function"==typeof L?function vn(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $e(){return qt||(qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(L)?function(...S){return L.apply(ot(this),S),At(W.get(this))}:function(...S){return At(L.apply(ot(this),S))}:function(S,...Y){const ve=L.call(ot(this),S,...Y);return ge.set(ve,S.sort?S.sort():[S]),At(ve)}}(L):(L instanceof IDBTransaction&&function st(L){if(te.has(L))return;const S=new Promise((Y,ve)=>{const Me=()=>{L.removeEventListener("complete",Ue),L.removeEventListener("error",ee),L.removeEventListener("abort",ee)},Ue=()=>{Y(),Me()},ee=()=>{ve(L.error||new DOMException("AbortError","AbortError")),Me()};L.addEventListener("complete",Ue),L.addEventListener("error",ee),L.addEventListener("abort",ee)});te.set(L,S)}(L),at(L,function _n(){return Mt||(Mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(L,Se):L)}function At(L){if(L instanceof IDBRequest)return function yn(L){const S=new Promise((Y,ve)=>{const Me=()=>{L.removeEventListener("success",Ue),L.removeEventListener("error",ee)},Ue=()=>{Y(At(L.result)),Me()},ee=()=>{ve(L.error),Me()};L.addEventListener("success",Ue),L.addEventListener("error",ee)});return S.then(Y=>{Y instanceof IDBCursor&&W.set(Y,L)}).catch(()=>{}),tt.set(S,L),S}(L);if(Be.has(L))return Be.get(L);const S=In(L);return S!==L&&(Be.set(L,S),tt.set(S,L)),S}const ot=L=>tt.get(L),Le=["get","getKey","getAll","getAllKeys","count"],ln=["put","add","delete","clear"],G=new Map;function Ot(L,S){if(!(L instanceof IDBDatabase)||S in L||"string"!=typeof S)return;if(G.get(S))return G.get(S);const Y=S.replace(/FromIndex$/,""),ve=S!==Y,Me=ln.includes(Y);if(!(Y in(ve?IDBIndex:IDBObjectStore).prototype)||!Me&&!Le.includes(Y))return;const Ue=function(){var ee=(0,I.Z)(function*(Xt,...pe){const He=this.transaction(Xt,Me?"readwrite":"readonly");let pa=He.store;return ve&&(pa=pa.index(pe.shift())),(yield Promise.all([pa[Y](...pe),Me&&He.done]))[0]});return function(pe){return ee.apply(this,arguments)}}();return G.set(S,Ue),Ue}!function Fe(L){Se=L(Se)}(L=>({...L,get:(S,Y,ve)=>Ot(S,Y)||L.get(S,Y,ve),has:(S,Y)=>!!Ot(S,Y)||L.has(S,Y)}));class Ct{constructor(S){this.container=S}getPlatformInfoString(){return this.container.getProviders().map(Y=>{if(function Dn(L){const S=L.getComponent();return"VERSION"===S?.type}(Y)){const ve=Y.getImmediate();return`${ve.library}/${ve.version}`}return null}).filter(Y=>Y).join(" ")}}const wi="@firebase/app",dt=new V.Yd("@firebase/app"),Br="[DEFAULT]",ha={[wi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jn=new Map,Di=new Map;function Ui(L,S){try{L.container.addComponent(S)}catch(Y){dt.debug(`Component ${S.name} failed to register with FirebaseApp ${L.name}`,Y)}}function Ln(L,S){L.container.addOrOverwriteComponent(S)}function _s(L){const S=L.name;if(Di.has(S))return dt.debug(`There were multiple attempts to register component ${S}.`),!1;Di.set(S,L);for(const Y of Jn.values())Ui(Y,L);return!0}function Ai(L,S){const Y=L.container.getProvider("heartbeat").getImmediate({optional:!0});return Y&&Y.triggerHeartbeat(),L.container.getProvider(S)}function ys(L,S,Y=Br){Ai(L,S).clearInstance(Y)}function Ur(){Di.clear()}const br=new Ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Rr{constructor(S,Y,ve){this._isDeleted=!1,this._options=Object.assign({},S),this._config=Object.assign({},Y),this._name=Y.name,this._automaticDataCollectionEnabled=Y.automaticDataCollectionEnabled,this._container=ve,this.container.addComponent(new Te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(S){this.checkDestroyed(),this._automaticDataCollectionEnabled=S}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(S){this._isDeleted=S}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}const ji="10.5.2";function Nu(L,S={}){let Y=L;"object"!=typeof S&&(S={name:S});const ve=Object.assign({name:Br,automaticDataCollectionEnabled:!1},S),Me=ve.name;if("string"!=typeof Me||!Me)throw br.create("bad-app-name",{appName:String(Me)});if(Y||(Y=(0,Ae.aH)()),!Y)throw br.create("no-options");const Ue=Jn.get(Me);if(Ue){if((0,Ae.vZ)(Y,Ue.options)&&(0,Ae.vZ)(ve,Ue.config))return Ue;throw br.create("duplicate-app",{appName:Me})}const ee=new Te.H0(Me);for(const pe of Di.values())ee.addComponent(pe);const Xt=new Rr(Y,ve,ee);return Jn.set(Me,Xt),Xt}function vs(L=Br){const S=Jn.get(L);if(!S&&L===Br&&(0,Ae.aH)())return Nu();if(!S)throw br.create("no-app",{appName:L});return S}function ro(){return Array.from(Jn.values())}function Vn(L){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,I.Z)(function*(L){const S=L.name;Jn.has(S)&&(Jn.delete(S),yield Promise.all(L.container.getProviders().map(Y=>Y.delete())),L.isDeleted=!0)})).apply(this,arguments)}function $i(L,S,Y){var ve;let Me=null!==(ve=ha[L])&&void 0!==ve?ve:L;Y&&(Me+=`-${Y}`);const Ue=Me.match(/\s|\//),ee=S.match(/\s|\//);if(Ue||ee){const Xt=[`Unable to register library "${Me}" with version "${S}":`];return Ue&&Xt.push(`library name "${Me}" contains illegal characters (whitespace or "/")`),Ue&&ee&&Xt.push("and"),ee&&Xt.push(`version name "${S}" contains illegal characters (whitespace or "/")`),void dt.warn(Xt.join(" "))}_s(new Te.wA(`${Me}-version`,()=>({library:Me,version:S}),"VERSION"))}function io(L,S){if(null!==L&&"function"!=typeof L)throw br.create("invalid-log-argument");(0,V.Am)(L,S)}function xu(L){(0,V.Ub)(L)}const fa="firebase-heartbeat-database",so=1,D="firebase-heartbeat-store";let w=null;function C(){return w||(w=function yt(L,S,{blocked:Y,upgrade:ve,blocking:Me,terminated:Ue}={}){const ee=indexedDB.open(L,S),Xt=At(ee);return ve&&ee.addEventListener("upgradeneeded",pe=>{ve(At(ee.result),pe.oldVersion,pe.newVersion,At(ee.transaction),pe)}),Y&&ee.addEventListener("blocked",pe=>Y(pe.oldVersion,pe.newVersion,pe)),Xt.then(pe=>{Ue&&pe.addEventListener("close",()=>Ue()),Me&&pe.addEventListener("versionchange",He=>Me(He.oldVersion,He.newVersion,He))}).catch(()=>{}),Xt}(fa,so,{upgrade:(L,S)=>{0===S&&L.createObjectStore(D)}}).catch(L=>{throw br.create("idb-open",{originalErrorMessage:L.message})})),w}function x(){return(x=(0,I.Z)(function*(L){try{return yield(yield C()).transaction(D).objectStore(D).get(et(L))}catch(S){if(S instanceof Ae.ZR)dt.warn(S.message);else{const Y=br.create("idb-get",{originalErrorMessage:S?.message});dt.warn(Y.message)}}})).apply(this,arguments)}function ne(L,S){return be.apply(this,arguments)}function be(){return(be=(0,I.Z)(function*(L,S){try{const ve=(yield C()).transaction(D,"readwrite");yield ve.objectStore(D).put(S,et(L)),yield ve.done}catch(Y){if(Y instanceof Ae.ZR)dt.warn(Y.message);else{const ve=br.create("idb-set",{originalErrorMessage:Y?.message});dt.warn(ve.message)}}})).apply(this,arguments)}function et(L){return`${L.name}!${L.options.appId}`}class gr{constructor(S){this.container=S,this._heartbeatsCache=null;const Y=this.container.getProvider("app").getImmediate();this._storage=new pt(Y),this._heartbeatsCachePromise=this._storage.read().then(ve=>(this._heartbeatsCache=ve,ve))}triggerHeartbeat(){var S=this;return(0,I.Z)(function*(){const ve=S.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Me=me();if(null===S._heartbeatsCache&&(S._heartbeatsCache=yield S._heartbeatsCachePromise),S._heartbeatsCache.lastSentHeartbeatDate!==Me&&!S._heartbeatsCache.heartbeats.some(Ue=>Ue.date===Me))return S._heartbeatsCache.heartbeats.push({date:Me,agent:ve}),S._heartbeatsCache.heartbeats=S._heartbeatsCache.heartbeats.filter(Ue=>{const ee=new Date(Ue.date).valueOf();return Date.now()-ee<=2592e6}),S._storage.overwrite(S._heartbeatsCache)})()}getHeartbeatsHeader(){var S=this;return(0,I.Z)(function*(){if(null===S._heartbeatsCache&&(yield S._heartbeatsCachePromise),null===S._heartbeatsCache||0===S._heartbeatsCache.heartbeats.length)return"";const Y=me(),{heartbeatsToSend:ve,unsentEntries:Me}=function hn(L,S=1024){const Y=[];let ve=L.slice();for(const Me of L){const Ue=Y.find(ee=>ee.agent===Me.agent);if(Ue){if(Ue.dates.push(Me.date),Ci(Y)>S){Ue.dates.pop();break}}else if(Y.push({agent:Me.agent,dates:[Me.date]}),Ci(Y)>S){Y.pop();break}ve=ve.slice(1)}return{heartbeatsToSend:Y,unsentEntries:ve}}(S._heartbeatsCache.heartbeats),Ue=(0,Ae.L)(JSON.stringify({version:2,heartbeats:ve}));return S._heartbeatsCache.lastSentHeartbeatDate=Y,Me.length>0?(S._heartbeatsCache.heartbeats=Me,yield S._storage.overwrite(S._heartbeatsCache)):(S._heartbeatsCache.heartbeats=[],S._storage.overwrite(S._heartbeatsCache)),Ue})()}}function me(){return(new Date).toISOString().substring(0,10)}class pt{constructor(S){this.app=S,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Ae.hl)()&&(0,Ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var S=this;return(0,I.Z)(function*(){return(yield S._canUseIndexedDBPromise)&&(yield function $(L){return x.apply(this,arguments)}(S.app))||{heartbeats:[]}})()}overwrite(S){var Y=this;return(0,I.Z)(function*(){var ve;if(yield Y._canUseIndexedDBPromise){const Ue=yield Y.read();return ne(Y.app,{lastSentHeartbeatDate:null!==(ve=S.lastSentHeartbeatDate)&&void 0!==ve?ve:Ue.lastSentHeartbeatDate,heartbeats:S.heartbeats})}})()}add(S){var Y=this;return(0,I.Z)(function*(){var ve;if(yield Y._canUseIndexedDBPromise){const Ue=yield Y.read();return ne(Y.app,{lastSentHeartbeatDate:null!==(ve=S.lastSentHeartbeatDate)&&void 0!==ve?ve:Ue.lastSentHeartbeatDate,heartbeats:[...Ue.heartbeats,...S.heartbeats]})}})()}}function Ci(L){return(0,Ae.L)(JSON.stringify({version:2,heartbeats:L})).length}!function Is(L){_s(new Te.wA("platform-logger",S=>new Ct(S),"PRIVATE")),_s(new Te.wA("heartbeat",S=>new gr(S),"PRIVATE")),$i(wi,"0.9.22",L),$i(wi,"0.9.22","esm2017"),$i("fire-js","")}("")},537:(Ei,mn,xe)=>{xe.d(mn,{H0:()=>_n,wA:()=>V});var I=xe(861),Te=xe(58);class V{constructor(W,te,ge){this.name=W,this.instanceFactory=te,this.type=ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const Ae="[DEFAULT]";class at{constructor(W,te){this.name=W,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const te=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(te)){const ge=new Te.BH;if(this.instancesDeferred.set(te,ge),this.isInitialized(te)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:te});Be&&ge.resolve(Be)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(W){var te;const ge=this.normalizeInstanceIdentifier(W?.identifier),Be=null!==(te=W?.optional)&&void 0!==te&&te;if(!this.isInitialized(ge)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ge})}catch(tt){if(Be)return null;throw tt}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function qt($e){return"EAGER"===$e.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:Ae})}catch{}for(const[te,ge]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(te);try{const tt=this.getOrInitializeService({instanceIdentifier:Be});ge.resolve(tt)}catch{}}}}clearInstance(W=Ae){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,I.Z)(function*(){const te=Array.from(W.instances.values());yield Promise.all([...te.filter(ge=>"INTERNAL"in ge).map(ge=>ge.INTERNAL.delete()),...te.filter(ge=>"_delete"in ge).map(ge=>ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=Ae){return this.instances.has(W)}getOptions(W=Ae){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:te={}}=W,ge=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ge))throw Error(`${this.name}(${ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:ge,options:te});for(const[tt,yn]of this.instancesDeferred.entries())ge===this.normalizeInstanceIdentifier(tt)&&yn.resolve(Be);return Be}onInit(W,te){var ge;const Be=this.normalizeInstanceIdentifier(te),tt=null!==(ge=this.onInitCallbacks.get(Be))&&void 0!==ge?ge:new Set;tt.add(W),this.onInitCallbacks.set(Be,tt);const yn=this.instances.get(Be);return yn&&W(yn,Be),()=>{tt.delete(W)}}invokeOnInitCallbacks(W,te){const ge=this.onInitCallbacks.get(te);if(ge)for(const Be of ge)try{Be(W,te)}catch{}}getOrInitializeService({instanceIdentifier:W,options:te={}}){let ge=this.instances.get(W);if(!ge&&this.component&&(ge=this.component.instanceFactory(this.container,{instanceIdentifier:($e=W,$e===Ae?void 0:$e),options:te}),this.instances.set(W,ge),this.instancesOptions.set(W,te),this.invokeOnInitCallbacks(ge,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ge)}catch{}var $e;return ge||null}normalizeInstanceIdentifier(W=Ae){return this.component?this.component.multipleInstances?W:Ae:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _n{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const te=this.getProvider(W.name);if(te.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);te.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const te=new at(W,this);return this.providers.set(W,te),te}getProviders(){return Array.from(this.providers.values())}}},879:(Ei,mn,xe)=>{xe.d(mn,{Am:()=>$e,Ub:()=>_n,Yd:()=>qt,in:()=>Te});const I=[];var Te=function(W){return W[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",W}(Te||{});const V={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Ae=Te.INFO,at={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Mt=(W,te,...ge)=>{if(te<W.logLevel)return;const Be=(new Date).toISOString(),tt=at[te];if(!tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[tt](`[${Be}]  ${W.name}:`,...ge)};class qt{constructor(te){this.name=te,this._logLevel=Ae,this._logHandler=Mt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in Te))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?V[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...te),this._logHandler(this,Te.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...te),this._logHandler(this,Te.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...te),this._logHandler(this,Te.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...te),this._logHandler(this,Te.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...te),this._logHandler(this,Te.ERROR,...te)}}function _n(W){I.forEach(te=>{te.setLogLevel(W)})}function $e(W,te){for(const ge of I){let Be=null;te&&te.level&&(Be=V[te.level]),ge.userLogHandler=null===W?null:(tt,yn,...st)=>{const Se=st.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");yn>=(Be??tt.logLevel)&&W({level:Te[yn].toLowerCase(),message:Se,args:st,type:tt.name})}}}},290:(Ei,mn,xe)=>{xe.r(mn);var I=xe(861),Te=xe(106),V=xe(58),Ae=xe(534),at=xe(879),Mt=xe(582),qt=xe(537);const $e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const yn=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},st=function tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Se=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vn=new at.Yd("@firebase/auth");function At(h,...u){vn.logLevel<=at.in.ERROR&&vn.error(`Auth (${Ae.SDK_VERSION}): ${h}`,...u)}function ot(h,...u){throw ln(h,...u)}function yt(h,...u){return ln(h,...u)}function Qn(h,u,l){const f=Object.assign(Object.assign({},st()),{[u]:l});return new V.LL("auth","Firebase",f).create(u,{appName:h.name})}function Le(h,u,l){if(!(u instanceof l))throw l.name!==u.constructor.name&&ot(h,"argument-error"),Qn(h,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ln(h,...u){if("string"!=typeof h){const l=u[0],f=[...u.slice(1)];return f[0]&&(f[0].appName=h.name),h._errorFactory.create(l,...f)}return Se.create(h,...u)}function G(h,u,...l){if(!h)throw ln(u,...l)}function Ot(h){const u="INTERNAL ASSERTION FAILED: "+h;throw At(u),new Error(u)}function Ct(h,u){h||Ot(u)}function Dn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function wi(){return"http:"===Xr()||"https:"===Xr()}function Xr(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class ei{constructor(u,l){this.shortDelay=u,this.longDelay=l,Ct(l>u,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wi()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function M(h,u){Ct(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return u?`${l}${u.startsWith("/")?u.slice(1):u}`:l}class F{static initialize(u,l,f){this.fetchImpl=u,l&&(this.headersImpl=l),f&&(this.responseImpl=f)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},q=new ei(3e4,6e4);function K(h,u){return h.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:h.tenantId}):u}function U(h,u,l,f){return fe.apply(this,arguments)}function fe(){return(fe=(0,I.Z)(function*(h,u,l,f,m={}){return ze(h,m,(0,I.Z)(function*(){let y={},T={};f&&("GET"===u?T=f:y={body:JSON.stringify(f)});const P=(0,V.xO)(Object.assign({key:h.config.apiKey},T)).slice(1),H=yield h._getAdditionalHeaders();return H["Content-Type"]="application/json",h.languageCode&&(H["X-Firebase-Locale"]=h.languageCode),F.fetch()(kt(h,h.config.apiHost,l,P),Object.assign({method:u,headers:H,referrerPolicy:"no-referrer"},y))}))})).apply(this,arguments)}function ze(h,u,l){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,I.Z)(function*(h,u,l){h._canInitEmulator=!1;const f=Object.assign(Object.assign({},j),u);try{const m=new An(h),y=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const T=yield y.json();if("needConfirmation"in T)throw dn(h,"account-exists-with-different-credential",T);if(y.ok&&!("errorMessage"in T))return T;{const P=y.ok?T.errorMessage:T.error.message,[H,re]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===H)throw dn(h,"credential-already-in-use",T);if("EMAIL_EXISTS"===H)throw dn(h,"email-already-in-use",T);if("USER_DISABLED"===H)throw dn(h,"user-disabled",T);const he=f[H]||H.toLowerCase().replace(/[_\s]+/g,"-");if(re)throw Qn(h,he,re);ot(h,he)}}catch(m){if(m instanceof V.ZR)throw m;ot(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function _e(h,u,l,f){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,I.Z)(function*(h,u,l,f,m={}){const y=yield U(h,u,l,f,m);return"mfaPendingCredential"in y&&ot(h,"multi-factor-auth-required",{_serverResponse:y}),y})).apply(this,arguments)}function kt(h,u,l,f){const m=`${u}${l}?${f}`;return h.config.emulator?M(h.config,m):`${h.config.apiScheme}://${m}`}function Et(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class An{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((l,f)=>{this.timer=setTimeout(()=>f(yt(this.auth,"network-request-failed")),q.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dn(h,u,l){const f={appName:h.name};l.email&&(f.email=l.email),l.phoneNumber&&(f.phoneNumber=l.phoneNumber);const m=yt(h,u,f);return m.customData._tokenResponse=l,m}function kn(h){return void 0!==h&&void 0!==h.getResponse}function Yn(h){return void 0!==h&&void 0!==h.enterprise}class pr{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===u)return Et(l.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Ti(){return(Ti=(0,I.Z)(function*(h){return(yield U(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fn(h,u){return to.apply(this,arguments)}function to(){return(to=(0,I.Z)(function*(h,u){return U(h,"GET","/v2/recaptchaConfig",K(h,u))})).apply(this,arguments)}function Br(){return(Br=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Jn(){return(Jn=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ui(){return(Ui=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Ln(h){if(h)try{const u=new Date(Number(h));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function ys(){return(ys=(0,I.Z)(function*(h,u=!1){const l=(0,V.m9)(h),f=yield l.getIdToken(u),m=no(f);G(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const y="object"==typeof m.firebase?m.firebase:void 0,T=y?.sign_in_provider;return{claims:m,token:f,authTime:Ln(Ur(m.auth_time)),issuedAtTime:Ln(Ur(m.iat)),expirationTime:Ln(Ur(m.exp)),signInProvider:T||null,signInSecondFactor:y?.sign_in_second_factor||null}})).apply(this,arguments)}function Ur(h){return 1e3*Number(h)}function no(h){const[u,l,f]=h.split(".");if(void 0===u||void 0===l||void 0===f)return At("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,V.tV)(l);return m?JSON.parse(m):(At("Failed to decode base64 JWT payload"),null)}catch(m){return At("Caught error parsing JWT payload as JSON",m?.toString()),null}}function Rr(h,u){return ji.apply(this,arguments)}function ji(){return(ji=(0,I.Z)(function*(h,u,l=!1){if(l)return u;try{return yield u}catch(f){throw f instanceof V.ZR&&function Nu({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(f)&&h.auth.currentUser===h&&(yield h.auth.signOut()),f}})).apply(this,arguments)}class vs{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var l;if(u){const f=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),f}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(u=!1){var l=this;if(!this.isRunning)return;const f=this.getInterval(u);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),f)}iteration(){var u=this;return(0,I.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&u.schedule(!0))}u.schedule()})()}}class ro{constructor(u,l){this.createdAt=u,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ln(this.lastLoginAt),this.creationTime=Ln(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vn(h){return Xn.apply(this,arguments)}function Xn(){return Xn=(0,I.Z)(function*(h){var u;const l=h.auth,f=yield h.getIdToken(),m=yield Rr(h,function Di(h,u){return Ui.apply(this,arguments)}(l,{idToken:f}));G(m?.users.length,l,"internal-error");const y=m.users[0];h._notifyReloadListener(y);const T=null!==(u=y.providerUserInfo)&&void 0!==u&&u.length?function fa(h){return h.map(u=>{var{providerId:l}=u,f=(0,Mt._T)(u,["providerId"]);return{providerId:l,uid:f.rawId||"",displayName:f.displayName||null,email:f.email||null,phoneNumber:f.phoneNumber||null,photoURL:f.photoUrl||null}})}(y.providerUserInfo):[],P=function xu(h,u){return[...h.filter(f=>!u.some(m=>m.providerId===f.providerId)),...u]}(h.providerData,T),he=!!h.isAnonymous&&!(h.email&&y.passwordHash||P?.length),ce={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:P,metadata:new ro(y.createdAt,y.lastLoginAt),isAnonymous:he};Object.assign(h,ce)}),Xn.apply(this,arguments)}function io(){return(io=(0,I.Z)(function*(h){const u=(0,V.m9)(h);yield Vn(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function D(){return(D=(0,I.Z)(function*(h,u){const l=yield ze(h,{},(0,I.Z)(function*(){const f=(0,V.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:m,apiKey:y}=h.config,T=kt(h,m,"/v1/token",`key=${y}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(T,{method:"POST",headers:P,body:f})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}class w{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){G(u.idToken,"internal-error"),G(typeof u.idToken<"u","internal-error"),G(typeof u.refreshToken<"u","internal-error");const l="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function br(h){const u=no(h);return G(u,"internal-error"),G(typeof u.exp<"u","internal-error"),G(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,l)}getToken(u,l=!1){var f=this;return(0,I.Z)(function*(){return G(!f.accessToken||f.refreshToken,u,"user-token-expired"),l||!f.accessToken||f.isExpired?f.refreshToken?(yield f.refresh(u,f.refreshToken),f.accessToken):null:f.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,l){var f=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:y,expiresIn:T}=yield function so(h,u){return D.apply(this,arguments)}(u,l);f.updateTokensAndExpiration(m,y,Number(T))})()}updateTokensAndExpiration(u,l,f){this.refreshToken=l||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*f}static fromJSON(u,l){const{refreshToken:f,accessToken:m,expirationTime:y}=l,T=new w;return f&&(G("string"==typeof f,"internal-error",{appName:u}),T.refreshToken=f),m&&(G("string"==typeof m,"internal-error",{appName:u}),T.accessToken=m),y&&(G("number"==typeof y,"internal-error",{appName:u}),T.expirationTime=y),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new w,this.toJSON())}_performRefresh(){return Ot("not implemented")}}function C(h,u){G("string"==typeof h||typeof h>"u","internal-error",{appName:u})}class ${constructor(u){var{uid:l,auth:f,stsTokenManager:m}=u,y=(0,Mt._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=f,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=y.displayName||null,this.email=y.email||null,this.emailVerified=y.emailVerified||!1,this.phoneNumber=y.phoneNumber||null,this.photoURL=y.photoURL||null,this.isAnonymous=y.isAnonymous||!1,this.tenantId=y.tenantId||null,this.providerData=y.providerData?[...y.providerData]:[],this.metadata=new ro(y.createdAt||void 0,y.lastLoginAt||void 0)}getIdToken(u){var l=this;return(0,I.Z)(function*(){const f=yield Rr(l,l.stsTokenManager.getToken(l.auth,u));return G(f,l.auth,"internal-error"),l.accessToken!==f&&(l.accessToken=f,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),f})()}getIdTokenResult(u){return function Ai(h){return ys.apply(this,arguments)}(this,u)}reload(){return function $i(h){return io.apply(this,arguments)}(this)}_assign(u){this!==u&&(G(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(l=>Object.assign({},l)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const l=new $(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(u){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,l=!1){var f=this;return(0,I.Z)(function*(){let m=!1;u.idToken&&u.idToken!==f.stsTokenManager.accessToken&&(f.stsTokenManager.updateFromServerResponse(u),m=!0),l&&(yield Vn(f)),yield f.auth._persistUserIfCurrent(f),m&&f.auth._notifyListenersIfCurrent(f)})()}delete(){var u=this;return(0,I.Z)(function*(){const l=yield u.getIdToken();return yield Rr(u,function da(h,u){return Br.apply(this,arguments)}(u.auth,{idToken:l})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,l){var f,m,y,T,P,H,re,he;const ce=null!==(f=l.displayName)&&void 0!==f?f:void 0,gt=null!==(m=l.email)&&void 0!==m?m:void 0,Gr=null!==(y=l.phoneNumber)&&void 0!==y?y:void 0,Zd=null!==(T=l.photoURL)&&void 0!==T?T:void 0,Kd=null!==(P=l.tenantId)&&void 0!==P?P:void 0,Qd=null!==(H=l._redirectEventId)&&void 0!==H?H:void 0,rv=null!==(re=l.createdAt)&&void 0!==re?re:void 0,sg=null!==(he=l.lastLoginAt)&&void 0!==he?he:void 0,{uid:Yd,emailVerified:og,isAnonymous:Qa,providerData:Ec,stsTokenManager:ag}=l;G(Yd&&ag,u,"internal-error");const ug=w.fromJSON(this.name,ag);G("string"==typeof Yd,u,"internal-error"),C(ce,u.name),C(gt,u.name),G("boolean"==typeof og,u,"internal-error"),G("boolean"==typeof Qa,u,"internal-error"),C(Gr,u.name),C(Zd,u.name),C(Kd,u.name),C(Qd,u.name),C(rv,u.name),C(sg,u.name);const cg=new $({uid:Yd,auth:u,email:gt,emailVerified:og,displayName:ce,isAnonymous:Qa,photoURL:Zd,phoneNumber:Gr,tenantId:Kd,stsTokenManager:ug,createdAt:rv,lastLoginAt:sg});return Ec&&Array.isArray(Ec)&&(cg.providerData=Ec.map(lg=>Object.assign({},lg))),Qd&&(cg._redirectEventId=Qd),cg}static _fromIdTokenResponse(u,l,f=!1){return(0,I.Z)(function*(){const m=new w;m.updateFromServerResponse(l);const y=new $({uid:l.localId,auth:u,stsTokenManager:m,isAnonymous:f});return yield Vn(y),y})()}}const x=new Map;function ne(h){Ct(h instanceof Function,"Expected a class definition");let u=x.get(h);return u?(Ct(u instanceof h,"Instance stored in cache mismatched with class"),u):(u=new h,x.set(h,u),u)}const et=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,f){var m=this;return(0,I.Z)(function*(){m.storage[l]=f})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=f.storage[l];return void 0===m?null:m})()}_remove(l){var f=this;return(0,I.Z)(function*(){delete f.storage[l]})()}_addListener(l,f){}_removeListener(l,f){}}return h.type="NONE",h})();function ut(h,u,l){return`firebase:${h}:${u}:${l}`}class Ft{constructor(u,l,f){this.persistence=u,this.auth=l,this.userKey=f;const{config:m,name:y}=this.auth;this.fullUserKey=ut(this.userKey,m.apiKey,y),this.fullPersistenceKey=ut("persistence",m.apiKey,y),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,I.Z)(function*(){const l=yield u.persistence._get(u.fullUserKey);return l?$._fromJSON(u.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var l=this;return(0,I.Z)(function*(){if(l.persistence===u)return;const f=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=u,f?l.setCurrentUser(f):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,l,f="authUser"){return(0,I.Z)(function*(){if(!l.length)return new Ft(ne(et),u,f);const m=(yield Promise.all(l.map(function(){var re=(0,I.Z)(function*(he){if(yield he._isAvailable())return he});return function(he){return re.apply(this,arguments)}}()))).filter(re=>re);let y=m[0]||ne(et);const T=ut(f,u.config.apiKey,u.name);let P=null;for(const re of l)try{const he=yield re._get(T);if(he){const ce=$._fromJSON(u,he);re!==y&&(P=ce),y=re;break}}catch{}const H=m.filter(re=>re._shouldAllowMigration);return y._shouldAllowMigration&&H.length?(y=H[0],P&&(yield y._set(T,P.toJSON())),yield Promise.all(l.map(function(){var re=(0,I.Z)(function*(he){if(he!==y)try{yield he._remove(T)}catch{}});return function(he){return re.apply(this,arguments)}}())),new Ft(y,u,f)):new Ft(y,u,f)})()}}function gr(h){const u=h.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Ci(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(me(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(L(u))return"Blackberry";if(S(u))return"Webos";if(hn(u))return"Safari";if((u.includes("chrome/")||pt(u))&&!u.includes("edge/"))return"Chrome";if(Is(u))return"Android";{const f=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===f?.length)return f[1]}return"Other"}function me(h=(0,V.z$)()){return/firefox\//i.test(h)}function hn(h=(0,V.z$)()){const u=h.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function pt(h=(0,V.z$)()){return/crios\//i.test(h)}function Ci(h=(0,V.z$)()){return/iemobile/i.test(h)}function Is(h=(0,V.z$)()){return/android/i.test(h)}function L(h=(0,V.z$)()){return/blackberry/i.test(h)}function S(h=(0,V.z$)()){return/webos/i.test(h)}function Y(h=(0,V.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function ee(h=(0,V.z$)()){return Y(h)||Is(h)||S(h)||L(h)||/windows phone/i.test(h)||Ci(h)}function pe(h,u=[]){let l;switch(h){case"Browser":l=gr((0,V.z$)());break;case"Worker":l=`${gr((0,V.z$)())}-${h}`;break;default:l=h}const f=u.length?u.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ae.SDK_VERSION}/${f}`}class He{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,l){const f=y=>new Promise((T,P)=>{try{T(u(y))}catch(H){P(H)}});f.onAbort=l,this.queue.push(f);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(u){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===u)return;const f=[];try{for(const m of l.queue)yield m(u),m.onAbort&&f.push(m.onAbort)}catch(m){f.reverse();for(const y of f)try{y()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function Kf(){return(Kf=(0,I.Z)(function*(h,u={}){return U(h,"GET","/v2/passwordPolicy",K(h,u))})).apply(this,arguments)}class Hl{constructor(u){var l,f,m,y;const T=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=T.minPasswordLength)&&void 0!==l?l:6,T.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=T.maxPasswordLength),void 0!==T.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=T.containsLowercaseCharacter),void 0!==T.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=T.containsUppercaseCharacter),void 0!==T.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=T.containsNumericCharacter),void 0!==T.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=T.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(f=u.allowedNonAlphanumericCharacters)||void 0===f?void 0:f.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(y=u.forceUpgradeOnSignin)&&void 0!==y&&y,this.schemaVersion=u.schemaVersion}validatePassword(u){var l,f,m,y,T,P;const H={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,H),this.validatePasswordCharacterOptions(u,H),H.isValid&&(H.isValid=null===(l=H.meetsMinPasswordLength)||void 0===l||l),H.isValid&&(H.isValid=null===(f=H.meetsMaxPasswordLength)||void 0===f||f),H.isValid&&(H.isValid=null===(m=H.containsLowercaseLetter)||void 0===m||m),H.isValid&&(H.isValid=null===(y=H.containsUppercaseLetter)||void 0===y||y),H.isValid&&(H.isValid=null===(T=H.containsNumericCharacter)||void 0===T||T),H.isValid&&(H.isValid=null===(P=H.containsNonAlphanumericCharacter)||void 0===P||P),H}validatePasswordLengthOptions(u,l){const f=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;f&&(l.meetsMinPasswordLength=u.length>=f),m&&(l.meetsMaxPasswordLength=u.length<=m)}validatePasswordCharacterOptions(u,l){let f;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<u.length;m++)f=u.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(u,l,f,m,y){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=y))}}class mr{constructor(u,l,f,m){this.app=u,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qf(this),this.idTokenSubscription=new Qf(this),this.beforeStateQueue=new He(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Se,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(u,l){var f=this;return l&&(this._popupRedirectResolver=ne(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,y;if(!f._deleted&&(f.persistenceManager=yield Ft.create(f,u),!f._deleted)){if(null!==(m=f._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield f._popupRedirectResolver._initialize(f)}catch{}yield f.initializeCurrentUser(l),f.lastNotifiedUid=(null===(y=f.currentUser)||void 0===y?void 0:y.uid)||null,!f._deleted&&(f._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,I.Z)(function*(){if(u._deleted)return;const l=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||l){if(u.currentUser&&l&&u.currentUser.uid===l.uid)return u._currentUser._assign(l),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(l,!0)}})()}initializeCurrentUser(u){var l=this;return(0,I.Z)(function*(){var f;const m=yield l.assertedPersistence.getCurrentUser();let y=m,T=!1;if(u&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(f=l.redirectUser)||void 0===f?void 0:f._redirectEventId,H=y?._redirectEventId,re=yield l.tryRedirectSignIn(u);(!P||P===H)&&re?.user&&(y=re.user,T=!0)}if(!y)return l.directlySetCurrentUser(null);if(!y._redirectEventId){if(T)try{yield l.beforeStateQueue.runMiddleware(y)}catch(P){y=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return y?l.reloadAndSetCurrentUserOrClear(y):l.directlySetCurrentUser(null)}return G(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===y._redirectEventId?l.directlySetCurrentUser(y):l.reloadAndSetCurrentUserOrClear(y)})()}tryRedirectSignIn(u){var l=this;return(0,I.Z)(function*(){let f=null;try{f=yield l._popupRedirectResolver._completeRedirectFn(l,u,!0)}catch{yield l._setRedirectUser(null)}return f})()}reloadAndSetCurrentUserOrClear(u){var l=this;return(0,I.Z)(function*(){try{yield Vn(u)}catch(f){if("auth/network-request-failed"!==f?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function ms(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var u=this;return(0,I.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var l=this;return(0,I.Z)(function*(){const f=u?(0,V.m9)(u):null;return f&&G(f.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(f&&f._clone(l))})()}_updateCurrentUser(u,l=!1){var f=this;return(0,I.Z)(function*(){if(!f._deleted)return u&&G(f.tenantId===u.tenantId,f,"tenant-id-mismatch"),l||(yield f.beforeStateQueue.runMiddleware(u)),f.queue((0,I.Z)(function*(){yield f.directlySetCurrentUser(u),f.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,I.Z)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(ne(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const f=l._getPasswordPolicyInternal();return f.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):f.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,I.Z)(function*(){const l=yield function pa(h){return Kf.apply(this,arguments)}(u),f=new Hl(l);null===u.tenantId?u._projectPasswordPolicy=f:u._tenantPasswordPolicies[u.tenantId]=f})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new V.LL("auth","Firebase",u())}onAuthStateChanged(u,l,f){return this.registerStateListener(this.authStateSubscription,u,l,f)}beforeAuthStateChanged(u,l){return this.beforeStateQueue.pushCallback(u,l)}onIdTokenChanged(u,l,f){return this.registerStateListener(this.idTokenSubscription,u,l,f)}authStateReady(){return new Promise((u,l)=>{if(this.currentUser)u();else{const f=this.onAuthStateChanged(()=>{f(),u()},l)}})}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,l){var f=this;return(0,I.Z)(function*(){const m=yield f.getOrInitRedirectPersistenceManager(l);return null===u?m.removeCurrentUser():m.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const f=u&&ne(u)||l._popupRedirectResolver;G(f,l,"argument-error"),l.redirectPersistenceManager=yield Ft.create(l,[ne(f._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(u){var l=this;return(0,I.Z)(function*(){var f,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(f=l._currentUser)||void 0===f?void 0:f._redirectEventId)===u?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===u?l.redirectUser:null})()}_persistUserIfCurrent(u){var l=this;return(0,I.Z)(function*(){if(u===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const f=null!==(l=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==f&&(this.lastNotifiedUid=f,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,l,f,m){if(this._deleted)return()=>{};const y="function"==typeof l?l:l.next.bind(l);let T=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(P,this,"internal-error"),P.then(()=>{T||y(this.currentUser)}),"function"==typeof l){const H=u.addObserver(l,f,m);return()=>{T=!0,H()}}{const H=u.addObserver(l);return()=>{T=!0,H()}}}directlySetCurrentUser(u){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==u&&l._currentUser._stopProactiveRefresh(),u&&l.isProactiveRefreshEnabled&&u._startProactiveRefresh(),l.currentUser=u,u?yield l.assertedPersistence.setCurrentUser(u):yield l.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=pe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,I.Z)(function*(){var l;const f={"X-Client-Version":u.clientVersion};u.app.options.appId&&(f["X-Firebase-gmpid"]=u.app.options.appId);const m=yield null===(l=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(f["X-Firebase-Client"]=m);const y=yield u._getAppCheckToken();return y&&(f["X-Firebase-AppCheck"]=y),f})()}_getAppCheckToken(){var u=this;return(0,I.Z)(function*(){var l;const f=yield null===(l=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return f?.error&&function In(h,...u){vn.logLevel<=at.in.WARN&&vn.warn(`Auth (${Ae.SDK_VERSION}): ${h}`,...u)}(`Error while retrieving App Check token: ${f.error}`),f?.token})()}}function Lt(h){return(0,V.m9)(h)}class Qf{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,V.ne)(l=>this.observer=l)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(h){return new Promise((u,l)=>{const f=document.createElement("script");f.setAttribute("src",h),f.onload=u,f.onerror=m=>{const y=yt("internal-error");y.customData=m,l(y)},f.type="text/javascript",f.charset="UTF-8",function jD(){var h,u;return null!==(u=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==u?u:document}().appendChild(f)})}function ry(h){return`__${h}${Math.floor(1e6*Math.random())}`}class Yf{constructor(u){this.type="recaptcha-enterprise",this.auth=Lt(u)}verify(u="verify",l=!1){var f=this;return(0,I.Z)(function*(){function y(){return y=(0,I.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var H=(0,I.Z)(function*(re,he){Fn(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ce=>{if(void 0!==ce.recaptchaKey){const gt=new pr(ce);return null==P.tenantId?P._agentRecaptchaConfig=gt:P._tenantRecaptchaConfigs[P.tenantId]=gt,re(gt.siteKey)}he(new Error("recaptcha Enterprise site key undefined"))}).catch(ce=>{he(ce)})});return function(re,he){return H.apply(this,arguments)}}())}),y.apply(this,arguments)}function T(P,H,re){const he=window.grecaptcha;Yn(he)?he.enterprise.ready(()=>{he.enterprise.execute(P,{action:u}).then(ce=>{H(ce)}).catch(()=>{H("NO_RECAPTCHA")})}):re(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,H)=>{(function m(P){return y.apply(this,arguments)})(f.auth).then(re=>{if(!l&&Yn(window.grecaptcha))T(re,P,H);else{if(typeof window>"u")return void H(new Error("RecaptchaVerifier is only supported in browser"));Si("https://www.google.com/recaptcha/enterprise.js?render="+re).then(()=>{T(re,P,H)}).catch(he=>{H(he)})}}).catch(re=>{H(re)})})})()}}function iy(h,u,l){return ql.apply(this,arguments)}function ql(){return(ql=(0,I.Z)(function*(h,u,l,f=!1){const m=new Yf(h);let y;try{y=yield m.verify(l)}catch{y=yield m.verify(l,!0)}const T=Object.assign({},u);return Object.assign(T,f?{captchaResp:y}:{captchaResponse:y}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T})).apply(this,arguments)}function zl(h,u,l,f){return er.apply(this,arguments)}function er(){return er=(0,I.Z)(function*(h,u,l,f){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const y=yield iy(h,u,l,"getOobCode"===l);return f(h,y)}return f(h,u).catch(function(){var y=(0,I.Z)(function*(T){if("auth/missing-recaptcha-token"===T.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield iy(h,u,l,"getOobCode"===l);return f(h,P)}return Promise.reject(T)});return function(T){return y.apply(this,arguments)}}())}),er.apply(this,arguments)}function sy(h){const u=h.indexOf(":");return u<0?"":h.substr(0,u+1)}function ga(h){if(!h)return null;const u=Number(h);return isNaN(u)?null:u}class Es{constructor(u,l){this.providerId=u,this.signInMethod=l}toJSON(){return Ot("not implemented")}_getIdTokenResponse(u){return Ot("not implemented")}_linkToIdToken(u,l){return Ot("not implemented")}_getReauthenticationResolver(u){return Ot("not implemented")}}function Xf(h,u){return oo.apply(this,arguments)}function oo(){return(oo=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:resetPassword",K(h,u))})).apply(this,arguments)}function ma(h,u){return _a.apply(this,arguments)}function _a(){return(_a=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Gl(){return(Gl=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:update",K(h,u))})).apply(this,arguments)}function Ge(h,u){return ya.apply(this,arguments)}function ya(){return(ya=(0,I.Z)(function*(h,u){return _e(h,"POST","/v1/accounts:signInWithPassword",K(h,u))})).apply(this,arguments)}function va(h,u){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:sendOobCode",K(h,u))})).apply(this,arguments)}function np(){return(np=(0,I.Z)(function*(h,u){return va(h,u)})).apply(this,arguments)}function vt(h,u){return rp.apply(this,arguments)}function rp(){return(rp=(0,I.Z)(function*(h,u){return va(h,u)})).apply(this,arguments)}function ZD(h,u){return ye.apply(this,arguments)}function ye(){return(ye=(0,I.Z)(function*(h,u){return va(h,u)})).apply(this,arguments)}function Ia(){return(Ia=(0,I.Z)(function*(h,u){return va(h,u)})).apply(this,arguments)}function Ea(){return(Ea=(0,I.Z)(function*(h,u){return _e(h,"POST","/v1/accounts:signInWithEmailLink",K(h,u))})).apply(this,arguments)}function wa(){return(wa=(0,I.Z)(function*(h,u){return _e(h,"POST","/v1/accounts:signInWithEmailLink",K(h,u))})).apply(this,arguments)}class Mu extends Es{constructor(u,l,f,m=null){super("password",f),this._email=u,this._password=l,this._tenantId=m}static _fromEmailAndPassword(u,l){return new Mu(u,l,"password")}static _fromEmailAndCode(u,l,f=null){return new Mu(u,l,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const l="string"==typeof u?JSON.parse(u):u;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(u){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return zl(u,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ge);case"emailLink":return function ip(h,u){return Ea.apply(this,arguments)}(u,{email:l._email,oobCode:l._password});default:ot(u,"internal-error")}})()}_linkToIdToken(u,l){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return ma(u,{idToken:l,returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function oy(h,u){return wa.apply(this,arguments)}(u,{idToken:l,email:f._email,oobCode:f._password});default:ot(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function qi(h,u){return sp.apply(this,arguments)}function sp(){return(sp=(0,I.Z)(function*(h,u){return _e(h,"POST","/v1/accounts:signInWithIdp",K(h,u))})).apply(this,arguments)}class bi extends Es{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const l=new bi(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(l.idToken=u.idToken),u.accessToken&&(l.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(l.nonce=u.nonce),u.pendingToken&&(l.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(l.accessToken=u.oauthToken,l.secret=u.oauthTokenSecret):ot("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const l="string"==typeof u?JSON.parse(u):u,{providerId:f,signInMethod:m}=l,y=(0,Mt._T)(l,["providerId","signInMethod"]);if(!f||!m)return null;const T=new bi(f,m);return T.idToken=y.idToken||void 0,T.accessToken=y.accessToken||void 0,T.secret=y.secret,T.nonce=y.nonce,T.pendingToken=y.pendingToken||null,T}_getIdTokenResponse(u){return qi(u,this.buildRequest())}_linkToIdToken(u,l){const f=this.buildRequest();return f.idToken=l,qi(u,f)}_getReauthenticationResolver(u){const l=this.buildRequest();return l.autoCreate=!1,qi(u,l)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),u.postBody=(0,V.xO)(l)}return u}}function Da(){return(Da=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:sendVerificationCode",K(h,u))})).apply(this,arguments)}function Zl(){return(Zl=(0,I.Z)(function*(h,u){return _e(h,"POST","/v1/accounts:signInWithPhoneNumber",K(h,u))})).apply(this,arguments)}function Kl(){return(Kl=(0,I.Z)(function*(h,u){const l=yield _e(h,"POST","/v1/accounts:signInWithPhoneNumber",K(h,u));if(l.temporaryProof)throw dn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const op={USER_NOT_FOUND:"user-not-found"};function Ql(){return(Ql=(0,I.Z)(function*(h,u){return _e(h,"POST","/v1/accounts:signInWithPhoneNumber",K(h,Object.assign(Object.assign({},u),{operation:"REAUTH"})),op)})).apply(this,arguments)}class tr extends Es{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,l){return new tr({verificationId:u,verificationCode:l})}static _fromTokenResponse(u,l){return new tr({phoneNumber:u,temporaryProof:l})}_getIdTokenResponse(u){return function Ou(h,u){return Zl.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,l){return function ay(h,u){return Kl.apply(this,arguments)}(u,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function ao(h,u){return Ql.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:l,verificationId:f,verificationCode:m}=this.params;return u&&l?{temporaryProof:u,phoneNumber:l}:{sessionInfo:f,code:m}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:y}=u;return f||l||m||y?new tr({verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:y}):null}}class uo{constructor(u){var l,f,m,y,T,P;const H=(0,V.zd)((0,V.pd)(u)),re=null!==(l=H.apiKey)&&void 0!==l?l:null,he=null!==(f=H.oobCode)&&void 0!==f?f:null,ce=function uy(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=H.mode)&&void 0!==m?m:null);G(re&&he&&ce,"argument-error"),this.apiKey=re,this.operation=ce,this.code=he,this.continueUrl=null!==(y=H.continueUrl)&&void 0!==y?y:null,this.languageCode=null!==(T=H.languageCode)&&void 0!==T?T:null,this.tenantId=null!==(P=H.tenantId)&&void 0!==P?P:null}static parseLink(u){const l=function de(h){const u=(0,V.zd)((0,V.pd)(h)).link,l=u?(0,V.zd)((0,V.pd)(u)).deep_link_id:null,f=(0,V.zd)((0,V.pd)(h)).deep_link_id;return(f?(0,V.zd)((0,V.pd)(f)).link:null)||f||l||u||h}(u);try{return new uo(l)}catch{return null}}}let co=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,f){return Mu._fromEmailAndPassword(l,f)}static credentialWithLink(l,f){const m=uo.parseLink(f);return G(m,"argument-error"),Mu._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class jr{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class ti extends jr{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class lo extends ti{static credentialFromJSON(u){const l="string"==typeof u?JSON.parse(u):u;return G("providerId"in l&&"signInMethod"in l,"argument-error"),bi._fromParams(l)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return G(u.idToken||u.accessToken,"argument-error"),bi._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return lo.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return lo.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:l,oauthAccessToken:f,oauthTokenSecret:m,pendingToken:y,nonce:T,providerId:P}=u;if(!f&&!m&&!l&&!y||!P)return null;try{return new lo(P)._credential({idToken:l,accessToken:f,nonce:T,pendingToken:y})}catch{return null}}}let ap=(()=>{class h extends ti{constructor(){super("facebook.com")}static credential(l){return bi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),up=(()=>{class h extends ti{constructor(){super("google.com"),this.addScope("profile")}static credential(l,f){return bi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:f,oauthAccessToken:m}=l;if(!f&&!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),ni=(()=>{class h extends ti{constructor(){super("github.com")}static credential(l){return bi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class Sn extends Es{constructor(u,l){super(u,u),this.pendingToken=l}_getIdTokenResponse(u){return qi(u,this.buildRequest())}_linkToIdToken(u,l){const f=this.buildRequest();return f.idToken=l,qi(u,f)}_getReauthenticationResolver(u){const l=this.buildRequest();return l.autoCreate=!1,qi(u,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const l="string"==typeof u?JSON.parse(u):u,{providerId:f,signInMethod:m,pendingToken:y}=l;return f&&m&&y&&f===m?new Sn(f,y):null}static _create(u,l){return new Sn(u,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class We extends jr{constructor(u){G(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return We.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return We.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const l=Sn.fromJSON(u);return G(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:l,providerId:f}=u;if(!l||!f)return null;try{return Sn._create(f,l)}catch{return null}}}let Aa=(()=>{class h extends ti{constructor(){super("twitter.com")}static credential(l,f){return bi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:f,oauthTokenSecret:m}=l;if(!f||!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function Fu(h,u){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,I.Z)(function*(h,u){return _e(h,"POST","/v1/accounts:signUp",K(h,u))})).apply(this,arguments)}class _r{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,l,f,m=!1){return(0,I.Z)(function*(){const y=yield $._fromIdTokenResponse(u,f,m),T=ii(f);return new _r({user:y,providerId:T,_tokenResponse:f,operationType:l})})()}static _forOperation(u,l,f){return(0,I.Z)(function*(){yield u._updateTokensIfNecessary(f,!0);const m=ii(f);return new _r({user:u,providerId:m,_tokenResponse:f,operationType:l})})()}}function ii(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function Lu(){return(Lu=(0,I.Z)(function*(h){var u;const l=Lt(h);if(yield l._initializationPromise,null!==(u=l.currentUser)&&void 0!==u&&u.isAnonymous)return new _r({user:l.currentUser,providerId:null,operationType:"signIn"});const f=yield Fu(l,{returnSecureToken:!0}),m=yield _r._fromIdTokenResponse(l,"signIn",f,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class ba extends V.ZR{constructor(u,l,f,m){var y;super(l.code,l.message),this.operationType=f,this.user=m,Object.setPrototypeOf(this,ba.prototype),this.customData={appName:u.name,tenantId:null!==(y=u.tenantId)&&void 0!==y?y:void 0,_serverResponse:l.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(u,l,f,m){return new ba(u,l,f,m)}}function Vu(h,u,l,f){return("reauthenticate"===u?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(y=>{throw"auth/multi-factor-auth-required"===y.code?ba._fromErrorAndOperation(h,y,u,f):y})}function Yl(h){return new Set(h.map(({providerId:u})=>u).filter(u=>!!u))}function ws(){return ws=(0,I.Z)(function*(h,u){const l=(0,V.m9)(h);yield ju(!0,l,u);const{providerUserInfo:f}=yield function ha(h,u){return Jn.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[u]}),m=Yl(f||[]);return l.providerData=l.providerData.filter(y=>m.has(y.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),ws.apply(this,arguments)}function Bu(h,u){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,I.Z)(function*(h,u,l=!1){const f=yield Rr(h,u._linkToIdToken(h.auth,yield h.getIdToken()),l);return _r._forOperation(h,"link",f)})).apply(this,arguments)}function ju(h,u,l){return $u.apply(this,arguments)}function $u(){return($u=(0,I.Z)(function*(h,u,l){yield Vn(u);const m=!1===h?"provider-already-linked":"no-such-provider";G(Yl(u.providerData).has(l)===h,u.auth,m)})).apply(this,arguments)}function lp(h,u){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,I.Z)(function*(h,u,l=!1){const{auth:f}=h,m="reauthenticate";try{const y=yield Rr(h,Vu(f,m,u,h),l);G(y.idToken,f,"internal-error");const T=no(y.idToken);G(T,f,"internal-error");const{sub:P}=T;return G(h.uid===P,f,"user-mismatch"),_r._forOperation(h,m,y)}catch(y){throw"auth/user-not-found"===y?.code&&ot(f,"user-mismatch"),y}})).apply(this,arguments)}function Pr(h,u){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,I.Z)(function*(h,u,l=!1){const f="signIn",m=yield Vu(h,f,u),y=yield _r._fromIdTokenResponse(h,f,m);return l||(yield h._updateCurrentUser(y.user)),y})).apply(this,arguments)}function Ra(h,u){return ed.apply(this,arguments)}function ed(){return(ed=(0,I.Z)(function*(h,u){return Pr(Lt(h),u)})).apply(this,arguments)}function dp(h,u){return td.apply(this,arguments)}function td(){return(td=(0,I.Z)(function*(h,u){const l=(0,V.m9)(h);return yield ju(!1,l,u.providerId),Bu(l,u)})).apply(this,arguments)}function hp(h,u){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,I.Z)(function*(h,u){return lp((0,V.m9)(h),u)})).apply(this,arguments)}function nd(){return(nd=(0,I.Z)(function*(h,u){return _e(h,"POST","/v1/accounts:signInWithCustomToken",K(h,u))})).apply(this,arguments)}function Pa(){return Pa=(0,I.Z)(function*(h,u){const l=Lt(h),f=yield function cy(h,u){return nd.apply(this,arguments)}(l,{token:u,returnSecureToken:!0}),m=yield _r._fromIdTokenResponse(l,"signIn",f);return yield l._updateCurrentUser(m.user),m}),Pa.apply(this,arguments)}class Na{constructor(u,l){this.factorId=u,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(u,l){return"phoneInfo"in l?rd._fromServerResponse(u,l):"totpInfo"in l?id._fromServerResponse(u,l):ot(u,"internal-error")}}class rd extends Na{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,l){return new rd(l)}}class id extends Na{constructor(u){super("totp",u)}static _fromServerResponse(u,l){return new id(l)}}function si(h,u,l){var f;G((null===(f=l.url)||void 0===f?void 0:f.length)>0,h,"invalid-continue-uri"),G(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),u.continueUrl=l.url,u.dynamicLinkDomain=l.dynamicLinkDomain,u.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(G(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),u.iOSBundleId=l.iOS.bundleId),l.android&&(G(l.android.packageName.length>0,h,"missing-android-pkg-name"),u.androidInstallApp=l.android.installApp,u.androidMinimumVersionCode=l.android.minimumVersion,u.androidPackageName=l.android.packageName)}function sd(h){return qu.apply(this,arguments)}function qu(){return(qu=(0,I.Z)(function*(h){const u=Lt(h);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function bn(){return(bn=(0,I.Z)(function*(h,u,l){const f=Lt(h),m={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};l&&si(f,m,l),yield zl(f,m,"getOobCode",vt)})).apply(this,arguments)}function en(){return en=(0,I.Z)(function*(h,u,l){yield Xf((0,V.m9)(h),{oobCode:u,newPassword:l}).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&sd(h),m});return function(m){return f.apply(this,arguments)}}())}),en.apply(this,arguments)}function Ts(){return Ts=(0,I.Z)(function*(h,u){yield function ep(h,u){return Gl.apply(this,arguments)}((0,V.m9)(h),{oobCode:u})}),Ts.apply(this,arguments)}function nr(h,u){return zu.apply(this,arguments)}function zu(){return(zu=(0,I.Z)(function*(h,u){const l=(0,V.m9)(h),f=yield Xf(l,{oobCode:u}),m=f.requestType;switch(G(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(f.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(f.mfaInfo,l,"internal-error");default:G(f.email,l,"internal-error")}let y=null;return f.mfaInfo&&(y=Na._fromServerResponse(Lt(l),f.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.newEmail:f.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.email:f.newEmail)||null,multiFactorInfo:y},operation:m}})).apply(this,arguments)}function ho(){return(ho=(0,I.Z)(function*(h,u){const{data:l}=yield nr((0,V.m9)(h),u);return l.email})).apply(this,arguments)}function od(){return(od=(0,I.Z)(function*(h,u,l){const f=Lt(h),T=yield zl(f,{returnSecureToken:!0,email:u,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fu).catch(H=>{throw"auth/password-does-not-meet-requirements"===H.code&&sd(h),H}),P=yield _r._fromIdTokenResponse(f,"signIn",T);return yield f._updateCurrentUser(P.user),P})).apply(this,arguments)}function Re(){return(Re=(0,I.Z)(function*(h,u,l){const f=Lt(h),m={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function y(T,P){G(P.handleCodeInApp,f,"argument-error"),P&&si(f,T,P)})(m,l),yield zl(f,m,"getOobCode",ZD)})).apply(this,arguments)}function Ds(){return(Ds=(0,I.Z)(function*(h,u,l){const f=(0,V.m9)(h),m=co.credentialWithLink(u,l||Dn());return G(m._tenantId===(f.tenantId||null),f,"tenant-id-mismatch"),Ra(f,m)})).apply(this,arguments)}function zi(){return(zi=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:createAuthUri",K(h,u))})).apply(this,arguments)}function oi(){return oi=(0,I.Z)(function*(h,u){const f={identifier:u,continueUri:wi()?Dn():"http://localhost"},{signinMethods:m}=yield function Rn(h,u){return zi.apply(this,arguments)}((0,V.m9)(h),f);return m||[]}),oi.apply(this,arguments)}function Ce(){return Ce=(0,I.Z)(function*(h,u){const l=(0,V.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};u&&si(l.auth,m,u);const{email:y}=yield function tp(h,u){return np.apply(this,arguments)}(l.auth,m);y!==h.email&&(yield h.reload())}),Ce.apply(this,arguments)}function Gu(){return Gu=(0,I.Z)(function*(h,u,l){const f=(0,V.m9)(h),y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:u};l&&si(f.auth,y,l);const{email:T}=yield function Wl(h,u){return Ia.apply(this,arguments)}(f.auth,y);T!==h.email&&(yield h.reload())}),Gu.apply(this,arguments)}function Vt(){return(Vt=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Gi(){return Gi=(0,I.Z)(function*(h,{displayName:u,photoURL:l}){if(void 0===u&&void 0===l)return;const f=(0,V.m9)(h),y={idToken:yield f.getIdToken(),displayName:u,photoUrl:l,returnSecureToken:!0},T=yield Rr(f,function po(h,u){return Vt.apply(this,arguments)}(f.auth,y));f.displayName=T.displayName||null,f.photoURL=T.photoUrl||null;const P=f.providerData.find(({providerId:H})=>"password"===H);P&&(P.displayName=f.displayName,P.photoURL=f.photoURL),yield f._updateTokensIfNecessary(T)}),Gi.apply(this,arguments)}function ad(h,u,l){return ui.apply(this,arguments)}function ui(){return(ui=(0,I.Z)(function*(h,u,l){const{auth:f}=h,y={idToken:yield h.getIdToken(),returnSecureToken:!0};u&&(y.email=u),l&&(y.password=l);const T=yield Rr(h,ma(f,y));yield h._updateTokensIfNecessary(T,!0)})).apply(this,arguments)}class ci{constructor(u,l,f={}){this.isNewUser=u,this.providerId=l,this.profile=f}}class go extends ci{constructor(u,l,f,m){super(u,l,f),this.username=m}}class qe extends ci{constructor(u,l){super(u,"facebook.com",l)}}class QD extends go{constructor(u,l){super(u,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class ud extends ci{constructor(u,l){super(u,"google.com",l)}}class pp extends go{constructor(u,l,f){super(u,"twitter.com",l,f)}}function li(h){const{user:u,_tokenResponse:l}=h;return u.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Ri(h){var u,l;if(!h)return null;const{providerId:f}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},y=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!f&&h?.idToken){const T=null===(l=null===(u=no(h.idToken))||void 0===u?void 0:u.firebase)||void 0===l?void 0:l.sign_in_provider;if(T)return new ci(y,"anonymous"!==T&&"custom"!==T?T:null)}if(!f)return null;switch(f){case"facebook.com":return new qe(y,m);case"github.com":return new QD(y,m);case"google.com":return new ud(y,m);case"twitter.com":return new pp(y,m,h.screenName||null);case"custom":case"anonymous":return new ci(y,null);default:return new ci(y,f,m)}}(l)}class As{constructor(u,l,f){this.type=u,this.credential=l,this.user=f}static _fromIdtoken(u,l){return new As("enroll",u,l)}static _fromMfaPendingCredential(u){return new As("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var l,f;if(u?.multiFactorSession){if(null!==(l=u.multiFactorSession)&&void 0!==l&&l.pendingCredential)return As._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(f=u.multiFactorSession)&&void 0!==f&&f.idToken)return As._fromIdtoken(u.multiFactorSession.idToken)}return null}}class dd{constructor(u,l,f){this.session=u,this.hints=l,this.signInResolver=f}static _fromError(u,l){const f=Lt(u),m=l.customData._serverResponse,y=(m.mfaInfo||[]).map(P=>Na._fromServerResponse(f,P));G(m.mfaPendingCredential,f,"internal-error");const T=As._fromMfaPendingCredential(m.mfaPendingCredential);return new dd(T,y,function(){var P=(0,I.Z)(function*(H){const re=yield H._process(f,T);delete m.mfaInfo,delete m.mfaPendingCredential;const he=Object.assign(Object.assign({},m),{idToken:re.idToken,refreshToken:re.refreshToken});switch(l.operationType){case"signIn":const ce=yield _r._fromIdTokenResponse(f,l.operationType,he);return yield f._updateCurrentUser(ce.user),ce;case"reauthenticate":return G(l.user,f,"internal-error"),_r._forOperation(l.user,l.operationType,he);default:ot(f,"internal-error")}});return function(H){return P.apply(this,arguments)}}())}resolveSignIn(u){var l=this;return(0,I.Z)(function*(){return l.signInResolver(u)})()}}class mp{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(f=>Na._fromServerResponse(u.auth,f)))})}static _fromUser(u){return new mp(u)}getSession(){var u=this;return(0,I.Z)(function*(){return As._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,l){var f=this;return(0,I.Z)(function*(){const m=u,y=yield f.getSession(),T=yield Rr(f.user,m._process(f.user.auth,y,l));return yield f.user._updateTokensIfNecessary(T),f.user.reload()})()}unenroll(u){var l=this;return(0,I.Z)(function*(){const f="string"==typeof u?u:u.uid,m=yield l.user.getIdToken();try{const y=yield Rr(l.user,function e0(h,u){return U(h,"POST","/v2/accounts/mfaEnrollment:withdraw",K(h,u))}(l.user.auth,{idToken:m,mfaEnrollmentId:f}));l.enrolledFactors=l.enrolledFactors.filter(({uid:T})=>T!==f),yield l.user._updateTokensIfNecessary(y),yield l.user.reload()}catch(y){throw y}})()}}const _p=new WeakMap,hd="__sak";class py{constructor(u,l){this.storageRetriever=u,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(hd,"1"),this.storage.removeItem(hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,l){return this.storage.setItem(u,JSON.stringify(l)),Promise.resolve()}_get(u){const l=this.storage.getItem(u);return Promise.resolve(l?JSON.parse(l):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const La=(()=>{class h extends py{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,f)=>this.onStorageEvent(l,f),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function n0(){const h=(0,V.z$)();return hn(h)||Y(h)}()&&function Xt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ee(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const f of Object.keys(this.listeners)){const m=this.storage.getItem(f),y=this.localCache[f];m!==y&&l(f,y,m)}}onStorageEvent(l,f=!1){if(!l.key)return void this.forAllChangedKeys((P,H,re)=>{this.notifyListeners(P,re)});const m=l.key;if(f?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!f)return}const y=()=>{const P=this.storage.getItem(m);!f&&this.localCache[m]===P||this.notifyListeners(m,P)},T=this.storage.getItem(m);!function Ue(){return(0,V.w1)()&&10===document.documentMode}()||T===l.newValue||l.newValue===l.oldValue?y():setTimeout(y,10)}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const y of Array.from(m))y(f&&JSON.parse(f))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,f,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:f,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,f){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,f){var m=()=>super._set,y=this;return(0,I.Z)(function*(){yield m().call(y,l,f),y.localCache[l]=JSON.stringify(f)})()}_get(l){var f=()=>super._get,m=this;return(0,I.Z)(function*(){const y=yield f().call(m,l);return m.localCache[l]=JSON.stringify(y),y})()}_remove(l){var f=()=>super._remove,m=this;return(0,I.Z)(function*(){yield f().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),Cs=(()=>{class h extends py{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,f){}_removeListener(l,f){}}return h.type="SESSION",h})();let a0=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const f=this.receivers.find(y=>y.isListeningto(l));if(f)return f;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var f=this;return(0,I.Z)(function*(){const m=l,{eventId:y,eventType:T,data:P}=m.data,H=f.handlersMap[T];if(!H?.size)return;m.ports[0].postMessage({status:"ack",eventId:y,eventType:T});const re=Array.from(H).map(function(){var ce=(0,I.Z)(function*(gt){return gt(m.origin,P)});return function(gt){return ce.apply(this,arguments)}}()),he=yield function o0(h){return Promise.all(h.map(function(){var u=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(f){return{fulfilled:!1,reason:f}}});return function(l){return u.apply(this,arguments)}}()))}(re);m.ports[0].postMessage({status:"done",eventId:y,eventType:T,response:he})})()}_subscribe(l,f){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(f)}_unsubscribe(l,f){this.handlersMap[l]&&f&&this.handlersMap[l].delete(f),(!f||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Hr(h="",u=10){let l="";for(let f=0;f<u;f++)l+=Math.floor(10*Math.random());return h+l}class Wi{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,l,f=50){var m=this;return(0,I.Z)(function*(){const y=typeof MessageChannel<"u"?new MessageChannel:null;if(!y)throw new Error("connection_unavailable");let T,P;return new Promise((H,re)=>{const he=Hr("",20);y.port1.start();const ce=setTimeout(()=>{re(new Error("unsupported_event"))},f);P={messageChannel:y,onMessage(gt){const Gr=gt;if(Gr.data.eventId===he)switch(Gr.data.status){case"ack":clearTimeout(ce),T=setTimeout(()=>{re(new Error("timeout"))},3e3);break;case"done":clearTimeout(T),H(Gr.data.response);break;default:clearTimeout(ce),clearTimeout(T),re(new Error("invalid_response"))}}},m.handlers.add(P),y.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:u,eventId:he,data:l},[y.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function nn(){return window}function rn(){return typeof nn().WorkerGlobalScope<"u"&&"function"==typeof nn().importScripts}function sr(){return(sr=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const fd="firebaseLocalStorageDb",_o="firebaseLocalStorage",pd="fbase_key";class Ss{constructor(u){this.request=u}toPromise(){return new Promise((u,l)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function yo(h,u){return h.transaction([_o],u?"readwrite":"readonly").objectStore(_o)}function Ku(){const h=indexedDB.open(fd,1);return new Promise((u,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const f=h.result;try{f.createObjectStore(_o,{keyPath:pd})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const f=h.result;f.objectStoreNames.contains(_o)?u(f):(f.close(),yield function Ep(){const h=indexedDB.deleteDatabase(fd);return new Ss(h).toPromise()}(),u(yield Ku()))}))})}function gd(h,u,l){return vo.apply(this,arguments)}function vo(){return(vo=(0,I.Z)(function*(h,u,l){const f=yo(h,!0).put({[pd]:u,value:l});return new Ss(f).toPromise()})).apply(this,arguments)}function Zi(){return(Zi=(0,I.Z)(function*(h,u){const l=yo(h,!1).get(u),f=yield new Ss(l).toPromise();return void 0===f?null:f.value})).apply(this,arguments)}function md(h,u){const l=yo(h,!0).delete(u);return new Ss(l).toPromise()}const Io=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield Ku()),l.db})()}_withRetries(l){var f=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const y=yield f._openDb();return yield l(y)}catch(y){if(m++>3)throw y;f.db&&(f.db.close(),f.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return rn()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=a0._getInstance(function vp(){return rn()?self:null}()),l.receiver._subscribe("keyChanged",function(){var f=(0,I.Z)(function*(m,y){return{keyProcessed:(yield l._poll()).includes(y.key)}});return function(m,y){return f.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var f=(0,I.Z)(function*(m,y){return["keyChanged"]});return function(m,y){return f.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var f,m;if(l.activeServiceWorker=yield function Zu(){return sr.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new Wi(l.activeServiceWorker);const y=yield l.sender._send("ping",{},800);y&&null!==(f=y[0])&&void 0!==f&&f.fulfilled&&null!==(m=y[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var f=this;return(0,I.Z)(function*(){if(f.sender&&f.activeServiceWorker&&function yp(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===f.activeServiceWorker)try{yield f.sender._send("keyChanged",{key:l},f.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield Ku();return yield gd(l,hd,"1"),yield md(l,hd),!0}catch{}return!1})()}_withPendingWrite(l){var f=this;return(0,I.Z)(function*(){f.pendingWrites++;try{yield l()}finally{f.pendingWrites--}})()}_set(l,f){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(y=>gd(y,l,f)),m.localCache[l]=f,m.notifyServiceWorker(l)}))})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=yield f._withRetries(y=>function Va(h,u){return Zi.apply(this,arguments)}(y,l));return f.localCache[l]=m,m})()}_remove(l){var f=this;return(0,I.Z)(function*(){return f._withPendingWrite((0,I.Z)(function*(){return yield f._withRetries(m=>md(m,l)),delete f.localCache[l],f.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const f=yield l._withRetries(T=>{const P=yo(T,!1).getAll();return new Ss(P).toPromise()});if(!f)return[];if(0!==l.pendingWrites)return[];const m=[],y=new Set;for(const{fbase_key:T,value:P}of f)y.add(T),JSON.stringify(l.localCache[T])!==JSON.stringify(P)&&(l.notifyListeners(T,P),m.push(T));for(const T of Object.keys(l.localCache))l.localCache[T]&&!y.has(T)&&(l.notifyListeners(T,null),m.push(T));return m})()}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const y of Array.from(m))y(f)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,f){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),Eo=1e12;class h0{constructor(u){this.auth=u,this.counter=Eo,this._widgets=new Map}render(u,l){const f=this.counter;return this._widgets.set(f,new f0(u,this.auth.name,l||{})),this.counter++,f}reset(u){var l;const f=u||Eo;null===(l=this._widgets.get(f))||void 0===l||l.delete(),this._widgets.delete(f)}getResponse(u){var l;return(null===(l=this._widgets.get(u||Eo))||void 0===l?void 0:l.getResponse())||""}execute(u){var l=this;return(0,I.Z)(function*(){var f;return null===(f=l._widgets.get(u||Eo))||void 0===f||f.execute(),""})()}}class f0{constructor(u,l,f){this.params=f,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof u?document.getElementById(u):u;G(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yy(h){const u=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<h;f++)u.push(l.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":l}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qu=ry("rcb"),Tp=new ei(3e4,6e4);class Iy{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=nn().grecaptcha)||void 0===u||!u.render)}load(u,l=""){return G(function Ey(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),u,"argument-error"),this.shouldResolveImmediately(l)&&kn(nn().grecaptcha)?Promise.resolve(nn().grecaptcha):new Promise((f,m)=>{const y=nn().setTimeout(()=>{m(yt(u,"network-request-failed"))},Tp.get());nn()[Qu]=()=>{nn().clearTimeout(y),delete nn()[Qu];const P=nn().grecaptcha;if(!P||!kn(P))return void m(yt(u,"internal-error"));const H=P.render;P.render=(re,he)=>{const ce=H(re,he);return this.counter++,ce},this.hostLanguage=l,f(P)},Si(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Qu,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(y),m(yt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var l;return!(null===(l=nn().grecaptcha)||void 0===l||!l.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dp{load(u){return(0,I.Z)(function*(){return new h0(u)})()}clearedOneInstance(){}}const Ap="recaptcha",Cp={theme:"light",type:"image"};class wy{constructor(u,l,f=Object.assign({},Cp)){this.parameters=f,this.type=Ap,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lt(u),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;G(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dp:new Iy,this.validateStartingState()}verify(){var u=this;return(0,I.Z)(function*(){u.assertNotDestroyed();const l=yield u.render(),f=u.getAssertedRecaptcha();return f.getResponse(l)||new Promise(y=>{const T=P=>{P&&(u.tokenChangeListeners.delete(T),y(P))};u.tokenChangeListeners.add(T),u.isInvisible&&f.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return l=>{if(this.tokenChangeListeners.forEach(f=>f(l)),"function"==typeof u)u(l);else if("string"==typeof u){const f=nn()[u];"function"==typeof f&&f(l)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,I.Z)(function*(){if(yield u.init(),!u.widgetId){let l=u.container;if(!u.isInvisible){const f=document.createElement("div");l.appendChild(f),l=f}u.widgetId=u.getAssertedRecaptcha().render(l,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,I.Z)(function*(){G(wi()&&!rn(),u.auth,"internal-error"),yield function p0(){let h=null;return new Promise(u=>{"complete"!==document.readyState?(h=()=>u(),window.addEventListener("load",h)):u()}).catch(u=>{throw h&&window.removeEventListener("load",h),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const l=yield function la(h){return Ti.apply(this,arguments)}(u.auth);G(l,u.auth,"internal-error"),u.parameters.sitekey=l})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yd{constructor(u,l){this.verificationId=u,this.onConfirmation=l}confirm(u){const l=tr._fromVerification(this.verificationId,u);return this.onConfirmation(l)}}function Ju(){return(Ju=(0,I.Z)(function*(h,u,l){const f=Lt(h),m=yield ec(f,u,(0,V.m9)(l));return new yd(m,y=>Ra(f,y))})).apply(this,arguments)}function vd(){return(vd=(0,I.Z)(function*(h,u,l){const f=(0,V.m9)(h);yield ju(!1,f,"phone");const m=yield ec(f.auth,u,(0,V.m9)(l));return new yd(m,y=>dp(f,y))})).apply(this,arguments)}function Xu(){return(Xu=(0,I.Z)(function*(h,u,l){const f=(0,V.m9)(h),m=yield ec(f.auth,u,(0,V.m9)(l));return new yd(m,y=>hp(f,y))})).apply(this,arguments)}function ec(h,u,l){return Ba.apply(this,arguments)}function Ba(){return Ba=(0,I.Z)(function*(h,u,l){var f;const m=yield l.verify();try{let y;if(G("string"==typeof m,h,"argument-error"),G(l.type===Ap,h,"argument-error"),y="string"==typeof u?{phoneNumber:u}:u,"session"in y){const T=y.session;if("phoneNumber"in y)return G("enroll"===T.type,h,"internal-error"),(yield function hy(h,u){return U(h,"POST","/v2/accounts/mfaEnrollment:start",K(h,u))}(h,{idToken:T.credential,phoneEnrollmentInfo:{phoneNumber:y.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{G("signin"===T.type,h,"internal-error");const P=(null===(f=y.multiFactorHint)||void 0===f?void 0:f.uid)||y.multiFactorUid;return G(P,h,"missing-multi-factor-info"),(yield function my(h,u){return U(h,"POST","/v2/accounts/mfaSignIn:start",K(h,u))}(h,{mfaPendingCredential:T.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:T}=yield function Ta(h,u){return Da.apply(this,arguments)}(h,{phoneNumber:y.phoneNumber,recaptchaToken:m});return T}}finally{l._reset()}}),Ba.apply(this,arguments)}function xr(){return(xr=(0,I.Z)(function*(h,u){yield Bu((0,V.m9)(h),u)})).apply(this,arguments)}let wo=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Lt(l)}verifyPhoneNumber(l,f){return ec(this.auth,l,(0,V.m9)(f))}static credential(l,f){return tr._fromVerification(l,f)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:f,temporaryProof:m}=l;return f&&m?tr._fromTokenResponse(f,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function Ki(h,u){return u?ne(u):(G(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class ht extends Es{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return qi(u,this._buildIdpRequest())}_linkToIdToken(u,l){return qi(u,this._buildIdpRequest(l))}_getReauthenticationResolver(u){return qi(u,this._buildIdpRequest())}_buildIdpRequest(u){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(l.idToken=u),l}}function Id(h){return Pr(h.auth,new ht(h),h.bypassAuthState)}function tc(h){const{auth:u,user:l}=h;return G(l,u,"internal-error"),lp(l,new ht(h),h.bypassAuthState)}function or(h){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,I.Z)(function*(h){const{auth:u,user:l}=h;return G(l,u,"internal-error"),Bu(l,new ht(h),h.bypassAuthState)})).apply(this,arguments)}class wd{constructor(u,l,f,m,y=!1){this.auth=u,this.resolver=f,this.user=m,this.bypassAuthState=y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var u=this;return new Promise(function(){var l=(0,I.Z)(function*(f,m){u.pendingPromise={resolve:f,reject:m};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(y){u.reject(y)}});return function(f,m){return l.apply(this,arguments)}}())}onAuthEvent(u){var l=this;return(0,I.Z)(function*(){const{urlResponse:f,sessionId:m,postBody:y,tenantId:T,error:P,type:H}=u;if(P)return void l.reject(P);const re={auth:l.auth,requestUri:f,sessionId:m,tenantId:T||void 0,postBody:y||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(H)(re))}catch(he){l.reject(he)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return Id;case"linkViaPopup":case"linkViaRedirect":return or;case"reauthViaPopup":case"reauthViaRedirect":return tc;default:ot(this.auth,"internal-error")}}resolve(u){Ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){Ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const To=new ei(2e3,1e4);function Td(){return(Td=(0,I.Z)(function*(h,u,l){const f=Lt(h);Le(h,u,jr);const m=Ki(f,l);return new Ad(f,"signInViaPopup",u,m).executeNotNull()})).apply(this,arguments)}function Dd(){return(Dd=(0,I.Z)(function*(h,u,l){const f=(0,V.m9)(h);Le(f.auth,u,jr);const m=Ki(f.auth,l);return new Ad(f.auth,"reauthViaPopup",u,m,f).executeNotNull()})).apply(this,arguments)}function nc(){return(nc=(0,I.Z)(function*(h,u,l){const f=(0,V.m9)(h);Le(f.auth,u,jr);const m=Ki(f.auth,l);return new Ad(f.auth,"linkViaPopup",u,m,f).executeNotNull()})).apply(this,arguments)}let Ad=(()=>{class h extends wd{constructor(l,f,m,y,T){super(l,f,y,T),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const f=yield l.execute();return G(f,l.auth,"internal-error"),f})()}onExecution(){var l=this;return(0,I.Z)(function*(){Ct(1===l.filter.length,"Popup operations only handle one event");const f=Hr();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],f),l.authWindow.associatedEvent=f,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(yt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var f,m;this.pollId=null!==(m=null===(f=this.authWindow)||void 0===f?void 0:f.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(yt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,To.get())};l()}}return h.currentPopupAction=null,h})();const bp="pendingRedirect",Do=new Map;class Rp extends wd{constructor(u,l,f=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,f),this.eventId=null}execute(){var u=()=>super.execute,l=this;return(0,I.Z)(function*(){let f=Do.get(l.auth._key());if(!f){try{const y=(yield function Cy(h,u){return we.apply(this,arguments)}(l.resolver,l.auth))?yield u().call(l):null;f=()=>Promise.resolve(y)}catch(m){f=()=>Promise.reject(m)}Do.set(l.auth._key(),f)}return l.bypassAuthState||Do.set(l.auth._key(),()=>Promise.resolve(null)),f()})()}onAuthEvent(u){var l=()=>super.onAuthEvent,f=this;return(0,I.Z)(function*(){if("signInViaRedirect"===u.type)return l().call(f,u);if("unknown"!==u.type){if(u.eventId){const m=yield f.auth._redirectUserForId(u.eventId);if(m)return f.user=m,l().call(f,u);f.resolve(null)}}else f.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function we(){return(we=(0,I.Z)(function*(h,u){const l=Sd(u),f=Np(h);if(!(yield f._isAvailable()))return!1;const m="true"===(yield f._get(l));return yield f._remove(l),m})).apply(this,arguments)}function rc(h,u){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,I.Z)(function*(h,u){return Np(h)._set(Sd(u),"true")})).apply(this,arguments)}function Cd(h,u){Do.set(h._key(),u)}function Np(h){return ne(h._redirectPersistence)}function Sd(h){return ut(bp,h.config.apiKey,h.name)}function Ao(h,u,l){return function by(h,u,l){return bd.apply(this,arguments)}(h,u,l)}function bd(){return(bd=(0,I.Z)(function*(h,u,l){const f=Lt(h);Le(h,u,jr),yield f._initializationPromise;const m=Ki(f,l);return yield rc(m,f),m._openRedirect(f,u,"signInViaRedirect")})).apply(this,arguments)}function Ry(h,u,l){return function Py(h,u,l){return Rd.apply(this,arguments)}(h,u,l)}function Rd(){return(Rd=(0,I.Z)(function*(h,u,l){const f=(0,V.m9)(h);Le(f.auth,u,jr),yield f.auth._initializationPromise;const m=Ki(f.auth,l);yield rc(m,f.auth);const y=yield qr(f);return m._openRedirect(f.auth,u,"reauthViaRedirect",y)})).apply(this,arguments)}function Z(h,u,l){return function Ye(h,u,l){return Co.apply(this,arguments)}(h,u,l)}function Co(){return(Co=(0,I.Z)(function*(h,u,l){const f=(0,V.m9)(h);Le(f.auth,u,jr),yield f.auth._initializationPromise;const m=Ki(f.auth,l);yield ju(!1,f,u.providerId),yield rc(m,f.auth);const y=yield qr(f);return m._openRedirect(f.auth,u,"linkViaRedirect",y)})).apply(this,arguments)}function sn(){return(sn=(0,I.Z)(function*(h,u){return yield Lt(h)._initializationPromise,Ua(h,u,!1)})).apply(this,arguments)}function Ua(h,u){return bs.apply(this,arguments)}function bs(){return(bs=(0,I.Z)(function*(h,u,l=!1){const f=Lt(h),m=Ki(f,u),T=yield new Rp(f,m,l).execute();return T&&!l&&(delete T.user._redirectEventId,yield f._persistUserIfCurrent(T.user),yield f._setRedirectUser(null,u)),T})).apply(this,arguments)}function qr(h){return ja.apply(this,arguments)}function ja(){return(ja=(0,I.Z)(function*(h){const u=Hr(`${h.uid}:::`);return h._redirectEventId=u,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),u})).apply(this,arguments)}class xp{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let l=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(u,f)&&(l=!0,this.sendToConsumer(u,f),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function Un(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nd(h);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=u,l=!0)),l}sendToConsumer(u,l){var f;if(u.error&&!Nd(u)){const m=(null===(f=u.error.code)||void 0===f?void 0:f.split("auth/")[1])||"internal-error";l.onError(yt(this.auth,m))}else l.onAuthEvent(u)}isEventForConsumer(u,l){const f=null===l.eventId||!!u.eventId&&u.eventId===l.eventId;return l.filter.includes(u.type)&&f}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ny(u))}saveEventToCache(u){this.cachedEventUids.add(Ny(u)),this.lastProcessedEventTime=Date.now()}}function Ny(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(u=>u).join("-")}function Nd({type:h,error:u}){return"unknown"===h&&"auth/no-auth-event"===u?.code}function hi(h){return sc.apply(this,arguments)}function sc(){return(sc=(0,I.Z)(function*(h,u={}){return U(h,"GET","/v1/projects",u)})).apply(this,arguments)}const So=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pi=/^https?/;function oc(){return(oc=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:u}=yield hi(h);for(const l of u)try{if(My(l))return}catch{}ot(h,"unauthorized-domain")})).apply(this,arguments)}function My(h){const u=Dn(),{protocol:l,hostname:f}=new URL(u);if(h.startsWith("chrome-extension://")){const T=new URL(h);return""===T.hostname&&""===f?"chrome-extension:"===l&&h.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===l&&T.hostname===f}if(!Pi.test(l))return!1;if(So.test(h))return f===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(f)}const Oy=new ei(3e4,6e4);function ac(){const h=nn().___jsl;if(h?.H)for(const u of Object.keys(h.H))if(h.H[u].r=h.H[u].r||[],h.H[u].L=h.H[u].L||[],h.H[u].r=[...h.H[u].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let $a=null;const ky=new ei(5e3,15e3),Mp="__/auth/iframe",Od="emulator/auth/iframe",Op={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fp(h){const u=h.config;G(u.authDomain,h,"auth-domain-config-required");const l=u.emulator?M(u,Od):`https://${h.config.authDomain}/${Mp}`,f={apiKey:u.apiKey,appName:h.name,v:Ae.SDK_VERSION},m=kp.get(h.config.apiHost);m&&(f.eid=m);const y=h._getFrameworks();return y.length&&(f.fw=y.join(",")),`${l}?${(0,V.xO)(f).slice(1)}`}function Ha(){return Ha=(0,I.Z)(function*(h){const u=yield function Md(h){return $a=$a||function xd(h){return new Promise((u,l)=>{var f,m,y;function T(){ac(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{ac(),l(yt(h,"network-request-failed"))},timeout:Oy.get()})}if(null!==(m=null===(f=nn().gapi)||void 0===f?void 0:f.iframes)&&void 0!==m&&m.Iframe)u(gapi.iframes.getContext());else{if(null===(y=nn().gapi)||void 0===y||!y.load){const P=ry("iframefcb");return nn()[P]=()=>{gapi.load?T():l(yt(h,"network-request-failed"))},Si(`https://apis.google.com/js/api.js?onload=${P}`).catch(H=>l(H))}T()}}).catch(u=>{throw $a=null,u})}(h),$a}(h),l=nn().gapi;return G(l,h,"internal-error"),u.open({where:document.body,url:Fp(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Op,dontclear:!0},f=>new Promise(function(){var m=(0,I.Z)(function*(y,T){yield f.restyle({setHideOnLeave:!1});const P=yt(h,"network-request-failed"),H=nn().setTimeout(()=>{T(P)},ky.get());function re(){nn().clearTimeout(H),y(f)}f.ping(re).then(re,()=>{T(P)})});return function(y,T){return m.apply(this,arguments)}}()))}),Ha.apply(this,arguments)}const Fy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vp{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Uy="__/auth/handler",Bp="emulator/auth/handler",Up=encodeURIComponent("fac");function bo(h,u,l,f,m,y){return fi.apply(this,arguments)}function fi(){return(fi=(0,I.Z)(function*(h,u,l,f,m,y){G(h.config.authDomain,h,"auth-domain-config-required"),G(h.config.apiKey,h,"invalid-api-key");const T={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:f,v:Ae.SDK_VERSION,eventId:m};if(u instanceof jr){u.setDefaultLanguage(h.languageCode),T.providerId=u.providerId||"",(0,V.xb)(u.getCustomParameters())||(T.customParameters=JSON.stringify(u.getCustomParameters()));for(const[he,ce]of Object.entries(y||{}))T[he]=ce}if(u instanceof ti){const he=u.getScopes().filter(ce=>""!==ce);he.length>0&&(T.scopes=he.join(","))}h.tenantId&&(T.tid=h.tenantId);const P=T;for(const he of Object.keys(P))void 0===P[he]&&delete P[he];const H=yield h._getAppCheckToken(),re=H?`#${Up}=${encodeURIComponent(H)}`:"";return`${function jy({config:h}){return h.emulator?M(h,Bp):`https://${h.authDomain}/${Uy}`}(h)}?${(0,V.xO)(P).slice(1)}${re}`})).apply(this,arguments)}const Ro="webStorageSupport",qa=class uc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cs,this._completeRedirectFn=Ua,this._overrideRedirectResult=Cd}_openPopup(u,l,f,m){var y=this;return(0,I.Z)(function*(){var T;Ct(null===(T=y.eventManagers[u._key()])||void 0===T?void 0:T.manager,"_initialize() not called before _openPopup()");const P=yield bo(u,l,f,Dn(),m);return function Vy(h,u,l,f=500,m=600){const y=Math.max((window.screen.availHeight-m)/2,0).toString(),T=Math.max((window.screen.availWidth-f)/2,0).toString();let P="";const H=Object.assign(Object.assign({},Fy),{width:f.toString(),height:m.toString(),top:y,left:T}),re=(0,V.z$)().toLowerCase();l&&(P=pt(re)?"_blank":l),me(re)&&(u=u||"http://localhost",H.scrollbars="yes");const he=Object.entries(H).reduce((gt,[Gr,Zd])=>`${gt}${Gr}=${Zd},`,"");if(function Me(h=(0,V.z$)()){var u;return Y(h)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(re)&&"_self"!==P)return function By(h,u){const l=document.createElement("a");l.href=h,l.target=u;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(f)}(u||"",P),new Vp(null);const ce=window.open(u||"",P,he);G(ce,h,"popup-blocked");try{ce.focus()}catch{}return new Vp(ce)}(u,P,Hr())})()}_openRedirect(u,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y._originValidation(u),function u0(h){nn().location.href=h}(yield bo(u,l,f,Dn(),m)),new Promise(()=>{})})()}_initialize(u){const l=u._key();if(this.eventManagers[l]){const{manager:m,promise:y}=this.eventManagers[l];return m?Promise.resolve(m):(Ct(y,"If manager is not set, promise should be"),y)}const f=this.initAndGetManager(u);return this.eventManagers[l]={promise:f},f.catch(()=>{delete this.eventManagers[l]}),f}initAndGetManager(u){var l=this;return(0,I.Z)(function*(){const f=yield function Lp(h){return Ha.apply(this,arguments)}(u),m=new xp(u);return f.register("authEvent",y=>(G(y?.authEvent,u,"invalid-auth-event"),{status:m.onEvent(y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[u._key()]={manager:m},l.iframes[u._key()]=f,m})()}_isIframeWebStorageSupported(u,l){this.iframes[u._key()].send(Ro,{type:Ro},m=>{var y;const T=null===(y=m?.[0])||void 0===y?void 0:y[Ro];void 0!==T&&l(!!T),ot(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const l=u._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function xy(h){return oc.apply(this,arguments)}(u)),this.originValidationPromises[l]}get _shouldInitProactively(){return ee()||hn()||Y()}};class kd{constructor(u){this.factorId=u}_process(u,l,f){switch(l.type){case"enroll":return this._finalizeEnroll(u,l.credential,f);case"signin":return this._finalizeSignIn(u,l.credential);default:return Ot("unexpected MultiFactorSessionType")}}}class cc extends kd{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new cc(u)}_finalizeEnroll(u,l,f){return function fy(h,u){return U(h,"POST","/v2/accounts/mfaEnrollment:finalize",K(h,u))}(u,{idToken:l,displayName:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,l){return function d0(h,u){return U(h,"POST","/v2/accounts/mfaSignIn:finalize",K(h,u))}(u,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let jp=(()=>{class h{constructor(){}static assertion(l){return cc._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var $y="@firebase/auth";class m0{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const l=this.auth.onIdTokenChanged(f=>{u(f?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,l),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const l=this.internalListeners.get(u);l&&(this.internalListeners.delete(u),l(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zr(){return window}(0,V.Pz)("authIdTokenMaxAge"),function qy(h){(0,Ae._registerComponent)(new qt.wA("auth",(u,{options:l})=>{const f=u.getProvider("app").getImmediate(),m=u.getProvider("heartbeat"),y=u.getProvider("app-check-internal"),{apiKey:T,authDomain:P}=f.options;G(T&&!T.includes(":"),"invalid-api-key",{appName:f.name});const H={apiKey:T,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pe(h)},re=new mr(f,m,y,H);return function GD(h,u){const l=u?.persistence||[],f=(Array.isArray(l)?l:[l]).map(ne);u?.errorMap&&h._updateErrorMap(u.errorMap),h._initializeWithPersistence(f,u?.popupRedirectResolver)}(re,l),re},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,l,f)=>{u.getProvider("auth-internal").initialize()})),(0,Ae._registerComponent)(new qt.wA("auth-internal",u=>{const l=Lt(u.getProvider("auth").getImmediate());return new m0(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)($y,"1.3.2",function Hy(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Ae.registerVersion)($y,"1.3.2","esm2017")}("Browser");function $p(){return $p=(0,I.Z)(function*(h,u,l){var f;const{BuildInfo:m}=zr();Ct(u.sessionId,"AuthEvent did not contain a session ID");const y=yield function Vd(h){return mc.apply(this,arguments)}(u.sessionId),T={};return Y()?T.ibi=m.packageName:Is()?T.apn=m.packageName:ot(h,"operation-not-supported-in-this-environment"),m.displayName&&(T.appDisplayName=m.displayName),T.sessionId=y,bo(h,l,u.type,void 0,null!==(f=u.eventId)&&void 0!==f?f:void 0,T)}),$p.apply(this,arguments)}function pc(){return(pc=(0,I.Z)(function*(h){const{BuildInfo:u}=zr(),l={};Y()?l.iosBundleId=u.packageName:Is()?l.androidPackageName=u.packageName:ot(h,"operation-not-supported-in-this-environment"),yield hi(h,l)})).apply(this,arguments)}function Ld(){return(Ld=(0,I.Z)(function*(h,u,l){const{cordova:f}=zr();let m=()=>{};try{yield new Promise((y,T)=>{let P=null;function H(){var ce;y();const gt=null===(ce=f.plugins.browsertab)||void 0===ce?void 0:ce.close;"function"==typeof gt&&gt(),"function"==typeof l?.close&&l.close()}function re(){P||(P=window.setTimeout(()=>{T(yt(h,"redirect-cancelled-by-user"))},2e3))}function he(){"visible"===document?.visibilityState&&re()}u.addPassiveListener(H),document.addEventListener("resume",re,!1),Is()&&document.addEventListener("visibilitychange",he,!1),m=()=>{u.removePassiveListener(H),document.removeEventListener("resume",re,!1),document.removeEventListener("visibilitychange",he,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function mc(){return(mc=(0,I.Z)(function*(h){const u=function _c(h){if(Ct(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const u=new ArrayBuffer(h.length),l=new Uint8Array(u);for(let f=0;f<h.length;f++)l[f]=h.charCodeAt(f);return l}(h),l=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Gy extends xp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(u)),super.onEvent(u)}initialized(){var u=this;return(0,I.Z)(function*(){yield u.initPromise})()}}function Ud(h){return yc.apply(this,arguments)}function yc(){return(yc=(0,I.Z)(function*(h){const u=yield Ni()._get(jd(h));return u&&(yield Ni()._remove(jd(h))),u})).apply(this,arguments)}function vc(){const h=[];for(let l=0;l<20;l++){const f=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(f))}return h.join("")}function Ni(){return ne(La)}function jd(h){return ut("authEvent",h.config.apiKey,h.name)}function Ji(h){if(!h?.includes("?"))return{};const[u,...l]=h.split("?");return(0,V.zd)(l.join("?"))}const Ky=class $n{constructor(){this._redirectPersistence=Cs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ua,this._overrideRedirectResult=Cd}_initialize(u){var l=this;return(0,I.Z)(function*(){const f=u._key();let m=l.eventManagers.get(f);return m||(m=new Gy(u),l.eventManagers.set(f,m),l.attachCallbackListeners(u,m)),m})()}_openPopup(u){ot(u,"operation-not-supported-in-this-environment")}_openRedirect(u,l,f,m){var y=this;return(0,I.Z)(function*(){!function gc(h){var u,l,f,m,y,T,P,H,re,he;const ce=zr();G("function"==typeof(null===(u=ce?.universalLinks)||void 0===u?void 0:u.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(l=ce?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(y=null===(m=null===(f=ce?.cordova)||void 0===f?void 0:f.plugins)||void 0===m?void 0:m.browsertab)||void 0===y?void 0:y.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(H=null===(P=null===(T=ce?.cordova)||void 0===T?void 0:T.plugins)||void 0===P?void 0:P.browsertab)||void 0===H?void 0:H.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(he=null===(re=ce?.cordova)||void 0===re?void 0:re.InAppBrowser)||void 0===he?void 0:he.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const T=yield y._initialize(u);yield T.initialized(),T.resetRedirect(),function Sy(){Do.clear()}(),yield y._originValidation(u);const P=function qp(h,u,l=null){return{type:u,eventId:l,urlResponse:null,sessionId:vc(),postBody:null,tenantId:h.tenantId,error:yt(h,"no-auth-event")}}(u,f,m);yield function zp(h,u){return Ni()._set(jd(h),u)}(u,P);const H=yield function fc(h,u,l){return $p.apply(this,arguments)}(u,P,l),re=yield function zy(h){const{cordova:u}=zr();return new Promise(l=>{u.plugins.browsertab.isAvailable(f=>{let m=null;f?u.plugins.browsertab.openUrl(h):m=u.InAppBrowser.open(h,function ve(h=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(H);return function pi(h,u,l){return Ld.apply(this,arguments)}(u,T,re)})()}_isIframeWebStorageSupported(u,l){throw new Error("Method not implemented.")}_originValidation(u){const l=u._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Hp(h){return pc.apply(this,arguments)}(u)),this.originValidationPromises[l]}attachCallbackListeners(u,l){const{universalLinks:f,handleOpenURL:m,BuildInfo:y}=zr(),T=setTimeout((0,I.Z)(function*(){yield Ud(u),l.onEvent(Zp())}),500),P=function(){var he=(0,I.Z)(function*(ce){clearTimeout(T);const gt=yield Ud(u);let Gr=null;gt&&ce?.url&&(Gr=function Wy(h,u){var l,f;const m=function Wp(h){const u=Ji(h),l=u.link?decodeURIComponent(u.link):void 0,f=Ji(l).link,m=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return Ji(m).link||m||f||l||h}(u);if(m.includes("/__/auth/callback")){const y=Ji(m),T=y.firebaseError?function Gp(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(y.firebaseError)):null,P=null===(f=null===(l=T?.code)||void 0===l?void 0:l.split("auth/"))||void 0===f?void 0:f[1],H=P?yt(P):null;return H?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:H,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(gt,ce.url)),l.onEvent(Gr||Zp())});return function(gt){return he.apply(this,arguments)}}();typeof f<"u"&&"function"==typeof f.subscribe&&f.subscribe(null,P);const H=m,re=`${y.packageName.toLowerCase()}://`;zr().handleOpenURL=function(){var he=(0,I.Z)(function*(ce){if(ce.toLowerCase().startsWith(re)&&P({url:ce}),"function"==typeof H)try{H(ce)}catch(gt){console.error(gt)}});return function(ce){return he.apply(this,arguments)}}()}};function Zp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yt("no-auth-event")}}function gi(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function Ps(h=(0,V.z$)()){return!("file:"!==gi()&&"ionic:"!==gi()&&"capacitor:"!==gi()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yp(){try{const h=self.localStorage,u=Hr();if(h)return h.setItem(u,"1"),h.removeItem(u),!function I0(h=(0,V.z$)()){return function qd(){return(0,V.w1)()&&11===document?.documentMode}()||function xo(h=(0,V.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,V.hl)()}catch{return Jp()&&(0,V.hl)()}return!1}function Jp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xp(){return(function No(){return"http:"===gi()||"https:"===gi()}()||(0,V.ru)()||Ps())&&!function Qp(){return(0,V.b$)()||(0,V.UG)()}()&&Yp()&&!Jp()}function Yy(){return Ps()&&typeof document<"u"}function eg(){return(eg=(0,I.Z)(function*(){return!!Yy()&&new Promise(h=>{const u=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),h(!0)})})})).apply(this,arguments)}const fn={LOCAL:"local",NONE:"none",SESSION:"session"},Ga=G,tg="persistence";function zd(h){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,I.Z)(function*(h){yield h._initializationPromise;const u=vr(),l=ut(tg,h.config.apiKey,h.name);u&&u.setItem(l,h._getPersistence())})).apply(this,arguments)}function vr(){var h;try{return(null===(h=function w0(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const Mo=G;class xi{constructor(){this.browserResolver=ne(qa),this.cordovaResolver=ne(Ky),this.underlyingResolver=null,this._redirectPersistence=Cs,this._completeRedirectFn=Ua,this._overrideRedirectResult=Cd}_initialize(u){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openPopup(u,l,f,m)})()}_openRedirect(u,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openRedirect(u,l,f,m)})()}_isIframeWebStorageSupported(u,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,l)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return Yy()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Mo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,I.Z)(function*(){if(u.underlyingResolver)return;const l=yield function E0(){return eg.apply(this,arguments)}();u.underlyingResolver=l?u.cordovaResolver:u.browserResolver})()}}function Wa(h){return h.unwrap()}function Xy(h){return ng(h)}function ng(h){const{_tokenResponse:u}=h instanceof V.ZR?h.customData:h;if(!u)return null;if(!(h instanceof V.ZR)&&"temporaryProof"in u&&"phoneNumber"in u)return wo.credentialFromResult(h);const l=u.providerId;if(!l||l===$e.PASSWORD)return null;let f;switch(l){case $e.GOOGLE:f=up;break;case $e.FACEBOOK:f=ap;break;case $e.GITHUB:f=ni;break;case $e.TWITTER:f=Aa;break;default:const{oauthIdToken:m,oauthAccessToken:y,oauthTokenSecret:T,pendingToken:P,nonce:H}=u;return y||T||m||P?P?l.startsWith("saml.")?Sn._create(l,P):bi._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:y}):new lo(l).credential({idToken:m,accessToken:y,rawNonce:H}):null}return h instanceof V.ZR?f.credentialFromError(h):f.credentialFromResult(h)}function Ir(h,u){return u.catch(l=>{throw l instanceof V.ZR&&function T0(h,u){var l;const f=null===(l=u.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new Oo(h,function JD(h,u){var l;const f=(0,V.m9)(h),m=u;return G(u.customData.operationType,f,"argument-error"),G(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,f,"argument-error"),dd._fromError(f,m)}(h,u));else if(f){const m=ng(u),y=u;m&&(y.credential=m,y.tenantId=f.tenantId||void 0,y.email=f.email||void 0,y.phoneNumber=f.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Xy(l),additionalUserInfo:li(l),user:Xi.getOrCreate(m)}})}function Hn(h,u){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,I.Z)(function*(h,u){const l=yield u;return{verificationId:l.verificationId,confirm:f=>Ir(h,l.confirm(f))}})).apply(this,arguments)}class Oo{constructor(u,l){this.resolver=l,this.auth=function Za(h){return h.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return Ir(Wa(this.auth),this.resolver.resolveSignIn(u))}}class Xi{constructor(u){this._delegate=u,this.multiFactor=function t0(h){const u=(0,V.m9)(h);return _p.has(u)||_p.set(u,mp._fromUser(u)),_p.get(u)}(u)}static getOrCreate(u){return Xi.USER_MAP.has(u)||Xi.USER_MAP.set(u,new Xi(u)),Xi.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var l=this;return(0,I.Z)(function*(){return Ir(l.auth,dp(l._delegate,u))})()}linkWithPhoneNumber(u,l){var f=this;return(0,I.Z)(function*(){return Hn(f.auth,function Ty(h,u,l){return vd.apply(this,arguments)}(f._delegate,u,l))})()}linkWithPopup(u){var l=this;return(0,I.Z)(function*(){return Ir(l.auth,function Qi(h,u,l){return nc.apply(this,arguments)}(l._delegate,u,xi))})()}linkWithRedirect(u){var l=this;return(0,I.Z)(function*(){return yield zd(Lt(l.auth)),Z(l._delegate,u,xi)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var l=this;return(0,I.Z)(function*(){return Ir(l.auth,hp(l._delegate,u))})()}reauthenticateWithPhoneNumber(u,l){return Hn(this.auth,function Sp(h,u,l){return Xu.apply(this,arguments)}(this._delegate,u,l))}reauthenticateWithPopup(u){return Ir(this.auth,function Ay(h,u,l){return Dd.apply(this,arguments)}(this._delegate,u,xi))}reauthenticateWithRedirect(u){var l=this;return(0,I.Z)(function*(){return yield zd(Lt(l.auth)),Ry(l._delegate,u,xi)})()}sendEmailVerification(u){return function fo(h,u){return Ce.apply(this,arguments)}(this._delegate,u)}unlink(u){var l=this;return(0,I.Z)(function*(){return yield function cp(h,u){return ws.apply(this,arguments)}(l._delegate,u),l})()}updateEmail(u){return function ai(h,u){return ad((0,V.m9)(h),u,null)}(this._delegate,u)}updatePassword(u){return function Oa(h,u){return ad((0,V.m9)(h),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function Dy(h,u){return xr.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Ma(h,u){return Gi.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,l){return function xa(h,u,l){return Gu.apply(this,arguments)}(this._delegate,u,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xi.USER_MAP=new WeakMap;const ko=G;let rg=(()=>{class h{constructor(l,f){if(this.app=l,f.isInitialized())return this._delegate=f.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;ko(m,"invalid-api-key",{appName:l.name}),ko(m,"invalid-api-key",{appName:l.name});const y=typeof window<"u"?xi:void 0;this._delegate=f.initialize({options:{persistence:ev(m,l.name),popupRedirectResolver:y}}),this._delegate._updateErrorMap(yn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,f){!function nt(h,u,l){const f=Lt(h);G(f._canInitEmulator,f,"emulator-config-failed"),G(/^https?:\/\//.test(u),f,"invalid-emulator-scheme");const m=!!l?.disableWarnings,y=sy(u),{host:T,port:P}=function Hi(h){const u=sy(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(u.length));if(!l)return{host:"",port:null};const f=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(f);if(m){const y=m[1];return{host:y,port:ga(f.substr(y.length+1))}}{const[y,T]=f.split(":");return{host:y,port:ga(T)}}}(u);f.config.emulator={url:`${y}//${T}${null===P?"":`:${P}`}/`},f.settings.appVerificationDisabledForTesting=!0,f.emulatorConfig=Object.freeze({host:T,port:P,protocol:y.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function WD(){function h(){const u=document.createElement("p"),l=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,f)}applyActionCode(l){return function Bn(h,u){return Ts.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return nr(this._delegate,l)}confirmPasswordReset(l,f){return function Qe(h,u,l){return en.apply(this,arguments)}(this._delegate,l,f)}createUserWithEmailAndPassword(l,f){var m=this;return(0,I.Z)(function*(){return Ir(m._delegate,function dy(h,u,l){return od.apply(this,arguments)}(m._delegate,l,f))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Zt(h,u){return oi.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function St(h,u){const l=uo.parseLink(u);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){ko(Xp(),l._delegate,"operation-not-supported-in-this-environment");const f=yield function ic(h,u){return sn.apply(this,arguments)}(l._delegate,xi);return f?Ir(l._delegate,Promise.resolve(f)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function $d(h,u){Lt(h)._logFramework(u)}(this._delegate,l)}onAuthStateChanged(l,f,m){const{next:y,error:T,complete:P}=ig(l,f,m);return this._delegate.onAuthStateChanged(y,T,P)}onIdTokenChanged(l,f,m){const{next:y,error:T,complete:P}=ig(l,f,m);return this._delegate.onIdTokenChanged(y,T,P)}sendSignInLinkToEmail(l,f){return function ae(h,u,l){return Re.apply(this,arguments)}(this._delegate,l,f)}sendPasswordResetEmail(l,f){return function Nr(h,u,l){return bn.apply(this,arguments)}(this._delegate,l,f||void 0)}setPersistence(l){var f=this;return(0,I.Z)(function*(){let m;switch(function on(h,u){Ga(Object.values(fn).includes(u),h,"invalid-persistence-type"),(0,V.b$)()?Ga(u!==fn.SESSION,h,"unsupported-persistence-type"):(0,V.UG)()?Ga(u===fn.NONE,h,"unsupported-persistence-type"):Jp()?Ga(u===fn.NONE||u===fn.LOCAL&&(0,V.hl)(),h,"unsupported-persistence-type"):Ga(u===fn.NONE||Yp(),h,"unsupported-persistence-type")}(f._delegate,l),l){case fn.SESSION:m=Cs;break;case fn.LOCAL:m=(yield ne(Io)._isAvailable())?Io:La;break;case fn.NONE:m=et;break;default:return ot("argument-error",{appName:f._delegate.name})}return f._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Ir(this._delegate,function Sa(h){return Lu.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Ir(this._delegate,Ra(this._delegate,l))}signInWithCustomToken(l){return Ir(this._delegate,function ly(h,u){return Pa.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,f){return Ir(this._delegate,function zt(h,u,l){return Ra((0,V.m9)(h),co.credential(u,l)).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&sd(h),m});return function(m){return f.apply(this,arguments)}}())}(this._delegate,l,f))}signInWithEmailLink(l,f){return Ir(this._delegate,function $r(h,u,l){return Ds.apply(this,arguments)}(this._delegate,l,f))}signInWithPhoneNumber(l,f){return Hn(this._delegate,function Yu(h,u,l){return Ju.apply(this,arguments)}(this._delegate,l,f))}signInWithPopup(l){var f=this;return(0,I.Z)(function*(){return ko(Xp(),f._delegate,"operation-not-supported-in-this-environment"),Ir(f._delegate,function yr(h,u,l){return Td.apply(this,arguments)}(f._delegate,l,xi))})()}signInWithRedirect(l){var f=this;return(0,I.Z)(function*(){return ko(Xp(),f._delegate,"operation-not-supported-in-this-environment"),yield zd(f._delegate),Ao(f._delegate,l,xi)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function fp(h,u){return ho.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=fn,h})();function ig(h,u,l){let f=h;"function"!=typeof h&&({next:f,error:u,complete:l}=h);const m=f;return{next:T=>m(T&&Xi.getOrCreate(T)),error:u,complete:l}}function ev(h,u){const l=function Jy(h,u){const l=vr();if(!l)return[];const f=ut(tg,h,u);switch(l.getItem(f)){case fn.NONE:return[et];case fn.LOCAL:return[Io,Cs];case fn.SESSION:return[Cs];default:return[]}}(h,u);if(typeof self<"u"&&!l.includes(Io)&&l.push(Io),typeof window<"u")for(const f of[La,Cs])l.includes(f)||l.push(f);return l.includes(et)||l.push(et),l}class Gd{constructor(){this.providerId="phone",this._delegate=new wo(Wa(Te.Z.auth()))}static credential(u,l){return wo.credential(u,l)}verifyPhoneNumber(u,l){return this._delegate.verifyPhoneNumber(u,l)}unwrap(){return this._delegate}}Gd.PHONE_SIGN_IN_METHOD=wo.PHONE_SIGN_IN_METHOD,Gd.PROVIDER_ID=wo.PROVIDER_ID;const tv=G;class nv{constructor(u,l,f=Te.Z.app()){var m;tv(null===(m=f.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:f.name}),this._delegate=new wy(f.auth(),u,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ic(h){h.INTERNAL.registerComponent(new qt.wA("auth-compat",u=>{const l=u.getProvider("app-compat").getImmediate(),f=u.getProvider("auth");return new rg(l,f)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:co,FacebookAuthProvider:ap,GithubAuthProvider:ni,GoogleAuthProvider:up,OAuthProvider:lo,SAMLAuthProvider:We,PhoneAuthProvider:Gd,PhoneMultiFactorGenerator:jp,RecaptchaVerifier:nv,TwitterAuthProvider:Aa,Auth:rg,AuthCredential:Es,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.4.8")}(Te.Z)},861:(Ei,mn,xe)=>{function I(V,Ae,at,Mt,qt,_n,$e){try{var W=V[_n]($e),te=W.value}catch(ge){return void at(ge)}W.done?Ae(te):Promise.resolve(te).then(Mt,qt)}function Te(V){return function(){var Ae=this,at=arguments;return new Promise(function(Mt,qt){var _n=V.apply(Ae,at);function $e(te){I(_n,Mt,qt,$e,W,"next",te)}function W(te){I(_n,Mt,qt,$e,W,"throw",te)}$e(void 0)})}}xe.d(mn,{Z:()=>Te})},582:(Ei,mn,xe)=>{function Ae(M,F){var j={};for(var q in M)Object.prototype.hasOwnProperty.call(M,q)&&F.indexOf(q)<0&&(j[q]=M[q]);if(null!=M&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(q=Object.getOwnPropertySymbols(M);K<q.length;K++)F.indexOf(q[K])<0&&Object.prototype.propertyIsEnumerable.call(M,q[K])&&(j[q[K]]=M[q[K]])}return j}function ge(M,F,j,q){return new(j||(j=Promise))(function(U,fe){function ze(Xe){try{_e(q.next(Xe))}catch(kt){fe(kt)}}function Ke(Xe){try{_e(q.throw(Xe))}catch(kt){fe(kt)}}function _e(Xe){Xe.done?U(Xe.value):function K(U){return U instanceof j?U:new j(function(fe){fe(U)})}(Xe.value).then(ze,Ke)}_e((q=q.apply(M,F||[])).next())})}function At(M){return this instanceof At?(this.v=M,this):new At(M)}function ot(M,F,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,q=j.apply(M,F||[]),U=[];return K={},fe("next"),fe("throw"),fe("return"),K[Symbol.asyncIterator]=function(){return this},K;function fe(Et){q[Et]&&(K[Et]=function(An){return new Promise(function(dn,kn){U.push([Et,An,dn,kn])>1||ze(Et,An)})})}function ze(Et,An){try{!function Ke(Et){Et.value instanceof At?Promise.resolve(Et.value.v).then(_e,Xe):kt(U[0][2],Et)}(q[Et](An))}catch(dn){kt(U[0][3],dn)}}function _e(Et){ze("next",Et)}function Xe(Et){ze("throw",Et)}function kt(Et,An){Et(An),U.shift(),U.length&&ze(U[0][0],U[0][1])}}function Qn(M){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,F=M[Symbol.asyncIterator];return F?F.call(M):(M=function st(M){var F="function"==typeof Symbol&&Symbol.iterator,j=F&&M[F],q=0;if(j)return j.call(M);if(M&&"number"==typeof M.length)return{next:function(){return M&&q>=M.length&&(M=void 0),{value:M&&M[q++],done:!M}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(M),j={},q("next"),q("throw"),q("return"),j[Symbol.asyncIterator]=function(){return this},j);function q(U){j[U]=M[U]&&function(fe){return new Promise(function(ze,Ke){!function K(U,fe,ze,Ke){Promise.resolve(Ke).then(function(_e){U({value:_e,done:ze})},fe)}(ze,Ke,(fe=M[U](fe)).done,fe.value)})}}}xe.d(mn,{FC:()=>ot,KL:()=>Qn,_T:()=>Ae,mG:()=>ge,qq:()=>At}),"function"==typeof SuppressedError&&SuppressedError}},Ei=>{Ei(Ei.s=303)}]);